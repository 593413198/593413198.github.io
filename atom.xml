<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Luhao&#39;s Blog</title>
  
  <subtitle>luhao wiki</subtitle>
  <link href="http://luhao.wiki/atom.xml" rel="self"/>
  
  <link href="http://luhao.wiki/"/>
  <updated>2023-10-07T15:15:40.007Z</updated>
  <id>http://luhao.wiki/</id>
  
  <author>
    <name>Luhao</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>【量化】爬虫获取东财数据</title>
    <link href="http://luhao.wiki/posts/spider-easymoney/"/>
    <id>http://luhao.wiki/posts/spider-easymoney/</id>
    <published>2023-10-05T14:40:04.000Z</published>
    <updated>2023-10-07T15:15:40.007Z</updated>
    
    <content type="html"><![CDATA[<div class="admonition note"><p class="admonition-title">导读</p><ul><li>这部分主要讨论<strong>基本面数据</strong>，获取<strong>行情数据</strong>看<a href="http://localhost:4000/posts/quant-data/#%E6%95%B0%E6%8D%AE%E6%8F%90%E4%BE%9B%E5%95%86">这篇文章</a></li><li>详细的爬取标准文档见这篇：<a href="/posts/cores/datasource/#Eastmoney">cores/datasource</a></li></ul></div><div class="markmap-container" style="height:190px">  <svg data="{&quot;t&quot;:&quot;root&quot;,&quot;d&quot;:0,&quot;v&quot;:&quot;&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[0,1]},&quot;v&quot;:&quot;<a href=\&quot;#爬虫基础\&quot;>爬虫基础</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[1,2]},&quot;v&quot;:&quot;<a href=\&quot;#爬取规则\&quot;>爬取规则(东财)</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[2,3]},&quot;v&quot;:&quot;功能实现&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[3,4]},&quot;v&quot;:&quot;<a href=\&quot;#功能实现\&quot;>源码</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[4,5]},&quot;v&quot;:&quot;<a href=\&quot;#处理json\&quot;>处理json</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[5,6]},&quot;v&quot;:&quot;<a href=\&quot;#数据存储\&quot;>数据存储</a>&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[6,7]},&quot;v&quot;:&quot;<a href=\&quot;#数据应用\&quot;>数据应用</a>&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[7,8]},&quot;v&quot;:&quot;<a href=\&quot;#示例一：寻找-“A股大鳄”\&quot;>示例一：寻找“A股大鳄”</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[8,9]},&quot;v&quot;:&quot;<a href=\&quot;#示例二：财报公布后股价走向\&quot;>示例二：财报公布后股价走向</a>&quot;}]}],&quot;p&quot;:{}}"></svg></div><hr><h3 id="爬虫基础">爬虫基础</h3><p>本章要爬取的东方财富，数据结构非常简单，在爬虫领域中属于入门级别，使用 <code>request</code> 库即可。<br>下面代码示例，爬取 贵州茅台<code>600519</code> 的一些基础操盘信息：</p><pre><code class="language-py">import requestsimport jsonurl = 'https://emweb.securities.eastmoney.com/PC_HSF10/OperationsRequired/PageAjax?code=%s'res = requests.get(url % 'SH600519') # 贵州茅台info = json.loads(res.text) # dict</code></pre><h3 id="爬取规则">爬取规则</h3><p>东方财富的数据（<a href="https://emweb.securities.eastmoney.com/PC_HSF10/OperationsRequired/Index">示例链接</a>）主要有两个特点：</p><ul><li>优点：链接条理清晰，便于爬取</li><li>缺点：采用拼音缩写的命名，贼坑（例如 <code>yjbg</code> 表示<code>研究报告</code>）…</li></ul><hr><p>先分析信息页的基本结构，<strong>第一层级</strong>是下图红框部分，<strong>东财将它分为十六个板块</strong>。<br>我们会挑选需要的数据板块来爬取。</p><p><img src="/images/eastmoney-head.png" alt=""></p><hr><p>以 <strong>股东研究</strong> 为例，<strong>内部还会细分为多个第二层级</strong>，例如：</p><ul><li>股东人数：每隔一段时间公布股东数量</li><li>十大股东：前十大持股的对象，包含增减比例</li><li>机构持仓：有哪些公募、私募基金的持仓</li><li>…</li></ul><p><img src="/images/eastmoney-partners.png" alt=""></p><hr><h3 id="功能实现">功能实现</h3><p>源码: <a href="https://github.com/593413198/Alpha-Bet/blob/master/cores/datasource/Eastmoney.py"><em>cores/datasource/Eastmoney.py</em></a></p><p>先实现一个基础的爬取指定 url + code 的函数：</p><pre><code class="language-py">def crawl_base(self,                code,                url,                fields):    """ 根据指定规则爬取    :param code: 股票代码，如SH600519 (str)    :param fields: 爬取的键值，映射到中文 (dict)    :param url: 爬取的链接，股票代码用%s代替 (str)    """    url = url % code    res = requests.get(url)    info = json.loads(res.text)    info = { fields[k] : v for k, v in info.items() if k in fields}    return info</code></pre><p>后面依次实现爬取不同模块的函数，并选取有价值的字段 …</p><ul><li>操盘必读 板块</li><li>股东研究 板块</li><li>其他略 …</li></ul><pre><code class="language-py">def _crawl_cpbd(self, code):    """ 【操盘必读】    需要字段如下：        √ tszb: 特殊指标        √ ssbk: 所属板块        √ zxzbhq: 最新指标    https://emweb.securities.eastmoney.com/PC_HSF10/OperationsRequired/Index?type=soft&amp;code=SH600519#    """    fields = {        'tszb'  : '特殊指标',        'ssbk'  : '所属板块',        'zxzbhq': '最新指标',    }    url = 'https://emweb.securities.eastmoney.com/PC_HSF10/OperationsRequired/PageAjax?code=%s'    return self.crawl_base(code, url, fields)def _crawl_partner(self, code):    """ 【股东研究】    需要字段如下：        √ gdrs: 股东人数，通常股东数越少，代表股价越集中，则更容易上涨        √ sdgd: 十大股东，包含持股数和变动比例            sdltgd: 十大流通股东            jgcc: 机构持仓            jjcg: 基金持股    https://emweb.securities.eastmoney.com/PC_HSF10/ShareholderResearch/Index?type=soft&amp;code=SH600519#    """    fields = {        'gdrs' : '股东人数',        'sdgd' : '十大股东',    }    url = 'https://emweb.securities.eastmoney.com/PC_HSF10/ShareholderResearch/PageAjax?code=%s'    return self.crawl_base(code, url, fields)# 其他省略 ...</code></pre><hr><h3 id="处理json">处理json</h3><p>写入 <code>json</code> 文件时，需要注意中文编码问题，下面是一个万能模板：</p><pre><code class="language-py">with open(json_path, 'w', encoding='utf8') as f:    # infos是要写入的 dict    content = json.dumps(infos, ensure_ascii=False, indent=4)    f.write(content)</code></pre><h3 id="数据存储">数据存储</h3><p>结合多进程爬取五千多只股票池，注意处理空数据、网络错误等情形，最后分别以 <code>json</code> 格式存储在本地。</p><p><img src="/images/eastmoney-json.png" alt=""></p><hr><h3 id="数据应用">数据应用</h3><p>量化金融追求一个实用注意，那么获取这些数据究竟有什么用途?<br>除了常见的<strong>用作策略因子</strong>外，下面展示几个与众不同的用法：</p><h3 id="示例一：寻找-“A股大鳄”">示例一：寻找 “A股大鳄”</h3><p>股票市场的股权拥有者，一般有两种，要么是个人，要么是企业/地方政府/国家。</p><p>下面我们尝试统计 5000 多支股票的十大股东（从东财爬取的数据），然后稍作拟合，再按照持有数值（也可以是持有公司数量）排名，便得到如下图表（绘图来自 pyecharts）:</p><blockquote><ol><li>带 <strong>香港结算</strong> 字样的主体(及HKSCC)，一般香港/外国投资者通过港交所购买的股份，即所谓的 “北向资金”</li><li>实际持仓最多的是 <strong>中国财政部</strong>，他基本持有了各大银行的股份</li><li>其他排名高的主体，基本分布在 <strong>石油、保险、电信、证券</strong> 等国有行业</li></ol></blockquote><iframe src="/html/sort_by_amout.html" 替换这里的html="" height="500" width="100%" 修改高度即可="" frameborder="0" scrolling="yes"> 支持滚动条</iframe><hr><p>看这些国有巨头的数据没啥意思，下面尝试筛选个人持股的排名。（筛选条件很简单，长度 <code>&lt;=3</code> 的便当做个人）</p><p>排名第一的大哥叫 <strong>魏巍</strong>（竟然是28家上市公司的前十大股东…），冲浪查一下，发现他位列 <strong>牛散F4</strong> 之一。<br>而排名第二的 <strong>徐开东</strong>，也是A股赫赫有名的个人投资者，跪了！<br>靠一己之力的买买买，坐拥如此多的上市公司（虽然只是前十股份），其艰难程度可想而知！</p><iframe src="/html/sort_by_num_personal.html" 替换这里的html="" height="500" width="100%" 修改高度即可="" frameborder="0" scrolling="yes"> 支持滚动条</iframe><hr><h3 id="示例二：财报公布后股价走向">示例二：财报公布后股价走向</h3><p><font color="#FF1E10"><strong>TODO</strong></font></p>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;admonition note&quot;&gt;&lt;p class=&quot;admonition-title&quot;&gt;导读
&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;这部分主要讨论&lt;strong&gt;基本面数据&lt;/strong&gt;，获取&lt;strong&gt;行情数据&lt;/strong&gt;看&lt;a href=&quot;http</summary>
      
    
    
    
    <category term="量化交易" scheme="http://luhao.wiki/categories/%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93/"/>
    
    <category term="量化交易" scheme="http://luhao.wiki/categories/%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93/%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93/"/>
    
    
  </entry>
  
  <entry>
    <title>日志：2023年10月</title>
    <link href="http://luhao.wiki/posts/2023/10/"/>
    <id>http://luhao.wiki/posts/2023/10/</id>
    <published>2023-10-03T12:39:50.000Z</published>
    <updated>2023-10-07T18:27:04.030Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="382d795dd449158963530698983df2a28b14680ce934314758778b03cee2ca88">b3dc07a81f6459d120ce338ccca55046116de9af7135eccfa9c61a82756948fc79bd101a52dbe84eff85f501e1b47e409b6acad2613fe878f36ce89dc7f43c0cb6d91866767ff956874cf4ed5cffee71ae579cacce03827d49496bfdf64c3bff741f788c6ca09bb6a4b6c9fa03fdb69a0b5c59404061bfa539b4403b3cd287886101fc364dfa567dc93cd8babbe57eea0657cedc4096d593436ba9ef964cb932d8f4aad4e92d569e7d0cf85213657ec5977df48cfe3b2a616a782a0e28e226a9916108e82fe0900d4801438447a1ba8304ecc2eccb80ca45f63c9c7ceaf7bfa61cccee07f06c743b9f15d638968307e43d4ab1cc5feb159829e8b56eed80a106e92cc32e1efde30fea0a67613bb51bcf4336c965ea923ada3b6bb4a9d4f79d055ca33edd0fada2e03895c8341ccbe8579187b50ab9ef0784c48046b6ccd5b3df4affbc1cd85f4e892caa0cc7a7037979f392de44f1797adb973e3dfa1016014af6eba8ade1d6cc2e01315e6495882c924d250db52186ef2c6438fb38cbcadf3c7485594ceb5c8f68c2b31dc86f868d88bc587219accffd135ba3993fc84fc5744b26fd4b0335f684910b5f3a68430e3f194b4f28d0e7737591628d9627523abf2fc5f2a065e644f8eacfbb377213b1962123e0ccf395240c2ce325ff5036b3c395eabb77eb5f1e0130994911647b4bdbed6f6f427f57de0a066615cd9a96689ac4eb55647fb71e6849b1c289e06a5a5ed370c9a929ab3a8ceef1e37de3afbfded0d7eae0e8ef69aa615fd156d97e483648f389ea008336ac0e05a5665bae57a3acfd7537c412b4580598948f2d8dd47ee29b7c57abac42d295cba91e9788f0cc899c6f51c24380cef36ae85f7e46f34c82ef1af4e5beb566de0b16e0d831a9eb8e80e10c6c27cf93aa523c70994a5dc1b6347b468e75b5350ef6fec32b5f034a1aa9e4221d6c6996097433715d368a75a7c49b8a0a1b8956eaf451a350e9f6f6e9c8f9e51a5b378e73c142d5618e9ed651af1a7216b874464349e8b9e800ac6cff8e34c2247330eb636e3f4d2ca6f03fb3e0c139b4557efd061889d7836ddf5491d64c27174c171ec73164b37a78553b3fd429806894d7f79f741d49302c824842faab97c954a1149b04eee49ee2c000a80f926d105de5b0c2edf0754ec1f2b04ecaae79e82c53d0018324a66c3c593be2afe8918c1c08451125b204d0501df600f13b12afc84055017c4ad84b20b0237bfa1f37c8577efa48c828298815c184d297df82c384e2ed0be1c354ccda7146bdb7aa281d389f8d27c78d710a66cc97f696fcd90f2c32fca284139630c323c45949b02b9719e5a073b467c9d00acc6b07b1742966d342165d3ba7b9e128deef15755ea164c9443ad68383e4a3bfd8cd97ba655ed10a254ed43acfb67ec244c2b38cf0855eb60b932a42da3ef2cda53e0681c23967b818044230cb79f4d03872231022b5f3608f1a93c50c8e5c2e2bdce769a862a6eeb738fa5870146bcc254749567e84880bd113096090789a580ca569f585df8fd7e0225b8f8999e073091e7836da38e2a12f3981869931f78b2c986cce03c4aae0542461125d68b819335c</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;hbe hbe-container&quot; id=&quot;hexo-blog-encrypt&quot; data-wpm=&quot;Oh, this is an invalid password. Check and try again, please.&quot; data-whm=&quot;OOP</summary>
      
    
    
    
    <category term="个人日志" scheme="http://luhao.wiki/categories/%E4%B8%AA%E4%BA%BA%E6%97%A5%E5%BF%97/"/>
    
    <category term="个人日志" scheme="http://luhao.wiki/categories/%E4%B8%AA%E4%BA%BA%E6%97%A5%E5%BF%97/%E4%B8%AA%E4%BA%BA%E6%97%A5%E5%BF%97/"/>
    
    
    <category term="Python" scheme="http://luhao.wiki/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>【AlphaBet】cores/datasource</title>
    <link href="http://luhao.wiki/posts/cores/datasource/"/>
    <id>http://luhao.wiki/posts/cores/datasource/</id>
    <published>2023-09-28T19:07:30.000Z</published>
    <updated>2023-10-07T15:21:31.913Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="337e4603dbf647d1e6be4b3d669adac67718d0c52142ef38e0f316c14b3a0de0">b3dc07a81f6459d120ce338ccca5504625d42614b93020ffae3fe33410b4b3b7b132d51143295cdac39b893eaf193f19c019943d7e59177912cd230786c73130f76d9215c2bfeb61246a440ea10f1093f8813644e0539c6bf43af0a466ef4a3869f03545f2371c4406e374164f0141df491302831c878c9bcf684755d710c17cb4b0117718299701c3e92d7e680e2d2efa6064966556690e77b81a309d85d8062be1c5b16f52b901b914a1111d41228d16b637e33b3fb8dfd796dd947c22ca30563139d3e404d882931db783f4126db99a7310744b338a985b524a9dac8083a2a5a5aa404a7c2aba3842b8f7170f7f93a7593facb8e80f8a87e073ace10df1f6817abad52038b81e62d6a1a3b5bc4d762953c1267b1f408b00733262f7146a94e3cc80d2df634050dee46a6355ee9af83995a7b5f4b80a5627ca71066f60f41aae74b02944fe44fae3e3890718da71a40dac85b3a4877d7fcc4da2b4de3a90168081f652bad4aa16c8811955fe8cc5f31d48e9e6b338f3a16d72afc12c1b30979360689fc8ffa09031579ecc5c27ead8281c37a80b03115545b47cd91d5c57bc6503fcf138d0842fb48ab0e4172b9d4698818bfb1ceb274eac3a0d6b9c3588d345b8728b191f6c2a76bc31b7cfd2696bae0070bdb02e358907df38197b78dcfe73ee8453a3b0e5fe968017f26b66fc424a40812601fc222a55e5611d4a8588216b604291816ee56365c21979ea5309e05fbe4406a199a103f743cac2b4f5490ed210d312f7892b3cd2200a2d21dfdb5da61de40922326ab8ba2ad850c74083ed76534b200289b9d29bce4d5386cdf542920306aebdb9c3f8c6298c1ae30e68a9c24dd7117c5df3fd9c7deea388325380c97ce330b91d3ebb1fb0b033257940b7290eb571146644e8a93ac55e78aff64e321aef22ec9b15358bec56c2b3fd8da25dcf16af0bce5d57d453df12ea5406d0a74b0eedaeb1a9c7e47305f5b02c5446a0c9e4274cfe77954f49a64ba12cf0bc45a1a2dbc0afbeec373af4d6afa3495d4a6b0ecae0de608b00b884fb1f557d13f85725e01671ea88d5ae21a0b9330dac467c4ba8da1717ddf53a28ed68df5660a0f8bebd570ac529decf18701148e894c18467465e42f493d8d8c001d57917e451508a2ace4118d39001de40361395a3531a11d097680b38a4007624078c15f34a4cb55f288905c349928d6835d288446ae3d5fc6d531cf78ec56cd77562d7d34ec90629b92aa74c7cde619188682a4c3a8d935328f7f592b577abd1736b6665ad22b05d87355899098d9a773fac03f33e74f683cd2788e5a48d9924788bab44530cc4252180e19c2dce27cdd741b4d68c4af08c9730801bb468143eb12c3e03683a42a89bc2b938d0e2406bf9674f7148ca36df459b8f28286b16fb2b19620b2310695282f23b856d60641cbe0fb0b0bbb295818dc3fc45b4822583aae177e1699996e564cd04dc83579dc50b32b2eab1ece7f11608513dbe33e92b6d8500df04b5bdaf3e2057484489d59fd2c202ce11e51071b0243fd98702c191eeeba49975046e2f0321274389f0ee38b38ba17dcc22269c6421c07295d978add3e4b39eb5c6bcedf8066cc32c710c6c7da9fc5465f8276a729e7f8964e04988ac671c3ed32a18efc6f0b257952b8062a4560a50c258d7ddf9e11586f0f247d73f8922fce8f0f85063e5639953a5e83c76861314ac570c4bfab80079b642eff679b77fcc7652081f53567ce6f738078aec6c0464e0757dac121c888324ab77d36b56d93ab474587f55ae7f9c7678b074fe74b67e705d849480785f48f626983f7e73b8914190c66c0acff9423b3ff018978d318b4116b966b96b2fc7cc01d378f3cbbe78c4c6cfa4564c5235abd487c8398a27a5d087521b2d286e146360c81aa211dadf8ab50e0504fe61c9f415dbb69baee0253c405994670ed499fc612dd3fadd774c09cb1b8c0146de7012530da18a36e23504aade93fb5965b42b0e338140f0e2d4843494e22d4ac97c29eaac4c8eee22ff610656d176994ebf8c849072c2b609af488ad23dd6d8b0afdb622d8bb88948fdf3c524155cfa5004b74077f3bcf763282ebd7cf35df8d78b5f8ea483e81aa99991e9c861eca205a7f232dc58ab2ead304f81f0853dcbaec534b69abc1fc7c9bc9bf07ffce250ce6332020fc0b0a3dbf86a86b8272fc119eb2d20f633698b3fb6caca8d8195e1129fca70aaa6488cec24af9aae5dec4ff98e616141a6dee7919163b05bdeac4c46d27c8527e45d18e7080b54af06dc001d7b31346fceaed2fd36ffd5aa12aab8bfbea72dc7cfa45b2c4f65910cdc1bb4154dda16197d7eaa50bd65d993af06f5f97559c11f8900ca12d4aa62b5fb42590d8be0bb28a9201d17fc68bb1efed243169fc47073686925da28fa41f770afc9c511ab59bef43040aa0e7720cd0cba71527c97b21523b87f59da4487cc883dee50543657cb35e293805af511b4546649e7c37378286a915a09174fda8b9f6f193a8f54b666f1e2226a1b4e59f3e2cc68407dfeb672a2dfab1377b50e225b8aa05622445b36f9a12f6971d7cc5c22c6273f758db0d42e0369d18ed1d715a55901a2032719ed1a993c835af9c6edc7e89eda5fddb0f393b3000dcdb279f70f8e66559fecc26a9af814fe3e441e701f38e3c0b59923f8a7a7aa0cc6f252be84de71a956e6c458ba1b695550c416ea425418acb4ee9e0dcebbef1dcea558ce829f443e537e783029899b9a910d874f268a71df3534f37d5de3230dedee42005c3cdd0f9dbd38cede9cfb313bef707f69baec26d1b313eb8ee0e319498899dbdbd4d9cbd7a4e711c28279137e845d77a90f46fd949d85aebcbad23bc66f60b878858fb261038c89eebd0e5cf75893ab5c7575e360ada4fbc37f055f0a641a5c8aa78a611e77e7a474401fa889bee27df70ebf99d39aca0a720a0e9ce38d7b26a0ea8d6de936969411faff90debdfa30994073f7c4fb37080ffdd18128cb8791254bf8646eb5e91dd18a91916f7bae949b880b98963ec899348ab4e892dd9cde88212de2318d8851e59823ccaa3b625a45b9c5a0dc768061292198089d2a19d876088644d6b3f597a1b0054b91a1e3eb0dbdb6831dd02a2116115ffd7d4687146fd668d9f663981abcb3f35ccfc1e5c3af87828d0d9d89bd0fbaf3626716bf9ee1d3b0702b9851b692d406dbc81d81b8739ba0f1188a55b65088087dc52a05543976d233fb3ac4992a8e5bda616d390190dde421d9441dc8316d554521b5ff63344ec00a9c082202deb541f7f5189d20ef9d540d08c7bf662aa8963246bfbe460ebf4384f4c05f62747f64c24ba6b71cb9bee2c06c705a268388b6327fd9e4202bcdaf5ef730fb79dfc30814d7225e73e95f0f767e52bb494fa47eed4e55e89136ed1bbabab3adeae620d75d36d0fc967003dc857349e39f13604b9576a79569368f01f20248cb4f278b0f119aefb6d1d56a125c8a4892ba0f84e4293834123cd575b97f3710db906771dbc13b8356b099b5f8a4f8bdd7538b4920ac2eefa79787c967832cc4d52da94d4870237f1c248c4f805dce115427ecc1665201b57ea482750d4b4da8d5bde11644603dc8ab6aa2665f08eb230d89bda28e510cc9fede06cc3cdae9a98962432aa9be99b4dce5120ff5be3493f578042e1b8d273f0224204f4f30b5e490b6af2363771f92e64f7e093e04fba243d7da82d3b4d4123ccfd428958c598a2799b22648a073bc6b4f9b6a2917a16e8d4ccd089600e7</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">&lt;p&gt;AlphaBet 数据模块&lt;/p&gt;</summary>
    
    
    
    <category term="量化交易" scheme="http://luhao.wiki/categories/%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93/"/>
    
    <category term="量化交易" scheme="http://luhao.wiki/categories/%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93/%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93/"/>
    
    
    <category term="Python" scheme="http://luhao.wiki/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>泡芙成长日记</title>
    <link href="http://luhao.wiki/posts/paofu/"/>
    <id>http://luhao.wiki/posts/paofu/</id>
    <published>2023-09-27T15:00:06.000Z</published>
    <updated>2023-09-27T15:33:58.374Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="c78bd27c6bd0046deeaabc5c71061689e5d203c29ed3504ca7fdaf20daa5382b">b3dc07a81f6459d120ce338ccca55046d81ca386354419b6b77d6b55182b8ed301b3c2040d78f9d2f509a2f04ee45763854c7c389b18ca9301f9504a65415536caed1f6078a5933a1e86da75ab9d764257ebf175c8703c4a30d15bbbf7d92b3e403a1caef391b1614091ab770b4e4595b54cd1b310f8dbe1536409c8de8f79bc4348c1bc29c770dfa2315e36ce54739a172780106782350060c52eb57d286eb75fa04878f3cda90fb70f7cea791758878e87bd9cea4101225d90f42573e9709ba039eafbf4ac3e239721445477b2bafdcfe803cc6391fae439e7f1a958ddfc372c8c5d3d8d141fd4a6afb2f9e54b7b3b41df860024fd18e08c38f6e52b445e4d939b03c40370f1e6b774e3b96f4516cdaecfb256a2cf30b57347eb8cb5e55a971b8c485bb317b25d86f0bb77d12436a0c4580debbf73cb1ef658a04fa8e00e45bb46dfb81abd531bbbcb397b64220491dfceafb37390ae4c9f9163510289192df6b4a6344439d771050ceebbdcc97c64a6d10bd96f462781511c3392a795ce2ea09d63547e217b36f148524427d0e0479768f0474dd3236f3a4511c3af35a1ee4b63bb6a81ef4c7f23117aa444ed51ce8893dbb891ed914fbc62b39350da2622ac8cb9d5848e745e8ab58c01e69db620d0f75f64a2fe19aa7c1f1215ef04e78a6f32e4cc5d829e6e3e3a9ea1f833531299902c6be1ac12b99b1afde30b3718a25a9e5db3d02f6fbf37bd04f66720b67d5e989718f121b016ecc5dab29b54b1b92946fc4540d0ba419f5c57b90c085211c31391e5c10b025cd4fd6e3e9b3207259b277f1edc6437cc367f06b2a49aef1458648d2afd281e27ba5a3d143e5925818800faf5e622bc250d3d3a60f518d6583a63b4c7e16d65b4ef39a65e4a057a2c3b6e370a408964621073ba6f300667b6f1575d60f5d322cf642ef70e5cc1f1d7981482633e3b29eb99d2c2eaf62abce6c1c61cd3735ce383cac93be0ec97311acfded14c1ddbec0f5ef581f35ff2ac3d361086e3d5f93e8a370a7ed8953a4173</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;hbe hbe-container&quot; id=&quot;hexo-blog-encrypt&quot; data-wpm=&quot;Oh, this is an invalid password. Check and try again, please.&quot; data-whm=&quot;OOP</summary>
      
    
    
    
    <category term="随笔" scheme="http://luhao.wiki/categories/%E9%9A%8F%E7%AC%94/"/>
    
    <category term="随笔" scheme="http://luhao.wiki/categories/%E9%9A%8F%E7%AC%94/%E9%9A%8F%E7%AC%94/"/>
    
    
  </entry>
  
  <entry>
    <title>AlphaBet Engine</title>
    <link href="http://luhao.wiki/posts/alphabet/"/>
    <id>http://luhao.wiki/posts/alphabet/</id>
    <published>2023-09-26T14:33:32.000Z</published>
    <updated>2023-09-28T19:10:07.331Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="1c644bfa2e3ead880da6e3ac62f5a16660a198adff326ad2ce42fdf3d98a1b30">b3dc07a81f6459d120ce338ccca5504603780459e0306826441972681af56d621023a3b1e87082893d7f9f5a9cfdcbb2d60925685910ad1c3f4c7c6703be17e884d98345b93e039e1a24d1a8ebed568715753ccb25d7df8c5c7bae546cb9dd2d7867d1d67996d19fd8b59c04551be490a583a1a45c65d3695787a511f866d3303b0cb5e321ad68da8c1ef4da903d3e648ede58035c1885789bf30ba933ca7e4f14435d2f066a07bf5e0a85980ce41972a9957a1b08d33989c6bbb481850b08c8011435cf746a31c7aa1c540ceb73d5f324e874511482d50b76c6fdeb25c7cc40b23444dfa998fe7d941d124645dcef994f823caa949e964f6c6ca7dd790db5d6273289337aa3cf4e96020fabb36c413aa93d7f8dbada47cc068065082033da5bc32a18b7f9043518cce839f66e6f1da77013912881d1c9da15b53c7edb06fb745bf474543fd299749c4db849f1f39d49a0d52044cf4f305220b72b0f7a0c8df6d39fc0b2f883f756e1ef9b8baa252f48fbd2a56901ced22b0cdec9099b37f293bd34f4ccff931396d57b0fc61a4535fe3c8bbc0ef66fcafb23d87de0be56947237d9bb89ddb050fa33288866c5e8c1a1d51d5d6c74f152e0fa6a7cacb824dc10370b850c541884aa4eb486b6430a92fd0d761cb9d9ca005754aced8c48ca64a0cfc4d690b3dbdf8e94d305ddfe0ce93b3a7b4ed5c5cd41fb2455a611c0f265aec0729761616b8c9bfc6eb1898eec51f3ef378e79a6b3e9add02a4052a05881b50cca21d04bce7158a0547ae526e5f5036bb6219215baf73a9c0613194c202f6e1bc28b62bbc857203209779ad53d641fb8089b40a3d4014f7b99d85866e3b1fb16428d271d84be292f834fd16343943e55f8ab72816d51bcee30b3bfbdbc99828ddb7761e30dabcdab4dcbc363a0865299397809922b1c5ef9ef33ab68ccc4135bcfe368388885e6bd538ccbe12c75f76f86465ce679fd5ddcb367357ebca26d005d0ec7ae9a55573cffee31aa694999fe819d902acaa79bea554e0caed9bd0e7f75d20ab6f271bf59731e0bd543cf01132f7dae23f82aff90e843c6583458ddce030fa08a3c57a47326a9dc565bb0c67d58f788605605663a0884ca243364bbb59f7d1e197d7026bd0179e0d148bbbb126521b54263088d034acb9f41c9c7c85a591e0a8cf079b4266f4ad40c10fe2ae4213095e0ffb5278c52e5ea151321c817a1ed8822e23f224d9b048f9851f28e5d7dcdf61fb15d5ac6b24bb524c40654</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;hbe hbe-container&quot; id=&quot;hexo-blog-encrypt&quot; data-wpm=&quot;Oh, this is an invalid password. Check and try again, please.&quot; data-whm=&quot;OOP</summary>
      
    
    
    
    <category term="量化交易" scheme="http://luhao.wiki/categories/%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93/"/>
    
    <category term="量化交易" scheme="http://luhao.wiki/categories/%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93/%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93/"/>
    
    
    <category term="Python" scheme="http://luhao.wiki/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>【大纲】Unreal Engine</title>
    <link href="http://luhao.wiki/posts/ue/"/>
    <id>http://luhao.wiki/posts/ue/</id>
    <published>2023-09-20T15:58:28.000Z</published>
    <updated>2023-09-27T14:48:46.919Z</updated>
    
    <content type="html"><![CDATA[<div class="admonition note"><p class="admonition-title">导读</p><ul><li><a href="https://github.com/EpicGames/UnrealEngine"><strong>EpicGames/UnrealEngine</strong></a></li><li><strong>吾生有涯而知也无涯</strong>，因为学不完，所以学一点是一点</li></ul></div><h2 id="0-背景">0. 背景</h2><p>UE5 官网给到引擎的定位是：</p><blockquote><p>The world’s most open and advanced real-time 3D creation tool</p></blockquote><p>三个核心关键词是：Open、Advanced、real-time 3D。</p><ul><li>Open 区别于其他闭源且生态狭小的Unity，想改源码需要花大价钱雇团队修改</li><li>Advanced 区别于国内外其他商业引擎，UE的开发团队和社区是遥遥领先的</li><li>realtime 3D 区别于cocos-2dx和一些离线的渲染引擎，它是游戏开发最核心的要素</li></ul><h2 id="1-准备工作">1. 准备工作</h2><h3 id="编译运行">编译运行</h3><p>看 github README 很清楚，建议使用 VS2022 + Incredibuild，不然编译速度非常慢。<br>直接将 <code>UE5</code> 设置为启动项目，然后右键选择 Build，耐心等待即可。<br>中途出现一个编译报错，搜索许久无果，最终选择 Rebuild 解决…</p><blockquote><p><code>error MSB3075: 命令“D:\git_project\UnrealEngine\Engine\Build\BatchFiles\Build.bat -Target="ShaderCompileWorker Win64 Development" -Target="CTutorialEditor Win64 Development -Project=\"D:\ue_project\CTutorial\CTutorial.uproject\"" -WaitMutex -FromMsBuild”已退出，代码为 6</code><br>搜索过几个中文回答，说是通过改MSVC版本来解决，感觉纯粹扯蛋…</p></blockquote><h3 id="目录结构">目录结构</h3><blockquote><p>参考 <a href="https://docs.unrealengine.com/5.3/zh-CN/unreal-engine-directory-structure/">UE5.3 目录结构</a></p></blockquote><p>UE引擎目录 和 UE游戏项目的目录，注意这两者是不同的，重点关注如下目录：</p><ul><li>Templates：创建项目的模板</li><li>Engine：引擎源码<ul><li>Binaries：编译后的可执行文件</li><li>Build：编译所需文件（跨平台）</li><li>Intermediate：临时文件</li><li>Shader：着色器（.usf）</li><li><strong>Source：引擎的所有源码</strong><ul><li><strong>Editor：编辑器代码</strong></li><li><strong>Runtime：引擎代码</strong></li><li>Developer：编辑器/引擎 共同使用的代码</li><li>Programs：外部工具</li></ul></li></ul></li><li>Content：项目资产（项目特有）</li></ul><h3 id="Renderoc抓帧">Renderoc抓帧</h3><p>参考这篇文章：<a href="https://www.cnblogs.com/kekec/p/11760288.html">博客园: UE4中使用RenderDoc截帧</a></p><h2 id="X-计划">X. 计划</h2><ul><li>快速过一遍 <a href="https://docs.unrealengine.com/5.3/zh-CN/">UE5.3文档</a>，先俯瞰全貌</li><li>挑选出感兴趣的 <a href="https://portal.productboard.com/epicgames/1-unreal-engine-public-roadmap/tabs/88-unreal-engine-5-3">UE功能模块</a>，并逐次深入</li></ul><p>【方法论】<br>可以先挑选在 <code>NeoX</code> 中熟络的模块，以观摩其在 <code>UE</code> 中的实现，并<strong>对比两者实现的异同优缺，思考有无借鉴糅合的可能性…</strong></p>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;admonition note&quot;&gt;&lt;p class=&quot;admonition-title&quot;&gt;导读
&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/EpicGames/UnrealEngine&quot;&gt;&lt;strong&gt;EpicGam</summary>
      
    
    
    
    <category term="3D Engine" scheme="http://luhao.wiki/categories/3D-Engine/"/>
    
    <category term="3D Engine" scheme="http://luhao.wiki/categories/3D-Engine/3D-Engine/"/>
    
    
  </entry>
  
  <entry>
    <title>日志：2023年9月</title>
    <link href="http://luhao.wiki/posts/2023/9/"/>
    <id>http://luhao.wiki/posts/2023/9/</id>
    <published>2023-08-31T16:40:43.000Z</published>
    <updated>2023-10-03T12:40:00.420Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="cbf1ecc07e1f6a61d57168f47d8b137e542242d8be7f083ef46933f12f70f3f2">b3dc07a81f6459d120ce338ccca550463faa708b9b4d89df9ab14ba4edd809f60b32d15b5672ce84c5d84744f7f475de0b1305a637ea913974dff7410a14ed4dbbb40a5278eb14bbac34e59e12a284c7a294ab69a495d47e11e78ad50feb1070a468302317925759b63d81d1a890d91bb247f88a2922744d34b0dccccece2ea7b156e500c0039cfd827310258914cf02387296f49579859a12f70fb57cd977715c82a3748c321a9a025e128a2cce7f1de3dc03b281972aa543ebeddc996b02a417d9199a94914424bfe81c44ba3eabf2c80e4e270af2ca8407ae2a85ff69b0c1fc536f95c6144a12dfa7ffb8ccdccd84134a688fc70c762745ffb27c1d7f5c04309f944cf5a21383babeb4809120af766173cd3913c8397f6e4c96eb7384f89954fa660cd52a67795cc60cbbdc39c1b58ae0a544dfa11a95645a948f05dae5f8e4a73672048fdc14fc952a5849dd401a3784b6c89bd951f0ab835ac1a4a9f70d444ae242f4dea85b2f9d8d9a7e9305be6ab28cad14ba0c2b7a571fa964999e0ffaa760a2fa7600eff40d891f5e0c65b1fc925a7af5120ff3379ed5731a4194270d519619feed43fd2b6a44c393002a33c3d67c746dee94be0af2ebd54e04a4b20731890f02c5682483b33ee0f28b7da3574f7d08c5f02bdfcf451a36a3333061975b30b4fe8d031b74c782518cab023906e9989aa95522ae03c37da39cda6fde3a576407660e733a7059c3a0f80e97991159b711d583d54f3289b252d70ab0038a7b288566f8903e8861af824a96f2fd0e681502bb84c68c7b026dbc1cdd48f77049005108be76f62fb72f817997c97f0a8f300c100eded8b35f427afd0b17a654dbfa3b8664dd933d00c755cdf46020a148ce26e82760da79b1455507d496518b8d707ff0bd13b0f0cae9e6b9150e6bd32060a04054c6c41140d97ff93653793ffe18ffdf7701d29c0df7b70ac5bd75df406b5d979447871f37bf928d3a76d46f5a28d7d625b444c0ce0e2f3cd6051830a7e1248d45e254e2e93a3f8570ffa7ecdb11e0084db744bbff2c61f2a851c84517e281db403919018b838efe44a580270d83c4ac3adf7aca236dfdb85b7fd93aafc866dc3671e7f15d4182c17043fd91ab23a517451a5e71a719c1324e7e3dfc13edca5bcbdd2c9b5d44300593869ea5e70b4eb2ff3631497ea992cf96107bb632236d00fbdb9c878d90beaaebbc8f45e1759d1ba4c940d200eb660b09a2d7a68b42600a23764e4725996059cd22d90473009bb50ef579822bb481b46b4cea1cf58ae2935fcb9ecbb2a88171e006ff6590583cdd66434631bd5139a8ed79443bb5c9801f184c9c03197e895989864722c465a8c92d88993a6ba26faac43ceac0f9d2522580fc5a24994c852b0e1d47360ca5dc0d1acdbff9c25629eade6fa687009be6397ce3048cf795071d7508e2648a2eb9a3ddb9d5be23570d89bed72fda368d04f427c23915628a2f5059728f3ff6e6c3a87c545465a0faefe26a2386232928017e481e7430a618cbd7c9103d7af6370f88110a6b8b9d62268d1cbff439e51921719ea9251416d227e8ba25874da2394926b328b29b3faca6fca6302468c78a87ef6bc4c01cb9f62a094255ea8246c27b6ce8a36f16e163ca3dc533f8a5f48fb144bffc910c17fc5a85963b6e1b858ac3a3132a05be5a976d78a9e6fb95f5f84845679039f951011c1f52454b4b1cbcc3f8c68549ac3b256431b44b945be0e8717e3a978636dbb454c22a3ba7ee90acc36290bf6dbcc507973d85ee7cce3db7ee3c55b722f813b509f5583b81643b46d9dae38a1eb98a81fe3165d046dc0038d9a2b098352bb655fbb1a7c6ee868de2e0d357748abd976dc89d3d9516473dea8143f4db516ef8c6266fb05d16357670eecf6f2214745bd9aed35dd3bd1612b1840885f22aac29f36731cba2b7c2756c3fdee8b3eda90fbf4b4d487b41128e61d60cf12927750a4b28cf4722a8c936fb7cf1f39a16ba7f0beffe31079dd0f0da462ec44d62270ce4b56fa66293ca95c218faff7b72ef70ef4a42d4ce50a65df10ed61eb32189e6d63bd178a84bef850852aeb50458b826c3fd2857b49428b1b630c83a660b88ed767bc7bd30cca9051f4f1d10ba700e3c969403170fb1372c610cb89a7e247e23f6e17a4a19fb93a0ac559f54e5860c613f6cbf5f52a99ab5493d8fb016cbd948c890e0ce001c3d8649f8a9f6a7f1e9965566fb2da0e5d5147152467dc3441b953aa054ce38a234ba257ddcbeb17f1403224f03a5e68b5ac4036f51b43530a457d19fbb98265858b4822281d07af0a2f205395da54b88dd11529fff47cfad68d842268b66497d90178bf85c43cd1b90048a8c35c8fc177d01f8eb428ae05768673d2dace3e426e2d193aa40c273702653ba8523fa752413ffb2ed2635efbd05be85aa69665531381c78f9a1242f6d49bf8829459b60da404bdcf775465d01daaf39b7b02288a68cae6531459d4cb43673baab5bb4eaa4431fcbd599542f45ef3cba579d3ac2a0beee72ee6143bf869a92a9ed20546b02da8f8824741a7f1e9c6365e19521183e0c3cd6d174e3ce008e0c732d88055f11eaa1efaf15d4c5ff8f0f8b0e441a3496936a181830cc1624f2c4b6a3a7fcaa4f2365297e7c14a9b5f111a8f317120a249afe2dcba85e096c54e561a8031184a8bfda19ee31a5783193dc26ef82f4c8f874638f3136272303f5b52e698f3c116c3e551d4cd811bfb16b2fec613152056dd53548cad1eed03474e6eae3b9f1edf61e2563d8a088bd8819beff6246d5ad831cf1a7a0e5d0cc297a09c71168c074f83a0f11369ee0907b819b86cc3eb91024f97e39b3e2ec1a0bf22cf1cd40bc9dbc86c06ca2a383b92be92c9d74589d4c966e0b6aff543d472add9881655e6559591ffe23738fded6d6bc322a1c127bbf88316ab83357c026e16036d9256869038d1d8bf344203421b3022affd4ded033c4d93d7c57f90ec36c5a7b8cf820bdc8f7f22047068bbcd6c71568ac32bcd20b7c41ce3cc026f8c6c756ed6e45ad43ba20ad54f370019d5ec550d3d4f07ceabc8e020fc37a95efdd85c5a3ed55d822f7441abe3c3fc70d2232fde2dfd7bc0ec50c274b62bc6d97a8931c289af2546e1e9f1fa217b0558fcd5a51133eadda1af7044ef317c241ecee30918013d92f8ee6d26da319a50adb30032d14c7a675c7126b857031bb01ab3896bf291c9f0313d8f0626b7b6e87234ca7c3f02e80b6983a156322dcb24997ff4b057b782058a6bb085b240aabd8186ee9c7e194bbd39639fe548f77a66f02b9f02d74db5246c85798d729bca96eb78e2205520c0fb216f26961e238d47db3bcbb2fd251296bbdaca80b2d83076954021e49a50d59698ebe9cb871a58212dc4b16fe25a926c5aa9b709f74b7f4fb8050eecd589c61ae60bc5abeb4f12ae3159f79596d30f8f3015b3fa8a5c50dc01527284da248747592689bbbad3d8de41bbc2de72772a3152009847e702a1fe23c8375822c9cc9375506fbcc5194c028d57a04f468c3bdc16c19af651e4c825fad715874e0408efe9f89b1ec866d87324c287685820291228168c903c9bc151e6163a4a466f6d16712080916781157dd02d1fe9d0e59c9f0741ad046afec2b2f4dc3c3c526ce3248326501e06aff3574c5d3a5bac9479b3e3584b738c748f53e29dfd7d999134ae922a425eecd06c2c0fb709f1aef9d9df125ddc07c9d02676dc6a705ffe7fa9672f57380fe88c9595ee6e341ffbc7b38b1cfe37c87a2bf1d35c7a770c1608bd1e4448542270913c880a56d372816a30bf8556edf8391bcecb8c89602e996e9958ec84c168e447117a650fba0ab3a297b566d3d5b58751be39798437f2fbb3eedbc03d8bb886f2a03b3e879e5db11708a8930ded16ad669b3dc19e811fecc967da05ee0b2a0b628da60abb45611736c790241679ee46a6bbfd7234aa86cf49f41f984971fe8c23e4e5296748c245ff7dc6711a3813139f69677a74385089d7f5a8ba439be63a72ed81caaed1891586b5ab4dcfea75a252bda347489b172babde966483bc78f8fda30b15edcc176311091f72dc7c6e73172658813784dfbc837e3a283c3cca3ea0d5f41718ade096db607377118b75381d2d9759f210790b8d1f6e5214aaa61d8bb0a4d0a3256aef437eada410c0d34563bcfd4678af647c9d4380af2e82b9e2b3924ff01715d6167e238ac868b5151c2cf48eb3e3c6b11b8369dc99be04c2653eedfc5711f21b48ba8996167b922b512b5d56f484d311251eccc94b7735c75c6735513c6e8cbc0f343a7cfe485dce5af6a7206980141a69dd81aefbbd0c9858428990567e3e2397fc22db911897c79e30de9ec0ed698357598ffd73c5674549d588a091a4377d73ef21201b319ad28ea3798ec1bf2cb3ca074d76ffff0aee2ad816041e6bb381acc79114215db200a8e7c724ecaffb92c20363763841662dd2a7161a9cac3a818d7375a0b4d83217f2056b0e3a1a52e98ced53619aaf537ce552ee0f4c433736752cc26c50ff86a7c402b3ce926cf6a27d2f003168c6e8b46003c967b854817d635c494cfaa2c53be2dbbaf32142dd503b1a45ec027d5314cf92988e3a8fbcd975a0e0c7ee04654</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;hbe hbe-container&quot; id=&quot;hexo-blog-encrypt&quot; data-wpm=&quot;Oh, this is an invalid password. Check and try again, please.&quot; data-whm=&quot;OOP</summary>
      
    
    
    
    <category term="个人日志" scheme="http://luhao.wiki/categories/%E4%B8%AA%E4%BA%BA%E6%97%A5%E5%BF%97/"/>
    
    <category term="个人日志" scheme="http://luhao.wiki/categories/%E4%B8%AA%E4%BA%BA%E6%97%A5%E5%BF%97/%E4%B8%AA%E4%BA%BA%E6%97%A5%E5%BF%97/"/>
    
    
    <category term="C++" scheme="http://luhao.wiki/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>【AI】chatgpt入门</title>
    <link href="http://luhao.wiki/posts/3GDXTCB/"/>
    <id>http://luhao.wiki/posts/3GDXTCB/</id>
    <published>2023-08-30T16:58:13.000Z</published>
    <updated>2023-08-30T17:14:34.895Z</updated>
    
    <content type="html"><![CDATA[<p>OpenAI注册闭坑、GPT Api调用指南<span id="more"></span></p><h3 id="注册-OpenAI">注册 <a href="https://openai.com/">OpenAI</a></h3><p>跟这个教程操作即可：<a href="https://www.awyerwu.com/9829.html">ChatGPT最新注册教程</a></p><p>核心问题是两个：</p><ol><li>借助 VPN 绕过 OpenAI 的IP检测封控，直接挂美国</li><li>借助 <a href="https://sms-activate.org/">sms-activate</a> 接收外国手机的验证码</li></ol><h3 id="调用-GPT-Api">调用 <a href="https://platform.openai.com/docs/api-reference">GPT Api</a></h3><p>开发环境使用 <code>python3</code>，通过 <code>pip3 install openai</code> 安装依赖包。<br>注意生产环境也要挂VPN，下面是一段测试代码：</p><pre><code class="language-python"># -*- coding: utf-8 -*-import openaiopenai.api_key = "***********************"completion = openai.ChatCompletion.create(  model="gpt-3.5-turbo-0613",  messages=[    {      "role": "user",       "content": "解释厄尔尼诺现象",    }  ],  temperature = 0.7)print (completion.choices[0].message.content)</code></pre><h3 id="开源推荐">开源推荐</h3><ul><li><a href="https://github.com/zhayujie/chatgpt-on-wechat">chatgpt-on-wechat</a></li></ul><p>微信聊天机器人，支持GPT3.5/GPT4.0/文心一言/讯飞星火模型，支持个人微信、公众号、企业微信，支持文本、语音和图片的处理。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;OpenAI注册闭坑、GPT Api调用指南&lt;/p&gt;</summary>
    
    
    
    <category term="AI" scheme="http://luhao.wiki/categories/AI/"/>
    
    <category term="AI" scheme="http://luhao.wiki/categories/AI/AI/"/>
    
    
    <category term="Python" scheme="http://luhao.wiki/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>【量化】数据专题</title>
    <link href="http://luhao.wiki/posts/quant-data/"/>
    <id>http://luhao.wiki/posts/quant-data/</id>
    <published>2023-08-29T15:40:15.000Z</published>
    <updated>2023-10-05T16:47:07.228Z</updated>
    
    <content type="html"><![CDATA[<div class="admonition note"><p class="admonition-title">导读</p><ul><li>交易需要与 <strong>哪些数据</strong> 打交道？</li><li>如何获取 <strong>可靠、实惠</strong> 的数据？</li><li>如何高效地 <strong>存储、读写、计算</strong> 数据？</li></ul></div><div class="markmap-container" style="height:300px">  <svg data="{&quot;t&quot;:&quot;root&quot;,&quot;d&quot;:0,&quot;v&quot;:&quot;&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[0,1]},&quot;v&quot;:&quot;数据管线&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[1,2]},&quot;v&quot;:&quot;Tick&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[2,3]},&quot;v&quot;:&quot;Bar&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[3,4]},&quot;v&quot;:&quot;K-line&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[4,5]},&quot;v&quot;:&quot;<a href=\&quot;#数据类型\&quot;>数据类型</a>&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[5,6]},&quot;v&quot;:&quot;基本数据&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[6,7]},&quot;v&quot;:&quot;市场(行情)数据&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[7,8]},&quot;v&quot;:&quot;第三方数据&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[8,9]},&quot;v&quot;:&quot;<a href=\&quot;#数据提供商\&quot;>数据提供商</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[9,10]},&quot;v&quot;:&quot;数据格式&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[10,11]},&quot;v&quot;:&quot;金融常识&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[11,12]},&quot;v&quot;:&quot;<a href=\&quot;#复权\&quot;>复权</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[12,13]},&quot;v&quot;:&quot;<a href=\&quot;#财报数据\&quot;>财报数据</a>&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[13,14]},&quot;v&quot;:&quot;<a href=\&quot;#Pandas\&quot;>Pandas</a>&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[14,15]},&quot;v&quot;:&quot;<a href=\&quot;#性能相关\&quot;>性能相关</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[15,16]},&quot;v&quot;:&quot;<a href=\&quot;#内存相关\&quot;>内存相关</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[16,17]},&quot;v&quot;:&quot;<a href=\&quot;#时间相关\&quot;>时间相关</a>&quot;}]}],&quot;p&quot;:{}}"></svg></div><h2 id="数据管线">数据管线</h2><p>交易数据可以分为三类（从左到右）：</p><p><img src="/images/quant-data-chart.png" alt=""></p><p>换一个角度理解：Bar是Tick数据的重要性采样（有点像光栅化），K-Line是Bar数据的可视化展现（有点像Pixel-Shading）。<br>在这个处理流程中，信息的原貌是不断被丢失的，因此<strong>越原始的数据，价值含量越高</strong>，就像《舌尖上的中国》所说：高端的食材，往往只需最简单的烹饪。</p><p>同时也不能忽略 图形化展示的意义，因为：</p><ul><li><strong>主观交易</strong> 依赖 K线图、技术指标 等作出趋势性、预测性地判断</li><li><strong>量化交易</strong> 往往需要借助 Tick数据 去解读更多的市场微观信息。</li></ul><p><strong>如何理解Tick数据?</strong></p><ul><li>交易所收发交易数据的<strong>最小间隔</strong></li><li>可能是每一笔撮合成交（A股），也可能是每500毫秒的交易快照（商品期货）</li></ul><h2 id="数据类型">数据类型</h2><p>狭义理解的金融数据，大概只有 成交量 和 价格 等关键值，但真正的金融市场是错综复杂、影响纷繁的，需要从如下几个领域考量：</p><ul><li><p><font color="#ef6d3b"><strong>Fundamental Data</strong></font><br><strong>基本面数据</strong>，主要是企业的营收、财报等宏观信息，传统投资领域中的分析师，往往是对着海量的财报作出投资决策的。</p></li><li><p><font color="#ef6d3b"><strong>Market Data</strong></font><br><strong>市场数据</strong>，主要是市值、市盈率、股价、成家量等金融数据，特点是 频率高、时效性强、噪声大，提取有价值信息的难度也非常大。</p></li><li><p><font color="#ef6d3b"><strong>Analytics Data</strong></font><br>（第三方）<strong>分析数据</strong>是很宽泛的概念，可能是机构的研报、社交舆情的数据，甚至是相关政策的颁布、天气信息的变幻等等。特点是获取难度大、归纳提取有效信息难度更大。</p></li></ul><hr><p>考虑到数据获取的难度因素，我们一般基于 <code>Market Data</code> 的数据进行提炼和研究，这部分信息获取公开、透明、平等，且能得到的数据量也是最大的。<br>下面介绍一些常见的市场数据的提供商（获取渠道）。</p><h2 id="数据提供商">数据提供商</h2><p>这里推荐几个具有一定性价比的渠道，相较于个人投资者（爱好者）而言：</p><table><thead><tr><th style="text-align:center">渠道</th><th style="text-align:center">价格</th><th style="text-align:center">准确度</th><th style="text-align:center">覆盖度</th></tr></thead><tbody><tr><td style="text-align:center"><a href="http://baostock.com/">baostock</a></td><td style="text-align:center">免费</td><td style="text-align:center">中</td><td style="text-align:center">A股</td></tr><tr><td style="text-align:center"><a href="http://www.jinshuyuan.net/">金数源</a></td><td style="text-align:center">中</td><td style="text-align:center">高</td><td style="text-align:center">期货、A股</td></tr><tr><td style="text-align:center"><a href="https://shinnytech.com/">天勤量化</a></td><td style="text-align:center">部分免费</td><td style="text-align:center">高</td><td style="text-align:center">期货、A股(18年起)</td></tr><tr><td style="text-align:center"><a href="http://www.juejinshuju.com/">掘金数据</a></td><td style="text-align:center">高</td><td style="text-align:center">高</td><td style="text-align:center">期货、A股、数字货币</td></tr></tbody></table><p>如果你的策略有所起色，甚至扭亏为盈了，后面可以考虑向专业的数据提供商（如<a href="https://www.wind.com.cn/mobile/WDS/zh.html">Wind</a>、同花顺）购买昂贵但准确的市场数据，有句话说得好：贵的东西总有贵的道理！</p><p><strong>再按照股票、期货细分来看：</strong></p><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">频率</th><th style="text-align:center">数据体量</th><th style="text-align:center">推荐数据源</th></tr></thead><tbody><tr><td style="text-align:center">A股 ①</td><td style="text-align:center">5档逐笔</td><td style="text-align:center">200M/年，合计1T/年</td><td style="text-align:center">tqsdk白嫖</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">1 min</td><td style="text-align:center">5M/年，合计25G/年</td><td style="text-align:center">tqsdk白嫖</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">5 min</td><td style="text-align:center">1M/年，合计5G/年</td><td style="text-align:center">baostock免费</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">日k</td><td style="text-align:center">累计 ~2G</td><td style="text-align:center">baostock免费</td></tr><tr><td style="text-align:center">商品期货 ②</td><td style="text-align:center">tick</td><td style="text-align:center"></td><td style="text-align:center">taobao购买 / tqsdk</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">1 min</td><td style="text-align:center"></td><td style="text-align:center">tqsdk</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">5 min</td><td style="text-align:center"></td><td style="text-align:center">tqsdk</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">日k</td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center">数字货币</td><td style="text-align:center">tick</td><td style="text-align:center"></td><td style="text-align:center">掘金数据</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">1 min</td><td style="text-align:center"></td><td style="text-align:center">掘金数据</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">5 min</td><td style="text-align:center"></td><td style="text-align:center">掘金数据</td></tr></tbody></table><ul><li>① 国内主要上市股票约 5000 只，平均上市时间 11.9 个年份，总计上市时间为 61000 个年份（截至发文日期 2023年10月）<ul><li><a href="http://www.sse.com.cn/market/stockdata/statistic/">上交所 2288只</a> 1727 x主板 和 561 x科创板</li><li><a href="https://www.szse.cn/market/">深交所 2827只</a> 1506 x主板 和 1321 x创业板</li><li>首支上市日期为 <code>1990年 平安银行</code></li></ul></li><li>② 国内商品期货暂未统计</li></ul><h2 id="数据格式">数据格式</h2><p>金融数据是高度序列化的，偏向于使用矩阵（数组）类结构存储，这点不同于游戏行业的策划数值表。因此需要衡量如下几点：</p><ul><li>易于 <code>Python/C++</code> 开发</li><li>读取速度快</li><li>存储空间小</li></ul><hr><p>推荐使用<code>feather</code>进行数据的读写，查阅文档 <a href="https://pandas.pydata.org/pandas-docs/version/1.4/user_guide/io.html">pandas IO tools</a></p><p>为了对比各种格式的特点，下面选取截止<code>2022-12-31</code>的 所有A股日线数据：</p><ul><li><code>26415674 rows x 8 columns</code></li><li>8列分别是：<code>code,time,open,high,low,close,volume,amount</code></li></ul><table><thead><tr><th style="text-align:center">方式</th><th style="text-align:center">占用空间</th><th style="text-align:center">读取耗时</th><th style="text-align:center">可读性</th></tr></thead><tbody><tr><td style="text-align:center">csv</td><td style="text-align:center">1.5G</td><td style="text-align:center">20s</td><td style="text-align:center">类似excel</td></tr><tr><td style="text-align:center">pickle</td><td style="text-align:center">1.8G</td><td style="text-align:center">3.5s</td><td style="text-align:center">二进制</td></tr><tr><td style="text-align:center">feather</td><td style="text-align:center">0.9G</td><td style="text-align:center">2s</td><td style="text-align:center">二进制</td></tr></tbody></table><h2 id="复权">复权</h2><p>在理解为什么要复权之前，先理解几个金融市场的基本概念：</p><ul><li><p><strong>分红：每10股派发6元</strong><br>本质是将股票市值中的6元兑换成现金，发放到你的账户，等同于套现</p></li><li><p><strong>拆股：每1股拆分为5股</strong><br>本质是因为股价过高作拆分，单只股票价格也会变成五分之一</p></li></ul><p>金融数据中的市场价格（包括开盘价、收盘价），往往都是不考虑分红、拆股的背景条件，因此经常见到股价突然腰斩 <code>90%</code> 的情况，其实并不是股价跌这么多，而是因为该上司公司拆股了。</p><p>因此，复权价格就是为了<strong>抹除非市场因素带来的涨跌，让价格保持平滑、连续性</strong></p><div class="admonition note"><p class="admonition-title">前复权和后复权</p><ul><li>前复权：以 <strong>第一天</strong> 的价格为基准，推算后面的价格</li><li>后复权：以 <strong>最后一天</strong> 的价格为基准，推算之前的价格</li><li><a href="https://www.zhihu.com/question/31004373">知乎: 通俗易懂的解释前复权，不复权和后复权有什么区别？</a></li></ul></div><h2 id="财报数据">财报数据</h2><p><strong>核心是区分毛利润和净利润</strong></p><ul><li>毛利润(gross profit) = 收入 - 生产成本</li><li>净利润(net income)= 毛利润 - 销售/管理/研发/财务成本 - 税收</li></ul><p>以白酒行业为例，假设一瓶售价为880的白酒，其原材料成本是80元，则其毛利率为 <code>800/880=91%</code>。观察国内相关上司企业，就能够发现 <code>90%+</code> 的毛利率是普遍现象。<br>但由于销售成本（如广告）和人工成本的存在，其真实的净利率往往在 <code>50%</code> 以下。</p><p><strong>指标的含义?</strong></p><ul><li>毛利润衡量的是<strong>产品价值</strong>，毛利率高，说明这是一门好生意（白酒、互联网）</li><li>净利润衡量的是<strong>企业价值</strong>，净利率高，说明其赚钱能力强（九安医疗 …）</li></ul><div class="admonition warning"><p class="admonition-title">留几个没想明白的问题</p><ol><li>对于没有实体的 <strong>互联网行业</strong>，如何衡量其生产成本?</li><li>毛利润是否扣除 <strong>员工工资</strong>?</li><li><strong>为什么要统计毛利率?</strong> 光有净利率不足够吗?</li></ol></div><h2 id="Pandas">Pandas</h2><p><a href="https://pandas.pydata.org/">Pandas</a> 是 应用最广泛的 Python数据处理库，在量化交易、数据清洗中非常重要。</p><h4 id="性能相关">性能相关</h4><ul><li><a href="https://numba.readthedocs.io/en/stable/user/5minguide.html"><font color="#1A9BFF"><em><strong>numba</strong></em></font></a></li><li>读取较多个csv文件耗时较长, 如何用 <font color="#1A9BFF"><em><strong>multiprocess + pandas</strong></em></font> 读取?</li></ul><pre><code class="language-python">from multiprocessing import Pooldef read_csv(file_name):    return pandas.read_csv(file_name)file_list = [...]with Pool(processes=6) as pool:    df_list = pool.map(read_csv, file_list)    df_all = pd.concat(df_list, ignore_index=True)    """ 推荐在read_csv里将数据写到一个全局的dict """</code></pre><h4 id="内存相关">内存相关</h4><p>为了节省runtime内存, DataFrame默认读取的是<code>float64</code> &amp; <code>int64</code>格式, 占用内存大且浪费</p><ul><li><code>np.dtype('int32')</code>: 表示int32类型</li><li><code>np.iinfo('int64').max</code>: 获取int64的最大值</li><li><code>np.finfo('float64').max</code>: float64</li><li><code>int64: 64 bits = 8 byte</code></li></ul><p>建议如下:</p><ul><li>不考虑负数, 用uint代替int</li><li>能用<code>int16</code>, 就不要用<code>int32</code></li><li><font color="#FF1E10"><strong>为什么<code>float64</code>比<code>int64</code>表示范围大? 占内存是一样的</strong></font></li></ul><h4 id="时间相关">时间相关</h4><p>这里要写很多篇幅, 先介绍Pandas自带的转化:<br><font color="#FF1E10"><strong><code>TODO</code></strong></font><br><code>pandas.to_datetime(df)</code>: 返回类型是pandas的timestamp, 可以访问.date(), .day</p><h4 id="注意项">注意项</h4><ul><li><p>读取中文报错: <code>pd.read_csv(file_name, encoding = "gbk")</code></p></li><li><p>UserWarning: Pandas doesn’t allow columns to be created via a new attribute name</p><ul><li>正确写法: <code>df['name'] = xxx</code></li><li><s>错误写法: <code>df.name = xxx</code></s></li></ul></li></ul><h4 id="复杂操作">复杂操作</h4><ul><li><p><strong>groupby</strong></p><ul><li><a href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.groupby.html?highlight=groupby#pandas.DataFrame.groupby">Pandas Groupby</a></li><li><a href="https://zhuanlan.zhihu.com/p/101284491">知乎</a></li><li><code>DataFrame.groupby(by=None)</code>: 按照by这一column筛选</li><li><code>Group.get_group()</code>: 获取指定的group, 返回DataFrame</li></ul></li><li><p><strong>merge</strong></p><ul><li>DataFrame, Series之间任意合并</li><li>注意<code>left</code>, <code>right</code>, <code>outer</code>等几种方式, 底层就是<code>SQL</code>的逻辑</li><li>merge完赋值如果不对齐，可以去重: <code>mf = mf[~mf.index.duplicated()]</code></li></ul></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;admonition note&quot;&gt;&lt;p class=&quot;admonition-title&quot;&gt;导读
&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;交易需要与 &lt;strong&gt;哪些数据&lt;/strong&gt; 打交道？&lt;/li&gt;
&lt;li&gt;如何获取 &lt;strong&gt;可靠、实惠&lt;/stron</summary>
      
    
    
    
    <category term="量化交易" scheme="http://luhao.wiki/categories/%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93/"/>
    
    <category term="量化交易" scheme="http://luhao.wiki/categories/%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93/%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93/"/>
    
    
    <category term="C++" scheme="http://luhao.wiki/tags/C/"/>
    
    <category term="Python" scheme="http://luhao.wiki/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>【名人访谈】BBC采访马斯克</title>
    <link href="http://luhao.wiki/posts/2YS1Y71/"/>
    <id>http://luhao.wiki/posts/2YS1Y71/</id>
    <published>2023-08-23T15:14:25.000Z</published>
    <updated>2023-08-24T13:40:44.713Z</updated>
    
    <content type="html"><![CDATA[<div class="admonition note"><p class="admonition-title">导读</p><ul><li><a href="https://www.youtube.com/watch?v=donC2VuVTtM"><strong>Youtube采访视频 2023年4月21日</strong></a></li><li><a href="https://www.bilibili.com/video/BV18F411y7ac"><strong>B站解说视频</strong></a></li><li>马斯克的核心技能：屌爆的思维逻辑 + 烂熟的辩论技巧</li><li>这一派还有个大佬是罗永浩，可以看他锤王自如的视频</li><li><font color="#FF1E10"><strong>TODO:</strong></font> 文章排版不满意，等录个视频锻炼口头表达</li></ul></div><h2 id="采访背景">采访背景</h2><h3 id="马斯克方面">马斯克方面</h3><blockquote><p>阅读材料：<a href="https://zh.wikipedia.org/zh-hans/%E5%9F%83%E9%9A%86%C2%B7%E9%A9%AC%E6%96%AF%E5%85%8B%E6%94%B6%E8%B4%AD%E6%8E%A8%E7%89%B9%E6%A1%88">维基百科 埃隆·马斯克收购推特案</a></p></blockquote><p>马斯克与 <strong>2022年10月</strong> 以 <strong>440亿美金</strong> 价格，收购美国社交巨头 <em><strong>Twitter</strong></em>，其过程经历三个阶段：</p><ul><li>【提出】马斯克提出收购，遭到Twitter和市场反对</li><li>【后悔】马斯克发现Twitter用户数据造假，尝试放弃收购计划</li><li>【被迫】马斯克迫于法律诉讼，被迫收购Twitter</li></ul><p>收购 <em>Twitter</em> 后，马斯克主要实行四大措施：</p><ul><li>大量裁员（8000人-&gt;1500人）</li><li>开源 <em>Twitter</em> 内容推荐算法</li><li>删除垃圾机器人</li><li>退出收费认证服务</li></ul><h3 id="BBC方面">BBC方面</h3><p>其次，BBC的采访素来以 <strong>尝试刁难采访者，角度狠辣，制造爆点话题</strong> 为主，围绕收购案本身，（从BBC角度）有如下几点值得 <strong>埋坑</strong>：</p><ol><li>【道德角度】接手公司后大量裁员</li><li>【媒体角度】Twitter充斥越来越多的虚假信息</li><li>【决策角度】收费认证被所有人吐槽</li></ol><p>所以，这次采访不是一个歌颂丰功伟绩的 “单口相声”，而更像是互相博弈的 “双人对线”，可以说火药味十足。</p><h2 id="采访正题">采访正题</h2><ul><li><font color="#ef6d3b"><strong>❓BBC: 聊聊Twitter收购案</strong></font></li></ul><p>这里马斯克谈了两点，【1】为什么停止收购，【2】强调最终收购是迫不得已。</p><blockquote><p>在谈【1】时，马斯克举了一个非常形象的例子：</p><ul><li>你想购买一袋大米，本来约定允许10%的米是坏的，最后发现30%的米都是坏的。这显然无法接受。</li></ul></blockquote><ul><li><font color="#ef6d3b"><strong>❓BBC【进攻三连】：1. 你解雇大量员工，2. 你裁员的行为很随意，3. 你毫无同情心</strong></font></li></ul><p>这里有三个观点，分别是【事实】-&gt;【表象】-&gt;【推断】，层层推进，层层致命。</p><blockquote><p><strong>马斯克的回复很经典</strong>，其实核心是马保国的 <strong>接化发</strong> （太极）：</p><ul><li>【接】：部分认同，但留有余旋 （Musk：确实裁员了…）</li><li>【化】：转移到对自己有利的话题 （Musk：公司账面只能4个月，不裁员所有人都死…）</li><li>【发】：用刁钻假设，反问对方（Musk：换做你怎么做? <a href="https://zhuanlan.zhihu.com/p/338604183">有轨电车难题</a>…）</li></ul></blockquote><ul><li><font color="#ef6d3b"><strong>❓BBC【换角度进攻】：你是世界首富，为什么不自己掏钱帮自己公司?</strong></font></li></ul><blockquote><p>这里马斯克没有技巧，全靠<strong>真诚+卖惨</strong>：我贱卖了很多特斯拉的股票才能买下Twitter（别再道德绑架俺…）</p></blockquote><ul><li><font color="#ef6d3b"><strong>❓BBC【问句埋坑】：你是否后悔裁员？</strong></font></li></ul><p>这是记者经典的疑问圈套，不论回答是否都是下策。</p><blockquote><p>回答是：马斯克认错了！亲口承认裁员不明智<br>回答否：马斯克心狠手辣！裁员毫无愧疚</p></blockquote><p>因此马斯克直接不回答该问题，而是侧面讲了两个自己的观点：</p><blockquote><p>【1】公司有自己的运转规律<br>【2】卖特斯拉股票很困难，它还导致其市值暴跌（寻求弱势低位）</p><ul><li>但如果光说第一点还不够，因为是 <strong>贱卖股票</strong> 让马斯克把自己放到了一个弱势地位，有效阻止记者继续纠缠。</li></ul></blockquote><ul><li><font color="#ef6d3b"><strong>❓BBC【聊政治，埋坑】：Twitter被你收购后解封了Trump，他何时回归?</strong></font></li></ul><p>政治是敏感话题，在西方也是如此。因此马斯克直截了当地说 <strong>不知道</strong>。<br>到这里还没完，高手厉害之处就是，<strong>抓住任何机会宣传自己的企业</strong>，于是他说：</p><blockquote><p>我在选举投了Biden，但解封了Trump，说明 <strong>Twitter是自由发声的地方</strong></p></blockquote><p>牛逼！但BBC也是高手，顺着自由发声的话题，立刻谈到Twitter的一些负面问题 ↓</p><ul><li><font color="#ef6d3b"><strong>❓BBC【开始抨击】：Twitter强调言论自由，是否助长错误信息（言论）?</strong></font></li></ul><p>再一次经典的疑问圈套，马斯克作为高手，自然不会落入俗套。他直接反问记者：<strong>谁定义错误信息？</strong>，<strong>BBC难道没有发布过错误信息？</strong></p><ul><li><font color="#ef6d3b"><strong>❓BBC【开始抨击】：Twitter裁掉整个内容审核部门，是否助长仇恨言论?</strong></font></li></ul><blockquote><p>这里介绍一个背景，大部分的社交媒体，都是通过人工（为主）+AI（为辅）过滤仇恨言论（如政治、宗教、法律），但马斯克背其道而行之（裁掉部门）。</p></blockquote><p>马斯克仍然 <strong>以反问起手</strong>：什么是仇恨言论？你用过Twitter吧（必然用过）。那举一个你见过的仇恨言论的例子。</p><blockquote><p>【若记者举了】可以逐点反驳击破，因为很多仇恨言论是片面的，如LSBT，且没法在公开场合说<br>【若记者不举】根据 “谁主张 谁举证” 的规则，其不攻自破</p></blockquote><h2 id="马斯克传达的观念">马斯克传达的观念</h2><p><strong>俗手总是去证明自己，高手往往是在表达自己</strong></p><p>抛开辩论技巧，大佬传达的观念也是值得学习的，马斯克在一个小时的采访中主要传达了这几个观点:</p><ul><li><p>【方法论】想生存? 降本增效</p><ul><li>一方面裁员，一方面裁设备（虽然导致服务崩溃）</li><li>拉回旧的广告商，提高收入</li></ul></li><li><p>【方法论】开源核心算法</p><ul><li>就像餐厅把自己的后厨公开到幕前。</li><li>只有公开透明的算法，才能让民众感到安心（尤其是社交领域）</li></ul></li><li><p>【价值观】社交媒体的意义</p><ul><li>马斯克不在乎赚钱（前提是企业能活下去）</li><li>好的社交媒体，是人们信赖的真相的来源，且人们会自发去评判和追求事物的真相</li></ul></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;admonition note&quot;&gt;&lt;p class=&quot;admonition-title&quot;&gt;导读
&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=donC2VuVTtM&quot;&gt;&lt;strong&gt;Youtu</summary>
      
    
    
    
    <category term="随笔" scheme="http://luhao.wiki/categories/%E9%9A%8F%E7%AC%94/"/>
    
    <category term="随笔" scheme="http://luhao.wiki/categories/%E9%9A%8F%E7%AC%94/%E9%9A%8F%E7%AC%94/"/>
    
    
  </entry>
  
  <entry>
    <title>【C++11】lvalue &amp; rvalue (references)</title>
    <link href="http://luhao.wiki/posts/rvalue/"/>
    <id>http://luhao.wiki/posts/rvalue/</id>
    <published>2023-08-20T14:53:43.000Z</published>
    <updated>2023-09-20T15:46:24.295Z</updated>
    
    <content type="html"><![CDATA[<p><code>C++</code> 左值、右值引用<span id="more"></span></p><div class="admonition note"><p class="admonition-title">导读</p><ul><li><a href="https://www.internalpointers.com/post/understanding-meaning-lvalues-and-rvalues-c"><em><strong>Understanding the meaning of lvalues and rvalues in C++</strong></em></a></li><li><a href="https://www.internalpointers.com/post/c-rvalue-references-and-move-semantics-beginners"><em><strong>C++ rvalue references and move semantics for beginners</strong></em></a></li><li><a href="https://www.cprogramming.com/c++11/rvalue-references-and-move-semantics-in-c++11.html"><em><strong>Move semantics and rvalue references in C++11</strong></em></a></li></ul></div><div class="markmap-container" style="height:200px">  <svg data="{&quot;t&quot;:&quot;root&quot;,&quot;d&quot;:0,&quot;v&quot;:&quot;&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[0,1]},&quot;v&quot;:&quot;左值和右值&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[1,2]},&quot;v&quot;:&quot;<a href=\&quot;#左值-→-右值\&quot;>左值 → 右值</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[2,3]},&quot;v&quot;:&quot;<a href=\&quot;#右值-→-左值\&quot;>右值 → 左值</a>&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[3,4]},&quot;v&quot;:&quot;右值引用&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[4,5]},&quot;v&quot;:&quot;<a href=\&quot;#move语义-🔥\&quot;>move语义</a>&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[5,6]},&quot;v&quot;:&quot;<a href=\&quot;#std-move\&quot;>std::move</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[6,7]},&quot;v&quot;:&quot;<a href=\&quot;#std-remove-reference\&quot;>std::remove_reference</a>&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[7,8]},&quot;v&quot;:&quot;<a href=\&quot;#三种传参\&quot;>三种传参</a>&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[8,9]},&quot;v&quot;:&quot;<a href=\&quot;#1-const-T\&quot;>const T</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[9,10]},&quot;v&quot;:&quot;<a href=\&quot;#2-const-T\&quot;>const T&amp;amp;</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[10,11]},&quot;v&quot;:&quot;<a href=\&quot;#3-T\&quot;>T&amp;amp;&amp;amp;</a>&quot;}]}],&quot;p&quot;:{}}"></svg></div><h2 id="前言">前言</h2><p>从接触、学习、运用 <code>C++</code> 至今，左右值引用一直是自己困惑的点。伴随着现代C++的发展，它们开始扮演越来越重要的作用（如 <code>std::move</code>、<code>std::remove_reference</code>…）。<br>这篇争取彻底搞懂他们。</p><p>先看 <code>gcc</code> 一个编译报错，为什么 <code>666 = x</code> 的语法是错误的？<br><em><font color="#FF1E10"><strong>error:</strong></font> lvalue required as left operand of assignment</em></p><p>编译器是在说：<strong>赋值符号 <code>=</code> 的左操作数，必须是左值 <code>lvalue</code> ! 换句话说，这里的 <code>666</code> 不是一个左值。</strong></p><pre><code class="language-c">int x;666 = x;</code></pre><h2 id="左值和右值">左值和右值</h2><p>如何区分 左值 和 右值？</p><ul><li><strong><code>lvalue</code>：指向明确的内存地址</strong>，又称 <code>variable</code></li><li><strong><code>rvalue</code>：没有明确的内存地址</strong>，又称 <code>literal constant</code></li></ul><p>下面看几个示例：</p><ul><li><code>int x = 666</code>：<code>x</code> 是 <code>lvalue</code>，<code>666</code> 是 <code>rvalue</code></li><li><code>int* y = &amp;x</code>：<code>x</code> 是 <code>lvalue</code>，<code>y</code> 是 <code>lvalue reference</code></li></ul><p>编译规则，赋值<code>=</code> 和取地址<code>&amp;</code> 的左边必须是 <code>lvalue</code>，不然会报如下错误：</p><blockquote><p><em><font color="#FF1E10"><strong>error:</strong></font> lvalue required as left operand of assignment</em><br><em><font color="#FF1E10"><strong>error:</strong></font> lvalue required as unary ‘&amp;’ operand`</em></p></blockquote><div class="admonition warning"><p class="admonition-title">区分 左值 和 左值引用</p><ul><li><code>int x = 1</code>：x是左值</li><li><code>int&amp; y = x</code>：y是左值引用</li></ul></div><h3 id="function-reference">function reference</h3><p>函数的返回值可以是 左值，也可以是 右值。</p><ul><li>右值 ×</li></ul><pre><code class="language-c">int setValue() { return 6; };setValue() = 3; // error: lvalue required as left operand of assignment</code></pre><ul><li>左值 √</li></ul><pre><code class="language-c">int x = 100;int&amp; setValue() { return x; };setValue() = 1;</code></pre><h2 id="左值-→-右值">左值 → 右值</h2><p>左值 经常会被转化为 右值，如下示例：</p><ul><li><code>x, y</code> 都是 左值</li><li><code>x + y</code> 被转化为 右值</li></ul><pre><code class="language-c">int x = 1;int y = 3;int z = x + y;   // ok</code></pre><p>上面经历了一次 <strong>lvalue -&gt; rvalue</strong>  的隐式转换，很多操作符（<code>+, -, /</code>）都会提供。</p><h2 id="右值-→-左值">右值 → 左值</h2><p>右值 到 左值 的转换是被禁止的，如下代码是非法的：</p><pre><code class="language-c">int&amp; x = 10;// error: cannot bind non-const lvalue reference of type 'int&amp;' to an rvalue of type 'int'</code></pre><h2 id="右值引用-🔥">右值引用 🔥</h2><p>C++ 的一条重要编译规则是：<strong>你无法绑定一个 右值 的地址，除非绑定到一个 <code>const</code> 类型</strong>，例如：</p><pre><code class="language-c">int&amp; x = 666; // error: cannot bind non-const lvalue reference of type 'int&amp;' to an rvalue of type 'int'const int&amp; x = 666; // OKstd::string s1 = "Hello ";std::string s2 = "world";const std::string&amp; s3 = s1 + s2;s3 += " luhao";  // error: no match for 'operator+=' (operand types are 'const std::string'</code></pre><p>但是上面的写法有个弊端，<strong>即无法再修改 <code>s3</code> 的值</strong>。<br>为了能够修改右值（即临时变量），<code>C++11</code> 正式引入右值引用（<code>rvalue reference</code>），其符号是 <code>&amp;&amp;</code>：</p><pre><code class="language-c">std::string s1 = "Hello ";std::string s2 = "world";std::string&amp;&amp; s3 = s1 + s2;s3 += " luhao"; // OK</code></pre><p>上面的示例看出来用处不大，<strong>因为 <code>rvalue reference</code> 真正大展拳脚的地方，是在 移动语义（<code>move semantics</code>）。</strong></p><h2 id="move语义-🔥">move语义 🔥</h2><p>阅读资料</p><ul><li><a href="https://www.cprogramming.com/c++11/rvalue-references-and-move-semantics-in-c++11.html"><em><strong>Move semantics and rvalue references in C++11</strong></em></a></li></ul><p><strong>移动语义 是一种利用右值引用的技术，来避免拷贝临时变量的优化手段。</strong></p><h3 id="为什么需要-move-semantics-💡">为什么需要 move semantics? 💡</h3><p>假设 <code>class Holder</code> 是一个(内存)非常繁重的类，考虑到如下的构造和拷贝构造函数。<br>当调用 <code>Holder h1(h)</code> 时，因为 <code>std::copy</code> 造成巨大的内存拷贝开销，如果后文中 <code>h</code> 也不再继续使用，为什么不尝试将 <code>h</code> 转交给 <code>h1</code> 呢?</p><pre><code class="language-c">class Holder{public:    Holder(int size) {        m_data = new int[size];        m_size = size;    }    Holder(const Holder&amp; other)    {        m_data = new int[other.m_size];        std::copy(other.m_data, other.m_data + other.m_size, m_data);        m_size = other.m_size;    }    ~Holder() { delete[] m_data; }private:    int*   m_data;    size_t m_size;}int main(){    Holder h(10000);    Holder h1(h); // 调用 std::copy 带来非必要开销    return 1;}</code></pre><p>借助移动语义，可以优化掉上面的拷贝。注意到下面使用了 <a href="#std-move"><em><strong>std::move</strong></em></a>，它能将左值转化为右值，是C++标准库的成员函数，后面有介绍。</p><pre><code class="language-c">Holder(Holder&amp;&amp; other){    // 赋值    m_data = other.m_data;    m_size = other.m_size;    // 清空other的状态    other.m_data = nullptr;    other.m_size = 0;}int main(){    Holder h(10000);    Holder h1(std::move(h));    return 1;}</code></pre><h3 id="std-move">std::move</h3><p>阅读材料：</p><ul><li><a href="https://en.cppreference.com/w/cpp/utility/move"><em>cppreference</em></a></li><li><a href="https://gcc.gnu.org/onlinedocs/libstdc++/libstdc++-api-4.5/a00936_source.html"><em>libstdc++: move.h</em></a></li></ul><p>阅读 <code>std::move</code> 的源码，其实只是作了类型转化，将 任意形式的<code>_Tp</code> 转化成右值:</p><ul><li><code>std::remove_reference</code>：去掉引用</li><li><code>static_cast</code>：隐式转换</li></ul><div class="admonition note"><p class="admonition-title">std::move</p><ul><li><code>move</code> 右值：直接返回</li><li><code>move</code> 左值：转成右值，并返回</li></ul></div><pre><code class="language-c">  /**   *  @brief  Convert a value to an rvalue.   *  @param  __t  A thing of arbitrary type.   *  @return The parameter cast to an rvalue-reference to allow moving it.  */  template&lt;typename _Tp&gt;    constexpr typename std::remove_reference&lt;_Tp&gt;::type&amp;&amp;    move(_Tp&amp;&amp; __t) noexcept    { return static_cast&lt;typename std::remove_reference&lt;_Tp&gt;::type&amp;&amp;&gt;(__t); }</code></pre><h3 id="std-remove-reference">std::remove_reference</h3><p><code>remove_reference</code> 顾名思义，就是去除任意类型的引用，借助模板实现。<br>核心是对于 <code>_Tp&amp;</code> 和 <code>_Tp&amp;&amp;</code> 这两种带引用的传参，需要去掉其引用的部分，只获取其类型（通过 <code>::type</code> 获取）</p><pre><code class="language-c">  template&lt;typename _Tp&gt;    struct remove_reference    { typedef _Tp   type; };  // 特化  template&lt;typename _Tp&gt;    struct remove_reference&lt;_Tp&amp;&gt;    { typedef _Tp   type; };  // 特化  template&lt;typename _Tp&gt;    struct remove_reference&lt;_Tp&amp;&amp;&gt;    { typedef _Tp   type; };</code></pre><h2 id="三种传参">三种传参</h2><h3 id="1-const-T"><code>1. const T</code></h3><p>常量值传递，默认有一次拷贝开销。<br>如果是 <code>builtin-types (int、float ...)</code> 推荐使用这种传递方式</p><h3 id="2-const-T"><code>2. const T&amp;</code></h3><p>常量引用传递，<code>&amp;</code> 避免拷贝带来的开销，<code>const</code> 避免被修改。<br>但会将生命周期延续</p><h3 id="3-T"><code>3. T&amp;&amp;</code></h3><p>右值传递，避免拷贝带来的开销，推荐复杂结构体如 <code>std::vector ...</code><br>缺点是调用者必须传入右值，否则编译期间报错，如果是通用接口比较难受</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;code&gt;C++&lt;/code&gt; 左值、右值引用&lt;/p&gt;</summary>
    
    
    
    <category term="C++" scheme="http://luhao.wiki/categories/C/"/>
    
    <category term="C++" scheme="http://luhao.wiki/categories/C/C/"/>
    
    
    <category term="C++" scheme="http://luhao.wiki/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>【C++17】refl-cpp</title>
    <link href="http://luhao.wiki/posts/refl-cpp/"/>
    <id>http://luhao.wiki/posts/refl-cpp/</id>
    <published>2023-08-17T16:27:58.000Z</published>
    <updated>2023-08-20T13:40:16.985Z</updated>
    
    <content type="html"><![CDATA[<p>品读<code>C++</code>经典反射库<span id="more"></span></p><div class="admonition note"><p class="admonition-title">导读</p><ul><li>源码：<a href="https://github.com/veselink1/refl-cpp"><em><strong>veselink1/refl-cpp</strong></em></a></li><li>blog：<a href="https://veselink1.github.io/blog/cpp/metaprogramming/2019/07/13/refl-cpp-deep-dive.html"><em>refl-cpp — A deep dive into this compile-time reflection library for C++</em></a></li><li>这篇博客大致是英文版的 直译 + 自己理解，旨在提高对 <code>templates</code> + <code>reflections</code> 的掌握</li><li>精读blog ➜ 理解源码 ➜ 上手仿造</li></ul></div><h2 id="目录">目录</h2><ul><li><a href="#%E5%89%8D%E8%A8%80">前言</a></li><li><a href="#compile-time%E5%8F%8D%E5%B0%84">compile-time反射</a></li><li><a href="#%E6%9E%84%E5%BB%BA%E7%B1%BB%E7%9A%84%E6%88%90%E5%91%98">构建类的成员</a></li><li><a href="#%E4%BD%BF%E7%94%A8-macros-%E7%BB%84%E7%BB%87%E4%BB%A3%E7%A0%81">使用 <code>macros</code> 组织代码</a></li><li><a href="#%E5%87%BD%E6%95%B0%E5%8F%8D%E5%B0%84">函数反射</a></li><li><a href="#%E9%81%8D%E5%8E%86%E7%B1%BB%E7%9A%84%E6%88%90%E5%91%98">遍历类的成员</a></li></ul><h2 id="前言">前言</h2><p><code>refl-cpp</code> 的设计初衷是：</p><ul><li>支持 在 <strong><code>C++17</code></strong> 及更高版本 <strong>提供编译期反射（Compile-time）</strong> 的方法。</li><li>支持 <code>enumeration</code>，<code>introspection</code><ul><li><code>enumeration</code>：类似 <code>Python dir()</code> 枚举对象所有的属性</li><li><code>introsection</code>：类似 <code>Python getattr</code> 访问对象的指定属性</li></ul></li><li>支持 类型模板、成员模板</li><li>支持 <code>attributes</code> <font color="#FF1E10"><strong>TODO</strong></font></li></ul><p><code>refl-cpp</code> 的设计避免如下：</p><ul><li>避免 使用宏魔法</li><li>避免 <code>Private</code> 私有成员的反射</li><li>避免 运行时 按名称查询类型信息</li></ul><h2 id="compile-time反射">compile-time反射</h2><p>首先 <code>refl-cpp</code> 是一个 <code>compile-time</code> 的反射库，这意味着它不会维护一个 runtime 的数据结构来实现反射目的，例如下面是不可取的：</p><pre><code class="language-c">struct TypeInfo {    std::string name;           // 对象的类型名称    std::vector&lt;?&gt; members;     // 对象的所有成员    std::vector&lt;?&gt; attributes;  // 对象的所有成员取值}// ↓ 维护一个全局的反射数据结构std::unordered_map&lt;std::string, TypeInfo&gt; s_typeRegistry;</code></pre><p>相反，<code>refl-cpp</code> 的做法是，通过 cpp模板特化 以一种类相关的方式（<code>type-dependent</code>）来存储 <code>metadata</code>，例如下面的做法：</p><pre><code class="language-c">template &lt;typename&gt; struct TypeInfo {};// ↓ Point类的编译期信息template &lt;&gt;struct TypeInfo&lt;Point&gt; {  static constexpr char name[] = "Point";  ??? members = {};  ??? attributes = {};};</code></pre><h2 id="构建类的成员">构建类的成员</h2><p>上一节提供了存储 类信息 的方法，但是如何存储 其成员变量（和方法）呢？<br><code>refl-cpp</code> 使用一种新颖的方式来存储：</p><pre><code class="language-c">template &lt;size_t N&gt;struct MemberInfo;/* 第0个成员的模板特化 */template &lt;&gt;struct MemberInfo&lt;0&gt; {  /* ... */};/* 第1个成员的模板特化 */template &lt;&gt;struct MemberInfo&lt;1&gt; {  /* ... */};static constexpr size_t MemberCount = 2;</code></pre><p><code>MemberInfo</code> 是类成员的模板特化，因此将其添加到 <code>TypeInfo</code> 的作用域（如下）。<br><code>typename Dummy</code> 是因为C++不允许成员完全模板特化，而部分成员的模板特化是允许的。<font color="#FF1E10"><strong>TODO</strong></font></p><pre><code class="language-c">template &lt;&gt;struct TypeInfo&lt;Point&gt; {  template &lt;size_t N, typename Dummy&gt;  struct MemberInfo;  /* 第0个成员的模板特化 */  template &lt;typename Dummy&gt;  struct MemberInfo&lt;0&gt; {    /* ... */  };  /* 第1个成员的模板特化 */  template &lt;typename Dummy&gt;  struct MemberInfo&lt;1&gt; {    /* ... */  };  static constexpr size_t MemberCount = 2;};</code></pre><h2 id="使用-macros-组织代码">使用 <code>macros</code> 组织代码</h2><p>上一节提供了粗略的 类 + 类成员 的反射方案，那么如何声明它们呢？<br>答案是借助 <code>macros</code> 实现（作者不是不建议使用宏么😂…）</p><ul><li><code>__COUNTER__</code> 是非标准库的宏，每次调用增加<code>1</code>，且从<code>0</code>开始</li><li>宏展开后的代码，可看示例：<a href="https://gist.github.com/veselink1/f4e2fa94bda0514631753f13a9b93f9b"><em>refl-cpp-deep-dive-5-generated.cpp</em></a></li><li>另外每个 <code>TypeInfo</code> 和 <code>MemberInfo</code> 还应该包含如下内容：<ul><li><code>static constexpr char name[] = …</code></li><li><code>static constexpr std::tuple&lt;…&gt; attributes = {…}</code></li><li><code>static constexpr auto* pointer = &amp;Type::MemberName</code></li></ul></li></ul><pre><code class="language-c">template &lt;typename T&gt;struct TypeInfo {};#define REFLECT_TYPE(TypeName) \  template&lt;&gt; struct TypeInfo&lt;TypeName&gt; { \    template &lt;size_t, typename&gt; struct MemberInfo; \    static constexpr size_t MemberIndexOffset = __COUNTER__ + 1; #define REFLECT_FIELD(FieldName) \  template &lt;typename Dummy&gt; struct MemberInfo&lt;__COUNTER__ - MemberIndexOffset&gt; \  {}; \#define REFLECT_END \    static constexpr size_t MemberCount = __COUNTER__ - MemberIndexOffset; \  };// Usage:REFLECT_TYPE(Point)   REFLECT_FIELD(x)   REFLECT_FIELD(y)REFLECT_END</code></pre><div class="admonition note"><p class="admonition-title">Tips: 借助 VisualStudio 查看宏展开</p><ul><li>鼠标悬停在宏上，点击 <code>Expand Inline</code><img src="/images/vs-macros-expand.png" alt=""></li></ul></div><h2 id="函数反射">函数反射</h2><p><code>refl-cpp</code> 还提供反射函数的功能。</p><p>为了区分成员（是变量还是方法），每个 <code>MemberInfo</code> 有一个公共的 <code>typedef</code>，它等同于 <code>refl::members::field</code> 和 <code>refl::members::function</code> 两者之一。而考虑到 函数的重载和模板，这部分功能（相对于反射成员）会更加复杂。</p><p><code>refl-cpp</code> 通过如下方法：<font color="#FF1E10"><strong>TODO</strong></font></p><pre><code class="language-c">template &lt;typename R, typename... Args&gt;auto resolve(R(*fn)(Args...), Args&amp;&amp;... args) -&gt; decltype(fn);/*   Imagine 12 more overloads of resolve for different pointer-to-member   combinations (plain, &amp;, &amp;&amp;, const, volatile qualifiers)*/template &lt;typename... Args&gt;static constexpr decltype(detail::resolve(&amp;Type::MemberName, std::declval&lt;Args&gt;()...)) pointer { &amp;Type::MemberName };</code></pre><p>↑ 上面这段代码理解起来较为困难，我们可以将其功能拆解一下，它是为了解决什么问题？</p><p>想象类型 <code>A</code> 具有两个函数重载：</p><ul><li><code>f(int)</code></li><li><code>f(const std::string)</code></li></ul><p>当拥有一个指向f的函数指针（<code>&amp;f</code>）时，编译器怎么知道调用哪个？<br><code>refl-cpp</code> 实际会帮助编译器 推导出正确的重载函数（通过将 <code>&amp;f</code> 作为参数传递给另一个函数的方式，来直接触发函数）。<br><code>resolve</code> 没有任何定义，它只是一个 <code>prototype</code>，作用是作为编译器的一个提示。</p><p>这种方法总结起来是：<strong>传递函数性质的参数（由 <code>std::decalval</code> 产生）</strong>。它的好处是：所有的参数类型转换都适用，即我们可以通过 <code>MemberInfo&lt;?&gt;::pointer&lt;int&gt;</code> 并得到一个 <code>void(*)(long)</code> 类型的指针作为结果。</p><h2 id="遍历类的成员">遍历类的成员</h2><p>前面讲了如何创建和存储类成员的 <code>metadata</code>，这节介绍如何遍历它们（<code>compile-time</code>）。<br>核心思想是 借助可变参数模板，创建一个 <code>TypeList</code> 的类型成员列表，并提供枚举的方法。</p><pre><code class="language-c">template &lt;typename... Ts&gt;struct TypeList {};</code></pre><p>!!! NOTE 这块讲的不是很细，没搞懂…</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;品读&lt;code&gt;C++&lt;/code&gt;经典反射库&lt;/p&gt;</summary>
    
    
    
    <category term="C++" scheme="http://luhao.wiki/categories/C/"/>
    
    <category term="C++" scheme="http://luhao.wiki/categories/C/C/"/>
    
    
    <category term="C++" scheme="http://luhao.wiki/tags/C/"/>
    
    <category term="Python" scheme="http://luhao.wiki/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>【cpp】Templates</title>
    <link href="http://luhao.wiki/posts/templates/"/>
    <id>http://luhao.wiki/posts/templates/</id>
    <published>2023-08-13T17:47:03.000Z</published>
    <updated>2023-08-30T17:19:34.685Z</updated>
    
    <content type="html"><![CDATA[<p>C++模板、meta-programming<span id="more"></span></p><div class="markmap-container" style="height:300px">  <svg data="{&quot;t&quot;:&quot;root&quot;,&quot;d&quot;:0,&quot;v&quot;:&quot;&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[0,1]},&quot;v&quot;:&quot;Function Templates&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[1,2]},&quot;v&quot;:&quot;<a href=\&quot;#模板基础\&quot;>模板基础</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[2,3]},&quot;v&quot;:&quot;<a href=\&quot;#编译检查\&quot;>编译检查</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[3,4]},&quot;v&quot;:&quot;<a href=\&quot;#参数推导\&quot;>参数推导</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[4,5]},&quot;v&quot;:&quot;<a href=\&quot;#多参数\&quot;>多参数</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[5,6]},&quot;v&quot;:&quot;<a href=\&quot;#函数重载\&quot;>函数重载</a>&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[6,7]},&quot;v&quot;:&quot;Class Templates&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[7,8]},&quot;v&quot;:&quot;<a href=\&quot;#模板特化\&quot;>模板特化</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[8,9]},&quot;v&quot;:&quot;偏特化&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[9,10]},&quot;v&quot;:&quot;<a href=\&quot;#模板特化-代码示例\&quot;>代码示例</a>&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[10,11]},&quot;v&quot;:&quot;SFINAE <font color=#FF1E10><strong>TODO</strong></font>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[11,12]},&quot;v&quot;:&quot;std&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[12,13]},&quot;v&quot;:&quot;<a href=\&quot;#⭐std-max\&quot;>std::max</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[13,14]},&quot;v&quot;:&quot;<a href=\&quot;#⭐std-pair\&quot;>std::pair</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[14,15]},&quot;v&quot;:&quot;<a href=\&quot;#⭐type-traits\&quot;>type_traits::is_integral</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[15,16]},&quot;v&quot;:&quot;<a href=\&quot;/posts/rvalue/#std-move\&quot;>std::move</a>&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[16,17]},&quot;v&quot;:&quot;反射 <font color=#FF1E10>&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[17,18]},&quot;v&quot;:&quot;<a href=\&quot;/posts/refl-cpp/\&quot;>refl-cpp</a>&quot;}]}],&quot;p&quot;:{}}"></svg></div><h2 id="Function-Templates">Function Templates</h2><h3 id="模板基础">模板基础</h3><p>下面是一个最简单的函数模板示例：</p><pre><code class="language-c">template &lt;typename T&gt;T max (T a, T b){    return b &lt; a ? a : b;}</code></pre><ul><li><code>T</code> 是定义类型的变量，它可以是 <code>int</code>、<code>float</code>、任何class…</li><li><code>typename</code> 是关键字，<code>template&lt;class T&gt;</code> 是兼容 C++98 的一种正确写法</li><li>上面有两个潜在约束：1. <code>T</code>必须支持<code>&lt;</code>操作符，2. <code>T</code>必须支持拷贝构造函数，为了<code>return</code></li></ul><p>下面是简单的模板使用实例：</p><pre><code class="language-c">::max(7, 8);          // 8::max(1.2, 1.5);      // 1.5::max("abc", "abcd"); // abcd</code></pre><p>当调用上者时，模板会自动实例化为：</p><pre><code>int max(int, int);double max(double, double);char const* max(char const*, char const*);</code></pre><h3 id="编译检查">编译检查</h3><p>模板的编译检查分为两个阶段（<code>Two-Phase Translation</code>）</p><ul><li>定义阶段</li><li>实例化阶段</li></ul><pre><code class="language-c">template &lt;typename T&gt;void foo(T t){    undeclared(); // 未定义函数，定义阶段报错    undeclared(t); // 引用了T，所以实例化阶段才报错}</code></pre><h3 id="参数推导">参数推导</h3><p>编译器会根据传入参数的类型，自动推导 <code>T</code> 的取值</p><ul><li>若引用传递：不允许类型转化</li><li>若值传递：只允许退化（<code>decay</code>），<code>const</code>和<code>volatile</code>会被忽略。引用会被转化成引用的类型。</li></ul><pre><code class="language-c">int const c = 42;int i = 1;::max(i, c); // OK: (int, int)::max(c, c); // OK: (int, int)int&amp; ir = i;::max(i, ir); // OK: (int, int)int arr[4];::max(&amp;i, arr); // OK: (int*, int*)</code></pre><h3 id="多参数">多参数</h3><p>模板允许定义多组不同的参数，以如下函数示例，其<strong>返回值的类型是不确定的</strong>：</p><pre><code class="language-c">template&lt;typename T1, typename T2&gt;T1 max (T1 a, T2 b){    return b &lt; a ? a : b;}</code></pre><ul><li><font color="#ef6d3b"><strong>返回类型推断</strong></font></li></ul><p>从<code>C++14</code>开始，允许使用 <code>auto</code> 声明函数的返回值，即让编译器自己决定。</p><pre><code class="language-c">template&lt;typename T1, typename T2&gt;auto max (T1 a, T2 b){    return b &lt; a ? a : b;}</code></pre><p>在<code>C++11</code>中，<code>auto</code>必须配合 <code>trailing return type</code> 使用，否则编译报错如下：</p><div class="admonition error"><p class="admonition-title">error: 'xxx' function uses 'auto' type specifier without trailing return type</p></div><pre><code class="language-c">template&lt;typename T1, typename T2&gt;auto max (T1 a, T2 b) -&gt; decltype(b&lt;a?a:b);</code></pre><ul><li><font color="#ef6d3b"><strong>类型萃取</strong></font></li></ul><pre><code class="language-c">#include &lt;type_traits&gt;template&lt;typename T1, typename T2&gt;std::common_type_t&lt;T1,T2&gt; max (T1 a, T2 b)</code></pre><div class="admonition note"><p class="admonition-title">Trick: C++如何获取变量x的类型?</p><ul><li><code>#include &lt;typeinfo&gt;</code></li><li><code>typeid(x).name()</code></li></ul></div><h2 id="Class-Templates">Class Templates</h2><h3 id="模板特化">模板特化</h3><ul><li>这篇中文资料说得通俗易懂：<a href="https://sg-first.gitbooks.io/cpp-template-tutorial/content/jie_te_hua_yu_pian_te_hua.html"><em><strong>深入理解特化与偏特化</strong></em></a></li><li>源码 推荐阅读： <a href="#%E2%AD%90type-traits"><em><strong>type_traits</strong></em></a></li></ul><p>模板特化的作用是，<strong>针对模板的参数类型，从而定义不同的实现</strong>。<br><font color="#ef6d3b"><strong>只要你教得好，它可以 “见人说人话，见鬼说鬼话”</strong></font><br>（有点类似 函数重载 和 虚函数继承 的思想）</p><p>模板特化实现思路是：</p><ul><li>先定义基本模板（能说话）</li><li>再针对每种参数实现特例（能见人下菜碟）</li></ul><p>下面仿照 <code>Python</code> 实现 <code>C++</code> 的 <code>type</code> 函数:</p><pre><code class="language-c">#include &lt;iostream&gt;#include &lt;string&gt;using namespace std;template&lt;typename T&gt;class TypeId{public:    static constexpr char const* type = "NULL";    TypeId(T t) {}};template&lt;&gt;class TypeId&lt;int&gt;{public:    static constexpr char const* type = "INT";    TypeId(int t) {}};template&lt;&gt;class TypeId&lt;std::string&gt;{public:    static constexpr char const* type = "STRING";    TypeId(std::string t) {}};int main(){    ::cout &lt;&lt; TypeId(1).type &lt;&lt; "\n";                   // INT    ::cout &lt;&lt; TypeId(std::string("abc")).type &lt;&lt; "\n";  // STRING    return 1;}</code></pre><h3 id="模板特化-规则">模板特化 规则</h3><p>模板特化 符合 函数重载 的两个条件之一：</p><ul><li>参数数量相同、类型不同</li><li>参数数量不同（<strong>特化只能少于等于</strong>）</li></ul><p>否则出现报错：</p><div class="admonition error"><p class="admonition-title">error: too many template arguments for class template xxx</p></div><p>示例如下：</p><pre><code class="language-c">template &lt;typename T, typename U&gt; struct X            ;    // 0 // 原型有两个类型参数// 所以下面的这些偏特化的实参列表// 也需要两个类型参数对应template &lt;typename T&gt;             struct X&lt;T,  T  &gt; {};    // 1template &lt;typename T&gt;             struct X&lt;T*, T  &gt; {};    // 2template &lt;typename T&gt;             struct X&lt;T,  T* &gt; {};    // 3template &lt;typename U&gt;             struct X&lt;U,  int&gt; {};    // 4template &lt;typename U&gt;             struct X&lt;U*, int&gt; {};    // 5template &lt;typename U, typename T&gt; struct X&lt;U*, T* &gt; {};    // 6template &lt;typename U, typename T&gt; struct X&lt;U,  T* &gt; {};    // 7template &lt;typename U, typename T&gt; struct X&lt;U,  T, T &gt; {};  // Error</code></pre><h3 id="模板特化-代码示例">模板特化 代码示例</h3><ul><li><a href="/code/refl-sum.cpp"><em><strong>refl-sum.cpp</strong></em></a></li><li><a href="/code/refl-factorial.cpp"><em><strong>refl-factorial.cpp</strong></em></a></li></ul><h2 id="std">std</h2><h3 id="⭐std-max"><a href="https://gcc.gnu.org/onlinedocs/gcc-4.9.2/libstdc++/api/a01226_source.html">⭐std::max</a></h3><ul><li><code>_GLIBCXX14_CONSTEXPR</code> 在 <code>C++14</code> 会被替换为 <code>constexpr</code></li><li>实际可以展开为：<code>constexpr inline const _Tp&amp; max(const _Tp&amp; __a, const _Tp&amp; __b)</code><ul><li><code>constexpr</code>无实质作用，重点是参数使用 <code>const &amp;</code></li></ul></li></ul><pre><code class="language-c">  template&lt;typename _Tp&gt;    _GLIBCXX14_CONSTEXPR    inline const _Tp&amp;    max(const _Tp&amp; __a, const _Tp&amp; __b)    {      // concept requirements      __glibcxx_function_requires(_LessThanComparableConcept&lt;_Tp&gt;)      //return  __a &lt; __b ? __b : __a;      if (__a &lt; __b)return __b;      return __a;    }</code></pre><!-- ### [⭐std::stack](https://gcc.gnu.org/onlinedocs/gcc-4.8.3/libstdc++/api/a01566_source.html) --><h3 id="⭐std-pair"><a href="https://gcc.gnu.org/onlinedocs/gcc-4.9.2/libstdc++/api/a01240_source.html">⭐std::pair</a></h3><ul><li><a href="https://en.cppreference.com/w/cpp/utility/pair/pair"><em><strong>[cppreference] std::pair</strong></em></a></li><li><a href="https://stackoverflow.com/a/9270585/16823597"><em><strong>[stackoverflow] What is the purpose of std::make_pair vs the constructor of std::pair?</strong></em></a><ul><li>c++14及之前，<code>std::pair</code>需要显式指定类型，<code>std::make_pair</code>不需要</li></ul></li></ul><pre><code class="language-c"> template&lt;typename _T1, typename _T2&gt;    struct pair    : private __pair_base&lt;_T1, _T2&gt;    {      typedef _T1 first_type;    ///&lt; The type of the `first` member      typedef _T2 second_type;   ///&lt; The type of the `second` member      _T1 first;                 ///&lt; The first member      _T2 second;                ///&lt; The second member      _GLIBCXX_CONSTEXPR pair()      : first(), second() { }      // ...    }</code></pre><h3 id="⭐type-traits"><a href="https://gcc.gnu.org/onlinedocs/gcc-4.7.4/libstdc++/api/a01417_source.html">⭐type_traits</a></h3><ul><li>以 <code>is_integral</code> 为例，判断是否为整型</li></ul><pre><code class="language-c">  template&lt;typename _Tp&gt;    struct is_integral    : public __is_integral_helper&lt;__remove_cv_t&lt;_Tp&gt;&gt;::type    { };</code></pre><ul><li><code>__is_integral_helper</code> 是一个标准的模板特化，<strong>非常简单</strong>！</li></ul><pre><code class="language-c">template&lt;typename&gt;    struct __is_integral_helper    : public false_type { };  template&lt;&gt;    struct __is_integral_helper&lt;int&gt;    : public true_type { };  template&lt;&gt;    struct __is_integral_helper&lt;char&gt;    : public true_type { };  // ...</code></pre><ul><li><code>true_type</code> 相关定义如下，其<code>value</code>变量就是一个bool类型的 <code>true</code></li></ul><pre><code class="language-c">  /// integral_constant  template&lt;typename _Tp, _Tp __v&gt;    struct integral_constant    {      static constexpr _Tp                  value = __v;      typedef _Tp                           value_type;      typedef integral_constant&lt;_Tp, __v&gt;   type;      constexpr operator value_type() const noexcept { return value; }      // ...    };  template&lt;typename _Tp, _Tp __v&gt;    constexpr _Tp integral_constant&lt;_Tp, __v&gt;::value;  /// The type used as a compile-time boolean with true value.  typedef integral_constant&lt;bool, true&gt;     true_type;  /// The type used as a compile-time boolean with false value.  typedef integral_constant&lt;bool, false&gt;    false_type;</code></pre><h2 id="反射">反射</h2><p>先看看什么是 <a href="https://en.wikipedia.org/wiki/Reflective_programming"><em><strong>reflection</strong></em></a>:</p><blockquote><p><em>reflection is the ability of a process to examine, introspect, and modify its own structure and behavior.</em></p></blockquote><ul><li>通俗解释，反射就是从一个对象(<code>object</code>)，能够反推其类型、成员和方法</li><li>以<code>Python</code>为例，<code>getattr</code> 就是经典的反射功能</li></ul><div class="admonition warning"><p class="admonition-title">为什么cpp没有反射?</p><ul><li>反射会导致编译后文件过大</li><li>cpp很少用到元编程（相对于C#)</li><li>cpp有模板，足够应付大部分需求...</li></ul></div><h2 id="阅读材料">阅读材料</h2><ul><li><p><a href="http://110.42.228.178/pdf/CPP_Templates_2nd.pdf">CPP-Templates-2nd 英文</a></p><ul><li><a href="https://github.com/wuye9036/CppTemplateTutorial">CPP-Templates-2nd 中文版翻译</a></li><li><a href="https://github.com/r00tk1ts/cpp-templates-2nd">cpp-templates-2nd 中文版翻译</a></li></ul></li><li><p><a href="https://github.com/wuye9036/CppTemplateTutorial">C++ Template 进阶指南</a></p></li><li><p><a href="https://veselink1.github.io/blog/cpp/metaprogramming/2019/07/13/refl-cpp-deep-dive.html">refl-cpp</a></p></li><li><p><a href="https://bartoszmilewski.com/2009/10/21/what-does-haskell-have-to-do-with-c/">What Does Haskell Have to Do with C++?</a></p></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;C++模板、meta-programming&lt;/p&gt;</summary>
    
    
    
    <category term="C++" scheme="http://luhao.wiki/categories/C/"/>
    
    <category term="C++" scheme="http://luhao.wiki/categories/C/C/"/>
    
    
    <category term="C++" scheme="http://luhao.wiki/tags/C/"/>
    
    <category term="Python" scheme="http://luhao.wiki/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>日志：2023年8月</title>
    <link href="http://luhao.wiki/posts/2023/8/"/>
    <id>http://luhao.wiki/posts/2023/8/</id>
    <published>2023-07-31T16:35:13.000Z</published>
    <updated>2023-09-25T08:56:53.438Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="088c707709b995861e4e58c94a61b527368d8a83cfc58edb93edc304acbc9c56">b3dc07a81f6459d120ce338ccca550463faa708b9b4d89df9ab14ba4edd809f60b32d15b5672ce84c5d84744f7f475de0b1305a637ea913974dff7410a14ed4dbbb40a5278eb14bbac34e59e12a284c7a294ab69a495d47e11e78ad50feb1070429e58f3fbd737c20fb16c7243eddbb619e52c31eb507d6765e3b14dcaa7e9d13492120aa6f2d9638cdc372f2d3c81cf4232ed0874302eb77e0fba53c7b0ac1b5e05196961ebceabaee4415690ead6a710c137c2757694abdfd08eb8c2634a5d753274da2b1c7bef744740058d16d7091d22fa8304764b0d2f6294ca8c6a207e9631f260ac16e68b32cf9dfed4653d1dfd7ec34e029768744ff31cf46be9716e7586f7db03f6fdbb5424f4ac8476c5cf96e9dd587787781164d9d02b9abc39b1840ec2cd478ca480554f4049c941e50195a77f0b24330ba24922044d92ee1b7b07c0420d90b435163e9b6ff6a187c600a683de6c80ee99f40ad6f04c57b1038b59b7c5fa28d202cbb5b68ac169c96e956c701fa2733dd351daaf2c77420ef2c9d81b4f6567415a90f9806bbd90215c38f75a31cdc983a0ee93c2590e66b10f2f88cf627e9e7230e093277675ba2ffa1f8a9d71e9763c19c4389b0f2a0f8903c564dc10ab53981fc487ccee24df6454c9466089470df32dfe841773b273a2e9212119f7c977a60035ea301d47eb5078523d993c6370d7cfc69c6bec52ff9cd8c59c346f4af5adb805c21e170d244cd7ff29f9d3f70acaf5041b2b2aa0e2a48c06b1e7fe726ad391187a60e8153790242e965db2f618c5cb9f90bac81e9171a4082f761d56fd77065727d7a01568bdf1a92fd6b69a47d66ae586c041362e158cf6918e643df04270fbf2d7b6c83b81a3cabfdeb4cec43465d5d0d18f24d8eccd0eecbba24f24f0ca3cfdf63d71f027c56dd478870b5bb67d334dbe2b1d1e1bcd505a731da11641c35e59e867a6c505cbd4078a924a22c3f47ec3268a07f420acf3c6ed043d684e69bd88468885b77dd7385241e94561c5a2132be9a941fe048e6fb604daf1ffb603538ba15f37ac2a09be55fe1b1e40ceceeeea21877916031087ca10ff470729aabadb15870ac7a684dda40c886f3270bea5db51aab42a40b4c64579bc15a5f4489b5c5c1c5b433251d46b7188000fd63a7691272641c1bf76e00f4a8558e58d69bb2b2c0130608f044657dd53f25cce7b98e4630c9d52c24136a428286ecb66a66313c2881f168df75a2cb8453c0bcac9e32cb1434d6809996eae2b590ebbdaac6c9009739126e9f8e92976ce7d71b9bcbe7e7de2fe5ade15b4d1e8dc3e147d0be96aaad8c939e1e122aeb55ba72ba38d37329e489f7c6edae50f15673c33606c8b801c6b4ad8d2f770c80cafc9a3dc5912a35995572ad088d582045bcd1b1d6b7839cb8a03bf6de7aea3d25c808f25e92bcac20dd3a8d76aeaaee615e7f58c68cec17e2df0d43f0ff1b11f23e5e684e3e8ad0679ebb58877fa208ca34f7014e80b0c60429634ff4d88cc0aadae737dd83f077ec2e164fa493b7e95e55e979d8a315b57c50699903b463027e33cf890ceb17eb29ab76882555cf0acdce817698929fdc6ae42c726c15cd09f9876c2e4c2824c265912a1ce677d096667d049cdcd82d88a78bf874effcdc566f641455cd98637d4b7880b733545ba61714b012fc1e09c3988cdb32023c4e6679d4772f3aefe2be7b775447b05182da8750b8eb0ab9c7e2057e9165432399749ac975f2f5f4ed9a4d0dfb53a9fca27c539f3cde6dd71523ca62fd8503a0b26edb8ca15af6be9aa9350df5e93595bde5fe38fa8f77daf14cec1eb557af4dbf77a5503fa04f201a89d536e268281174dda349431b7b582df05a892d5baf6104a9c2dc4f0127bee4bb2d694cc63c7e401c3a8f9de45d2ec27306206a40444f066be06109511c0049c38c1aa3b302645ab2786db16e50d6392729ab724f74631f65b029ee199ecb8aa9adba4985c3323b83133db3508595c9a146c051f9669c9a6d793d656024b6e68fac42f21b9ec4cb0f6e456680fdadd514588c7dc2fcb1192d10b7a4ed512f92eb4f510849f16fd9bec830f1a9cbe52a5a344143e44e0bc9608ce50b3a3c96ca8ff6f033fe415254e1bc2a50c2d4e56b784876cbf8004c45f63a45356c08199fbc1f433cecbadc18e21d5fee429e8b1292e19f125e57d4aed4f05a0b2194a6e17d423c01774476f04219848cbbb9699ab58bf26ddaa99130657470c6599aab71db4077a077b2784db5bbf7a108f85c27cf2e90dc801ef7f4ecc3ca15e28099c73bb4d8ca8604537b05f16d23c66bc7c2e152fbc478293af95ebacf9c8796a586d70ef75ad618fa2d3bbc5fbe81a22d8ee36105b70adb9f636c3cd69228e9b53a463e890f103ddc72f0603a6815e32ffed8a79e7467a91c3ea6da318d7d6a2c1bc4e440b3987bec38c4fe6724ef9ec7ff7367ad45351339ce7e2fc68db732404b75e057dbb658e05f68678fc99eac0479ed9aefd6521b65b88cf162dc1ad81e2fcc26d259805213d06d68e632d484e95cd8bb09b8954262b5063afe43274e2033352daa9313db01c405cc29528aa7a6467b926951bc8252d36a967916a8f7b385dbbcf51af18bb0f8bf5d2d99cb334f9ec55f15b7c5e4a6a49207fbdf3ff0f032feeff053f0caf51525b5d934f0281b317a2591f7863541829e6d3e4dfd10f495d34e76a37a4cb1994dc5956695f2af5b29a34c58cd54d6c1b6b4a25d80244d0bba77e336c80bcfd98c258c670d3b0c5cc7cf34acfb2ba60c885f80373bc9ba82e83e3c18432bdab9d5ddcae387b5e0c552cda7fffdf87128451ca3c5a874d268fe2305bbbcf5910a4b978866328649f891014df094ad555bd32f76972994bbcc2302e8fc6cc5123317a028cfa93a9d2aa4d2e006b7a8e9895a90e49ea4a65b67af51c19e8e993a954e96235e9f150917fae2fd1705f21782d256946066b4e4f531af3c5cef513d4ed399f7c252c3fb5097e828a0058ad4e1089dfc8df4f5d0293d9382284328ba9c7adbcdcd09383dca737191ddf9b2969e6b02af4212cf4361894ebc708f00b16e7c64ff10e4432b65fe2c7b05e4889c5808949737998e7f6335bf48a4354828d177ea3dffd66c4df7c03a187862eab302fca251e5a5be70cce19df939b5efbdb527f6004dc35c8fa4bb309e4d1047dc84157379579bc9c7bf6b1805b97d117a654c1d579765989e0f4b12be0958da5b3c7c9bf86a15679a4fecd60f11f83ad11b9091f80343d3397747d9680c70f8e3a5db6f49dc2c7f0e3e0a91abaaee24635d20d1d72a74afadea6040b9288356a89e19f86781940d1a552ac5b327a1fc06959c7a3433042a2e98ce411575f087822beb5e58303077bc84f16d07bb4c36f7bad34b2b575af27e0ba4228abdabb3380d6c2666514d82f82814eaad75e3a39b999d563dadc7074005acdd320836230eaa8ff4f153d5fb1e6e3bf23891d8409a3aab2b9ca7282fe15c11b6f9d7819574ae7e05b42b29f5ab944dc5c26af551487c7b4dd302a40741f28a14f50391abb1684ba1c8d79ed5211ea977d5f7038e733432f469761af877cdbe2ae70f6654976e9fd65c1b841b0a7a75f4f3a6dbbdca6e0e7712589a8d683b86e9dc4624813421f786966137286b13ff885b73c912ff105e233a888faa682c5f2190772d64fc9f820da019d49fc757bd442fc9ab962a212e1cf55f700765fd22517eaf05202fb28e61ad0c354abb781ce08359a497ae7efbb34dd52ad49db933da2f5138b95fe37a89753584c755070361a9d1721eb707164d8d85cdbfd53011fb8ba98971f45e6eb6cb849a955902875d84a7bc9fb98477a81b1d2f077d2846381889e1ae1171cd9a86d92b0b8666ed73de0a282013ef9a009dd51b3b6002b05210c4ce883d2e13d27f61c577cc6af7d69ef8ede74aaa73554d9ef9591b1c00fb1863ae9809614950608dee1b35b60724ad4fd4ae5c1b91f0d9fbe7482e4edd2cb6182bc0af102a823b9b45e62376af8dbb0aa24ffd3e8137e3f9390ead53f34dc2204a239e1e7307cb8ae198c70ff0f3e62488627ed20b48da9cdd6aa7e3698774c8002e82f6dedd77abc97301269443fbfe203103ff3807139e6472ed40a4d67ec624e141e50e1234ba20e93df4fa080cc6d5f4a62ebabd5b63d51f198c9b8305c196ff559ca00b1750a747ca1a187c2b3f1f0548f99b3006a70b70ab4458f3de77fa25050ae50e9c31a3345876e12a48d5184846e6a711cfeeff25f984e5929465a19f8811addf40d930b75c6ab0a58a27d3ff51e949c2875b6621f6f4a986b5110114321dc1c62390aa67bd88f77a41d5b5b49322a95351d36782034a6d45b6db85ebafa79cf5b3f3002f2a714e11576d03b026f2c256c12ed04f2163daf93d2c500c7d3053827c1eadc2450f4a02703ef5bc1ebb2021a84029a68b25a2936d76341ab9e710263f2bc3688cefb26405a6fef0fb5d4ff2fa28aafbfe3016880820bcfd32b4b1fe203124d4027a483492bba57e5121f2a9b3e31e7caec33cf72b586944dda700dc922f626593558cb60ebfcaf656883a3786aaff323b53cd38d02dd785670eb9ea232692ae40965f1ed43fd933d0fa4f95cbdbf9bb03809efcc82eefe4020e15d6bf2b9828012589fd5074d139aeb55b80438ea9f500f06b899be9b2cc0c575dcfcaa6da869c182e2fd70eb3a7a75b5361ff28150b215d50851b8c3a0050331587f0959a2310b71e957ef18fad48dc7e16efdd8cc14ac82c89012eac8bc0738413646a19b38a5ee89c54a934f28be319d9aef11a7003d34a8d3b16a3e9981e1e640e04809a94d566ae69ab90e58ca1647844939159901d632c0744355c4fe0759d6f3b66b7430db18cb85f659cb2c3357cc99af3ea7a92540b2e6d6202e5eb3f7f0d3b686de0f52ae301ab564c490c744190cee9daaecb8ab644fc24fc6699f3c099b006f6281229c303afe87c87d297f77b14ea36875bdea69b667ff9e9271596408077c120dd67d2b14c77f1f98c4577981fc649984b6546e07931ab91755759537debd2dc68560228fac2fcc2738522e975060279ca6a0c9d3df1af329d432ea7f0da40b3e3c9587c54e1fe1318c6f118611f372a7ca1b8e8b6b19847e189de01880cf9be6dd73106aa6c6f1e548b2a4bcdca64c33073302ba8a9142032406c65d52e4a18ad95044c4d4bf78494e4964b79a7d35deb929af3c3e9d05dfc713ab5018d75a564846ad762b58e1f64e4bbaf0508b3301a2bc7111a3c3df41f1657bcc66354ad3c152d5aab95c5ccfca48fe101f199bd13bcd76e1e64b6019edb0156d481632228320c98bce931dbbd413db446b783d853edc9013bd3db83f1327ad3d3d0c3ba5f91915bf9e8bd6c56bb34fcda55f88f0448cfb1c3148a1b44a7c0b131237db2c01847746e6abced888260001b2291ade4763a4a54f64f0bd722a4d218287be3ab6e579d4785459b289b3faceb7feebf7466101f1dbb9a11f5558cb2782a709029f69886a06e621215fda6addadf141548d7307141b6a9ab599c41b8c0435dfd4628551db893f19af55d67057f4d01e230c3dcdcb45858fc84978cbfc864005b8756a53f7412b6f8fb3fa55b821c2798d2ff4f8e2be30f3bdb5cb0113f230db06059ec2500a601b33608107b7cb3e2b8fcafcd29e768d28d97f4deee56a8f3688b1541cc5963efcd4a4cdd04368a41676bff2f02a10821025119b95fbcb4c998d5f58754171aac564c41f95f304f12401e629853ffdb63f5e8911acf87978144439b2c25616242a622a3ab0ea84343f63e7c59bfed97b2e7682dba574a411641410e38a60e5be49f6197e6e664d5310a0e93a92d97d48e3c596ef3577e50ecc6f11434e02222b613209878a9b07cd3552df6d1e9234dad172da1f9378ac6a98a71fc0099a48d9572225e193c84de989f5ea68110f3a77eea1</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;hbe hbe-container&quot; id=&quot;hexo-blog-encrypt&quot; data-wpm=&quot;Oh, this is an invalid password. Check and try again, please.&quot; data-whm=&quot;OOP</summary>
      
    
    
    
    <category term="个人日志" scheme="http://luhao.wiki/categories/%E4%B8%AA%E4%BA%BA%E6%97%A5%E5%BF%97/"/>
    
    <category term="个人日志" scheme="http://luhao.wiki/categories/%E4%B8%AA%E4%BA%BA%E6%97%A5%E5%BF%97/%E4%B8%AA%E4%BA%BA%E6%97%A5%E5%BF%97/"/>
    
    
    <category term="C++" scheme="http://luhao.wiki/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>【vscode】vim定制化插件</title>
    <link href="http://luhao.wiki/posts/vscode-vim/"/>
    <id>http://luhao.wiki/posts/vscode-vim/</id>
    <published>2023-07-23T12:04:39.000Z</published>
    <updated>2023-07-29T18:41:03.599Z</updated>
    
    <content type="html"><![CDATA[<div class="admonition note"><p class="admonition-title">导读</p><ul><li><a href="https://github.com/VSCodeVim/Vim">VSCodeVim</a> 是仿照vim的vscode插件</li><li>本文在其基础上添加一些额外的个性化功能</li></ul></div><h3 id="VSCodeVim">VSCodeVim</h3><p>vscode vim主流插件有两款，分别是:</p><ul><li><a href="https://github.com/VSCodeVim/Vim">VSCodeVim</a>：仿vim的插件，功能不全</li><li><a href="https://github.com/vscode-neovim/vscode-neovim">VSCode Neovim</a>：基于Neovim，功能较全，但依赖nvim环境且配置复杂</li></ul><p>笔者一直使用前者，因此本文全部围绕 VSCodeVim展开。</p><h3 id="缺陷-😞">缺陷 😞</h3><p>VSCodeVim Github 拥有 1.5k 未处理的 Issues，作者的维护迭代速度非常慢，因此有很多缺陷和功能不足之处：</p><ul><li>不支持 vimscript function</li><li>不支持 vim bash</li><li><font color="#FF1E10"><strong>【bug】</strong></font>经常Esc失效，弹窗报错 <code>vim.Escape is undefined</code>… 需要重装插件</li></ul><h3 id="亮点-🎉">亮点 🎉</h3><p>打开 <code>"vim.statusBarColorControl": true</code>，可以使底部 <code>statusBar</code> 跟随 vim模式 而改变颜色。<br>本文希望进而改变 Cursor 和 当前行 的颜色、高亮显示，并支持 config 配置，效果图如下：</p><p><img src="/images/vim-mode-demo.png" alt=""></p><h3 id="改进-💡">改进 💡</h3><ul><li><p><strong>支持配置 StatusBar, Highlight 等颜色配置</strong></p></li><li><p><strong>支持区分 Normal, Insert, Visual 三种模式的颜色</strong></p></li><li><p>下载链接:<br><a href="https://github.com/593413198/Vim/releases/tag/vim-mode-1.0">https://github.com/593413198/Vim/releases/tag/vim-mode-1.0</a></p></li><li><p>配置文件:</p></li></ul><pre><code>    "vim.statusBarColorControl": true,    "vim.alpha": "80",    "vim.statusBarColors.visual": "#005f5f",    "vim.statusBarColors.insert": "#5f0000",</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;admonition note&quot;&gt;&lt;p class=&quot;admonition-title&quot;&gt;导读
&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/VSCodeVim/Vim&quot;&gt;VSCodeVim&lt;/a&gt; 是仿照vim的vsc</summary>
      
    
    
    
    <category term="VSCode" scheme="http://luhao.wiki/categories/VSCode/"/>
    
    <category term="VSCode" scheme="http://luhao.wiki/categories/VSCode/VSCode/"/>
    
    
    <category term="vim" scheme="http://luhao.wiki/tags/vim/"/>
    
  </entry>
  
  <entry>
    <title>随手记</title>
    <link href="http://luhao.wiki/posts/idea/"/>
    <id>http://luhao.wiki/posts/idea/</id>
    <published>2023-07-21T19:15:33.000Z</published>
    <updated>2023-10-04T19:11:49.068Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="0c5c25ccc3b1d155ad6ea1bcb79024d41de2d107cc1107c8a51186a23ed763b4">b3dc07a81f6459d120ce338ccca550463faa708b9b4d89df9ab14ba4edd809f60b32d15b5672ce84c5d84744f7f475debb79baf718116b8398ebb7a36965f5712db04a990a04196bf7d89b9188d2f5969b089300c199c887ad4490953d1810357cd375ac06e732d356d4ec27b642aa2d46c8fdf198d48a4b9620936f8c18efa99cd53c0e6c5befbd6da9ebb0e8d473ba88daf9814bf097589053470cd244c49759b29258898ae147d3b92406541ecc1426781b7f965d69488f8227468d25ace43c6b69c8a19f97354453e8ff96435fa7c142eabaa7418866597b071d73575a4fa98f09916a3b6256959c82764411afd8c8baf90fb4965fdfacbf4695b2488acf5d7f161a49b796a0b1b992232c56c8393b9705588b441acf55138be81fe973cf0e644444f60301071e149e7788696fb98684774596c09a87b8d44ff780e78e5a657a2a5580c8749587dc7d65ae05a8cb2594174783fd8fa497d8cc4a84947227afe8329650281ddb4595068235ed79e470b4868c26c2713685a5a93c0f1280e53b3df1720e4da8e8a09f8a6c99c3921a4b6850c328a6dc36e2202e0b4f1be867149ef931cb38587d704e6c911e58a15f05eab1e8cc352fd6424983c5800bf4f3d49dded1f663f23d4913e49064ba3cf91499fb213e96ac0af65deafd2c9fabc6e4e36b2dc5f38aaa95de286bcc604f0fe11b2f0bb8fcf181906004cd02cea773816c2f37a108e5bdf894e0d8012a39ba8b2ae6b924b924f6cf7384324e220677c36cbc43355060db7d4353fc4d2cf1e0f870385842ec30394027ac67562af4526e5a862983fcc5343ff658dd75ac60bf343a35df981950c50299447033daf22310f580432dd96559a8a198effa21454f024111215c9584bb1f2ce51ad7b39851bdc55c9adcbd4fa77d824d22167066cb7ad4f4ccd8fc8eac382e7f4eaa6436bf7cb8ee2b9c86bc7e2a6d318576055b79b6cfbc159ef03b44d59c10724d75f9869f93579be0f41be9412bae43c70d983b55a89660e48ba54240a3d1445b2aebca2752304a24161fedc49f17d991078ecc7b6d4864ecf742e1cd4e8d157ba47adf98e1ec449086362f097efcfe17ce562bdf7c5cc56733334d6f4b5b625b796230f58c7a9f1cda72376df7f986703ece3432b4a61b545e92dc888cf2a624961fb5a79ea69d4a73ae47a526bf867c6590695f393674b676152e38088676fdcd056be934930c4ef734512e90ae881e80e1d1ef962835704827aa85aeb62251707e90f0d8fcadeedc0c29abf6920ff959de86f14803b11c996289ea189d3f68cb9fa3be352f64b3e55649579438eb783d2f70f77997807e47094fd69a417bfc9431d19c843f74a8242599afd07f83fed5d8706cd44e33526ee1d1322853287d417c59aa62f14f89c0eb720d295d69054be38348ed1fc24e73345de69509daf98255a0c0d4ea3e967999cf53cf038c92ecb79e1e4a9f06fa8f600343839101e1c5dc1620e832ef1e0898898ae22727614645bd30fa7b987ab43cff16ff4d0a9053c0c4d7cd87c7191ad4c4dc3ca5a31a238292eabdea0e394959c378acc8aba059748f6ddada7efe8708b357e6b9b697556abf8b31523350af8a5487af0f457f2ce07e0cb25ee98bb758c359caf69a403993dafd0ab3760742759e114b3cf185e16559dca6fa67b5227d19e231078bc9b8d6f5af1de393abf5af8a3e9dfd4bff946608c0a3cc24e1360fc36e4af099c23b74bf0cf814384d79793dcbf658738314beb3421de4872867d68d45ffb6ea2a480d348d61d8180e2e6dd9f5b1302c6d71259d6d289a996dfd821329c365f66fa6fc412053481b4e0fce112e1512560f78b01a86332f0a8ca3ed32f89446a0dc2e0e315748bfad11ef53a7929da0f8cc7aefcd3ce9b25cbdf6042c795f8cfd9e8139436982f49dcbf76e8129707e743177f629b14e3c17ae6d2773315b267889735b70bbf1b6210ea3cf34f16cbe51e5c416adf52542e3c6b8ee1c37cf50bae1c6c831ec5d7b468cc8d3dbde615b3dacf79b70f7b3f12cb81c5f03caec57b1753a167389025c621c8ba684efa28af26fdde0cf2c845012fea0d28599054de052c2aa083f3a53b6b879863d6ebd770a7fd0ce776d181608f7a6154bd83d21171ba14b5ce589a1c0175c72f7faad0ce3a2f25b1c0f7b6f40d7031639d42e6a7dad316b3348b19d21575a21651291f76c34b1100b966602689e8eff43ed852221005af04e6a7219fdbf8215508f53b8810069be883565b9f160b119a9288d9bb1d6917aa588367f9f2c6903c2edb41e9d2076a14c7348aa9aa22e4d6ed89848a51256cff9f3b79e74949626d3b3a7241c3b7cfbdcd986c0bf04bb91488bab3efbfff476a1</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;hbe hbe-container&quot; id=&quot;hexo-blog-encrypt&quot; data-wpm=&quot;Oh, this is an invalid password. Check and try again, please.&quot; data-whm=&quot;OOP</summary>
      
    
    
    
    <category term="随笔" scheme="http://luhao.wiki/categories/%E9%9A%8F%E7%AC%94/"/>
    
    <category term="随笔" scheme="http://luhao.wiki/categories/%E9%9A%8F%E7%AC%94/%E9%9A%8F%E7%AC%94/"/>
    
    
  </entry>
  
  <entry>
    <title>【表达技巧】跟罗永浩学演讲</title>
    <link href="http://luhao.wiki/posts/talk/"/>
    <id>http://luhao.wiki/posts/talk/</id>
    <published>2023-07-09T16:52:35.000Z</published>
    <updated>2023-08-31T02:26:35.047Z</updated>
    
    <content type="html"><![CDATA[<p><code>罗永浩15堂演讲私教课</code>学习总结<span id="more"></span></p><div class="admonition note"><p class="admonition-title">导读</p><ul><li>B站视频：<a href="https://www.bilibili.com/video/BV1PP411T7fv">【演讲】罗永浩15堂演讲私教课</a></li><li>知乎：<a href="https://zhuanlan.zhihu.com/p/619973080">【学习笔记】罗永浩演讲私教课</a></li></ul></div><h2 id="前言">前言</h2><p>开这篇是因为近期，有一个在公司内部分享的计划。<br>因为不是技术类型的讲座，技巧因素占比就会很低（而技术分享更注重将东西解释清楚）。所以萌生学习这类演讲 + 表达技巧的念头。<br>认识罗永浩，最初是 6个亿 的负债梗，更深入的是在 脱口秀大会 作为嘉宾时期的发言，对其有几个认识：</p><ul><li><p><strong>听感</strong>：表达清晰连贯，但嗓音条件恶劣（据本人调侃是老太监音色）</p></li><li><p><strong>逻辑</strong>：知识涉猎广泛，且临场反应迅速（后者是幽默感 + 经验累积）</p></li><li><p><strong>内核</strong>：善于制造一句<strong>核心话题</strong>，并反复洗脑callback（如脱口秀的“大局观”，如演讲课的“因为大脑就是被这样设计的”…）</p></li></ul><h3 id="关于这个教程">关于这个教程</h3><p>基于罗老师 <strong>“演讲都是有套路和技巧”</strong> 的观点，将其演讲课的套路总结如下三点：</p><ul><li><p><strong>为什么要这样?（赢得认同）</strong></p></li><li><p><strong>如何达到这样?（方法论）</strong></p></li><li><p><strong>举例、类比论证（深入人心）</strong></p></li></ul><h2 id="十三个要素">十三个要素</h2><p>这些技巧比较多，难以短时间记忆和掌握，因此先记录一下核心观念，剩下的在实践中掌握和理解。</p><div class="markmap-container" style="height:350px">  <svg data="{&quot;t&quot;:&quot;root&quot;,&quot;d&quot;:0,&quot;v&quot;:&quot;&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[0,1]},&quot;v&quot;:&quot;让观众听下去&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[1,2]},&quot;v&quot;:&quot;<strong>讲笑话</strong>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[2,3]},&quot;v&quot;:&quot;吹牛逼&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[3,4]},&quot;v&quot;:&quot;装逼&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[4,5]},&quot;v&quot;:&quot;让观众容易理解&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[5,6]},&quot;v&quot;:&quot;讲故事&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[6,7]},&quot;v&quot;:&quot;<strong>作类比</strong>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[7,8]},&quot;v&quot;:&quot;<strong>三段式</strong>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[8,9]},&quot;v&quot;:&quot;提问题&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[9,10]},&quot;v&quot;:&quot;具有说服力&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[10,11]},&quot;v&quot;:&quot;有逻辑&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[11,12]},&quot;v&quot;:&quot;有数据&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[12,13]},&quot;v&quot;:&quot;让观众产生共鸣&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[13,14]},&quot;v&quot;:&quot;有激情&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[14,15]},&quot;v&quot;:&quot;有情感&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[15,16]},&quot;v&quot;:&quot;<strong>升华境界</strong>&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[16,17]},&quot;v&quot;:&quot;核心&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[17,18]},&quot;v&quot;:&quot;<strong>有画面</strong>&quot;}]}],&quot;p&quot;:{}}"></svg></div><h3 id="精华摘要">精华摘要</h3><ul><li><p>开始一场演讲的最好方式，就是<font color="#ef6d3b"><strong>讲笑话或讲故事</strong></font>。（千万不能讲道理）</p></li><li><p>对于晦涩或陌生的事物，要<font color="#ef6d3b"><strong>巧用类比</strong></font>，如 谈判就是找交集。</p></li><li><p>开始主体内容前，用<font color="#ef6d3b"><strong>三段式</strong></font>介绍提纲。（思维导图）</p></li><li><p>讲故事的三要素：冲突（吸引注意力） + 行动（故事的发展） + 结局（表达的内涵）</p></li></ul><h2 id="其他技巧">其他技巧</h2><h3 id="1-用坐标系描述事物">1. 用坐标系描述事物</h3><p>举例，如何看待 <strong>“量化交易”</strong>?</p><p>首先，一个交易策略的评判标准有两个维度，分别是：</p><ul><li>Interpret：（金融底层的）解释能力</li><li>Predict：（金融市场的）预测能力</li></ul><p>因此，引入一个二维坐标系，甚至可以类比不同事物在其分布，例如：</p><ul><li>进化论：能解释为什么猿猴进化到人类，但无法预测人类未来进化的趋势</li><li>地心说：能预测太阳东升西落，但底层科学原理是错的</li></ul><p><img src="/images/interpret-predict.png" alt=""></p><p>最后，根据 量化交易 预测能力强，但无法自圆其说的特点，可以将它放在类似进化论的位置。</p><p><strong>该方法论可以让听众直观清晰地了解事物的多维度特征。</strong></p><hr><h3 id="2-结尾升华主题">2. 结尾升华主题</h3><ul><li><p>几天过后，观众未必会记得你讲了什么，但他们或许能从情感上认同你。</p></li><li><p>这很大程度上，来源于结尾的几句升华。</p></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;code&gt;罗永浩15堂演讲私教课&lt;/code&gt;学习总结&lt;/p&gt;</summary>
    
    
    
    <category term="随笔" scheme="http://luhao.wiki/categories/%E9%9A%8F%E7%AC%94/"/>
    
    <category term="随笔" scheme="http://luhao.wiki/categories/%E9%9A%8F%E7%AC%94/%E9%9A%8F%E7%AC%94/"/>
    
    
  </entry>
  
  <entry>
    <title>【cpp】Memory</title>
    <link href="http://luhao.wiki/posts/memory/"/>
    <id>http://luhao.wiki/posts/memory/</id>
    <published>2023-07-04T17:01:35.000Z</published>
    <updated>2023-07-22T13:03:25.859Z</updated>
    
    <content type="html"><![CDATA[<p>C++的内存分配与管理<span id="more"></span></p><div class="admonition note"><p class="admonition-title">导读</p><ul><li>理论偏：<a href="/posts/virtual-memory/">【CSAPP】Virtual Memory</a></li><li>本篇结合 C/C++ 了解内存分配相关领域知识</li><li>ptmalloc，tcmalloc，jemalloc ...</li></ul></div><div class="markmap-container" style="height:300px">  <svg data="{&quot;t&quot;:&quot;root&quot;,&quot;d&quot;:0,&quot;v&quot;:&quot;&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[0,1]},&quot;v&quot;:&quot;malloc / free&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[1,2]},&quot;v&quot;:&quot;new / delete&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[2,3]},&quot;v&quot;:&quot;system-call&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[3,4]},&quot;v&quot;:&quot;<a href=\&quot;#brk-sbrk\&quot;>brk / sbrk</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[4,5]},&quot;v&quot;:&quot;<a href=\&quot;#mmap\&quot;>mmap</a>&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[5,6]},&quot;v&quot;:&quot;c-malloc&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[6,7]},&quot;v&quot;:&quot;<a href=\&quot;#ptmalloc\&quot;>ptmalloc（glibc）</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[7,8]},&quot;v&quot;:&quot;tcmalloc（google）&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[8,9]},&quot;v&quot;:&quot;jemalloc（facebok）&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[9,10]},&quot;v&quot;:&quot;mimalloc（microsoft）&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[10,11]},&quot;v&quot;:&quot;c++&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[11,12]},&quot;v&quot;:&quot;std::allocator&quot;}]}],&quot;p&quot;:{}}"></svg></div><h2 id="malloc-free">malloc/free</h2><ul><li>阅读文档：<a href="https://en.cppreference.com/w/c/memory">cppreference: Dynamic memory management</a></li><li>使用的时候多查阅文档，注意 <code>malloc</code> 使用时要判断 <code>NULL</code> 避免内存分配失败</li></ul><pre><code class="language-c++">#include &lt;unistd.h&gt;void *malloc(size_t size);void *calloc( size_t num, size_t size );void *realloc( void *ptr, size_t new_size );</code></pre><ul><li>分配过程：↓</li><li>需要考虑字节对齐，注意被释放后的内存也可能重复利用，这也解释了为什么野指针的 <code>undefined behavior</code></li></ul><p><img src="/images/malloc-demo.png" alt=""></p><h2 id="new-delete">new/delete</h2><p><a href="/posts/virtual-memory/#u-class-black-mallco-free-u">malloc / free</a> 前面有介绍过。</p><p><strong>以 <code>A* a = new A</code>为例，通过 <a href="https://gcc.godbolt.org/">godbolt</a> 查看汇编代码，发现其有两段逻辑组成：</strong></p><ul><li>调用 <code>new operator</code></li><li>调用 <code>class's constructor</code></li></ul><pre><code class="language-asm">call    operator new(unsigned long)mov     rbx, raxmov     rdi, rbxcall    A::A() [complete object constructor]</code></pre><p><strong>相应的 <code>delete</code> 方法，也对应如下的两段逻辑：</strong></p><ul><li>调用 <code>class's destructor</code></li><li>调用 <code>delete operator</code></li></ul><p>下面重点展开对 <code>new / delete</code> 两个操作符的学习（推荐阅读 <a href="https://www.programiz.com/cpp-programming/operators">C++ Operators</a> 和 <a href="https://en.cppreference.com/w/cpp/language/operators">cppreference operator overloading</a>）</p><p><strong>先看 libc 的 <a href="https://codebrowser.dev/llvm/libcxx/src/new.cpp.html">源码实现</a>，可以看到是对 <code>malloc</code> 的一层封装。</strong><br>如果类自定义了 <code>new /delete</code>，则优先调用它们。</p><pre><code class="language-C++">void *operator new(std::size_t size) _THROW_BAD_ALLOC{    if (size == 0)        size = 1;    void* p;    while ((p = ::malloc(size)) == nullptr)    {        // If malloc fails and there is a new_handler,        // call it to try free up memory.        std::new_handler nh = std::get_new_handler();        if (nh)            nh();        else#ifndef _LIBCPP_HAS_NO_EXCEPTIONS            throw std::bad_alloc();#else            break;#endif    }    return p;}voidoperator delete(void* ptr) noexcept{    ::free(ptr);}</code></pre><h2 id="System-Call">System Call</h2><p>程序中的内存分配有三个层次，如下图。<br>最终调用的还是Linux/Windows中的操作系统API：如sbrk, mmap… 因此需要重点掌握这些系统调用。</p><p><img src="/images/memory-call.png" alt=""></p><h3 id="brk-sbrk">brk, sbrk</h3><blockquote><p><em>change data segment size</em></p></blockquote><p>参考阅读  <a href="https://www.cnblogs.com/sylar5/p/11508821.html">cnblog: brk 和 sbrk 区别</a></p><p>linux man 手册中描述两者的作用是改变 <code>data segment</code> 的结束地址。<br>通俗地理解就是，<code>brk</code>函数会重新设置 <code>heap</code> 的高位地址，而 <code>sbrk</code>函数会根据大小来调整 <code>heap</code> 的容量。</p><p>两个函数的定义如下：</p><pre><code class="language-C++"> #include &lt;unistd.h&gt;int brk(void *addr);void *sbrk(intptr_t increment);</code></pre><h3 id="mmap">mmap</h3><blockquote><p><em>map (or unmap) files or devices into memory</em></p></blockquote><pre><code class="language-C++">#include &lt;sys/mman.h&gt;void *mmap(void *addr, size_t length, int prot, int flags,            int fd, off_t offset);int munmap(void *addr, size_t length);</code></pre><h2 id="ptmalloc">ptmalloc</h2>]]></content>
    
    
    <summary type="html">&lt;p&gt;C++的内存分配与管理&lt;/p&gt;</summary>
    
    
    
    <category term="C++" scheme="http://luhao.wiki/categories/C/"/>
    
    <category term="C++" scheme="http://luhao.wiki/categories/C/C/"/>
    
    
    <category term="C++" scheme="http://luhao.wiki/tags/C/"/>
    
    <category term="linux" scheme="http://luhao.wiki/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>日志：2023年7月</title>
    <link href="http://luhao.wiki/posts/2023/7/"/>
    <id>http://luhao.wiki/posts/2023/7/</id>
    <published>2023-06-30T16:23:22.000Z</published>
    <updated>2023-09-25T08:56:10.142Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="97e14be9e854e1b3237cbaf95d9dc3cf8f8b75fab2a1a1bc54fde494d8cb23cd">b3dc07a81f6459d120ce338ccca550463faa708b9b4d89df9ab14ba4edd809f60b32d15b5672ce84c5d84744f7f475de0b1305a637ea913974dff7410a14ed4dbbb40a5278eb14bbac34e59e12a284c7a294ab69a495d47e11e78ad50feb107058e3275f75d936a554eb95bedbf96a7783a11b9f4096cfe1861725619e5a5317633279c3d957779453d57b5fa0ba64fc50c8a8867249b1e4e1b679e8a138ffe4e44ee9fd3637dc99e76ff334587dd2acf41dd9805cce4bf275cc1a585ab11cc84c7949a8c4e30c48778c74ce922226777c41d0403e225f7f266e27ebdc913e4f3b0bc811d619052f5d10bd439c7abdb7fa6a5c74b5a8b4c939d638e648ea06be90c69907d299438ee2c58f9f5cd7175c2f88ff07ca6f3b74e3c1e7e424dc71a31cd92fca1339935722708f2b8548366dfbf220add8202ae63bd0f61d1e2b8c30858b8e5cb1961461f31aa3f597e5e1adb652a72f747502c39390ff9e737034a058c8b11d06863b6a5b5f18a769141cd8150b3ea85bb1fcc5cea71202f61cca8762fc37fd67889befbc47916f913e2eaf895c32be1a951878ab4084c3d1edb2064b915ad9e3bf068fd9971f373c39af676c5edce063465935625bca670a695cfa507b62838d46af4a3a09099647d87c4095d6987040ca113d938096f7e41421c4c42540e606f60e3c50871af5464d332b97615d22822f5b4de3b53ce8d075e087c3877da3a120a16f7843f00a382283056c5d46ae2fc0e6a171f53b4d0a505614245e4bd03f8ce78719740161abd0ec71e84075ae40c4eef290dac819a9f645843f06cc21796aab1595932bc05ac984401060207100fdac93fff9badd829fc74e4aa0ff13ad6de5f506abb0b92ca5094bc5701d737ab28659315e27d070c76c7706c6f59bade15915c6e8af214bf5d33e5079f8731299b0517e571656bba9a7f6dac72cbcb797357071cb2b1f3a2e8bc99f014ac31b7061759a41b78bedc543d61b02123bdb85dafed55536872f1a0dc38ee17408b28d3068b3380b45b8c9b7731b685ce690733fa7bb0b046762bc834cb6d3efce14c8bfb6afa611310c3113d3b013e4093659a2a48aa3089a1318ac8fcd09fff675f13a5233ab6384cf7925e71f21e353542b173c100abbcec5bf92fc11bb09f325d4ec782f0696e264e9cb221f2642675a442a6816d0aeb80f8e8d1aadd9fb58a0e922db618dcdaf16363fdf09978b0534ae4e82f629afd76021debd8d45523748fe3186c4d48eff1b6595de700c0a8c40dc8a16f1bb53369ee838147f0d5a4befc78d9967033a18982453c17291a958380f29e1e3b465b61fbe779710a948056c77454035a6a5668ed000848adbf7b32ed3ef3b468684f935e395e234f0ae038dd5e307672c0307feca67877cf94fa61a02dbed70dc0af8062bc7c2f2f28badb1efbfbab9d894e0faada08742527d8eec99a24809289b8d172f2671044a3f8e7af52d54d1a047608eed3812c87afe68392f8fed5d632ed3067b5f2044004674ff317dff9712ba114861b3f4dfa85bfe5c5945dca7edbfafffa8b31a713bfd00ceb01bcfebc88b71a24cde8aa420dd9e24782fcd074323667037681f430b19c6d33960a6e64132617487789c83e6d8e4e6368ef7ccc33cfd4d2e793c1cdd85220f79849282aa3b0647b633c35cc41ce2a95ad6e88b2514bc406caefc067c2c6b813640760aebbd31967d290c7465460a5653606ce7f031560448d18fa8a801cbd322a041491269b000a4c300ef2d5b2ea6737a19048f88fe9c3fe396b494606614240e4d40299d791fd209208b152306cdf5dd3a1b2d740b6c82a95663ab48899b29398a0471b01a6f21a4178f5ea3282f78a4c53cb4e2c55ea6305b8c31ba87014f627ab418a8268d05ab608d25a614c4e16302be97ca3ea984d8ce30fdaa5c0c1be976ed17e200e18572fd2aa32af070b9c0e92bf578edbd0999f078f2d5890d6dff137366e0b770cbdb3bf337f9dffd1d9df9e927552ac556c096fede1f78c0f3437be08b9b4c415b37372f8eeec4522a45b777fc42fb3de3022f276ae2a14c0be67a7b50aa7b88dcf1b9a2969ab6facd3171091137f5595ab72ea3f6794b6cd451b9fbc8ff63f5ae08050318651b4b7396e24357069e5b5b98d5e2420a1608d2bec7fc8a6291541b2e582ffccd9fe8f46829eec756351542037533ee005b49cf6ad720508c8ba52241df29490f736d43e4499dc19456630ab1b3f0523e5d3086e33f6894a67849ddf5df832343e2f25a51258ecd0976ab807c5c725c497551eaf7e18ea9b8ae42d58fb6036bb473f25cef48bac20cafb2680ce68f539de2aa25b514182a920363c7fe185fb2ae5bdd073fed91413cebcd6fab0042006aa984f132442a3eabb8b916221dc04e28b6fbc769f47af0ce4b48d8c26a0922ebc74decb4704d5081f3de44469ea1cee6479ec013bc7d3d01acfd074a1dd14714cc76ed0e0d40c0ae2e9272bc569d16d873945ea9b970472d1f14c06176b346393d85f2e250821022e6e0afc37b7de9ecc600defee81e84e6488a01327726484df413200d2452ceb4bf5cb646e4aa7414421005864f56e8f2ba147388b8b1baae2181b46c35d274835952f653c063266fff48f5b2544b4e796dcca215c4751d7cd32aea23ab9dfa3a734b207f7d242c9b233dc789acbdbcddd87d81a3c6e19ab6e80903b6ee969c979e474d4d9d6eefbdff0aca5705d5b6cc46ae392b43baf10b1c58db7c5f6a41c4f6f160e6c418f015f5ce902a777b9fb3a68c933ad43b785a713d592f90533d9e35cd46a52457821e478e81299fb886670c073434ab388a983c821f435c6a5e4fbe5467a51b4b64ffda543c596efd8ac17da0e35858ab328ca385342e6f48fea6e59cec55b96ee5a434e15db34246d5dd739ee47cf7327444b4a8ed9a34ad63ac5b67ac91fe50034d2c8040e13d0bc09a982d1dea672fb15741e8b4c32850ee74fed103e72ff6a2c209e144d6f40fc5000750037d9c8a26027943f81d6d18d51a62dbe6d9f5fa509026d84e1a04759e7bc5fa6a56810ebc0efac3e0b664050b40cb81d45e314c7f6359ae273dea19615be0231e71eb9b371b03e1927294f235df8258efde83e268cdf6287013c856c50dd270644dc0fe66bca434d88599ba2979ac98a49a1cbb1597fe888ce001365bbd36205714f8fe02c520a28d79e438443f801d2fbd75181939935fa514ab474be8be724be174ea15808bd311f77770c06c9e47aa5c333f1221c534263a48e9edec4f96655ccbfd2bfa0144eb9acc66c0c7ed770c6e994e39ea71ef0eeefc85d5446b537c4d444cc97ce842fa576526a5e72fcaae3030184fef7d61c964f58813633eb0d767591785324ae5555d29b2f41f94b7eec44ccb3395ac00e102be44dd5087956e4c75fc8520dc0b400f17c2254c126098aa7e4de23a4d1de8bee988069f3a55a21a51f1095105bd73fa67a7e61c9d973f8913b18f518b3a7a58b868f2085105d10c2c0bb7bc953fbe73248a20a3a13c1e60bab87f8a77e881d91e5c7610fddfdba3a12225e5abd6e314320936c28990e5a5e2b41de8a5fd0a62d7ceb97c4720753980c90d2239edf31e5a5b2d1ffa3670ef5ee81f55183e3507deb6d7fd3e725c1cb537f1f9af7efe8dc88a5f88699887a64c1c3b48c64f4af05f8b9a6438b1e138b6c5f16393a8ef1fe294a48cb441fa97363a4b7c9813a77b81b37ee8a8b15011b00846bffcab0d63ea748d98560edcd6f0cfafdae5954685387b758a8be894be25f8ff7ee14b97325172efd3540b6330c1614cc9762544042525b2bcf5746efe9d77e7d1b44779a5e70b50c56451d49b32f8ebe8d8988d6e717b5b66a73c99477098e1ebd46733d8bd4e601533e9ae10c12d2816bc6570a0b1b4cc5c8fadaa4bdccbc2a3c7ee08da116a07d5da8386e6b308126725e3bb4932e8e1c580f683f2b287788e6019f6a3bc988cffbcdcac0710c073069fa833dccfcc8a0f99d28d7fa69e19fc2c66db3611ea6f6e26091e414017a87aca34b52fc55c0e82201c58f3c4ddd6eb20d4b937df0011c764c38180c77f7906345ffb1bc2481a9a71e95478efb068c0f729103295395fe4e520409d1e34bcc11047f4232109c4bf58e6cc8468729f933d61c4838c84f2e51d1874d888d25104fb8907dc662506badf3468df6815e29b8cf87471827046b12ff4b32d1e2f9554398d6fec64a80bf07c646ea392a01a9100ed91fd36ac1aff05f9411b0ffd7fbc405edf970f897e9ca2d50ec34c635997e90d19fb5d157720f64b53bc942d84c9ff7ecbf4cd362b36711bb239812135bb53fd734f4f49752579105e281f3c9bb3e179e5dc07878bbbdc0947cba7c2d7b3082ea3fc49a9d83006827b2850485ca538215902ce96c835c7331f6e7241df62e5cadd5b213d7214951a8583833cc814db2ad9d53a89852465de9e185310955c8b0ca70440022dbaaf57f94b311fd4ea6f804c0f3e09131aecca1ec0632e0d7f51afa28878254cd26fa53119347fcff91f21abee456623734fb7b5374aafd46a76cba87041ca4cd9a70117ad157a6f0d80b06f8abb937c1f4c407994c487be113a0b76516989dfea1c8960227c5ed2037001c4ae4a1255a37916b07c73f84ecb0774f9b1664c3097043d936b8f86e4e1169a69ed9642f3f42f0bd978f870b7a8b8a77363c935ddba62db8122aa89ca7a31c2e64116ac055835f260c9909ccea7a8e4b2b9b21b3bfb393ad84a1008b10eae75daa7082b6b1ca529317d83dec85e6d26e01dbac488ca60af61be855014be1a31602a3be743a619f27dec9be89d5d012273f40d8f5f24aa14eb0a052e06674e20a33cebdbc9f6d3fabef0a1457cfcc1934ea78acdc93b31b0ceeec14a8b82a778a2ff01373d5d798d8686634cad90995475f6b9516b652fd3d7ebf89461a18f239747010baa7ea9162fad6feb1a5a8ca8ab00b33d8f511948ec004b4f1d8a88119069968118906c9cb16947e6466cf02cbb67b3e5c1078a7a3013a2d4dbcce04f4f83184a56c53df2a9f6b13b18392cb35ab054251518756c7707ba7d122ab0e872c9658db3167434a413a3d1a0154e53b660a270ffd9c3680d854ecf41ed637366e188630a4a33d1f7f0ce528cde65b51e42375024e2892f5613c5c1648a3425e713a7fec772355deef1515d4b839152a69d2a04477456c8e32de38a7b365cd7cac98240f47b29605838a62911f3b0afe0219dfd85a1d4eb0919ee0e944e48edd913ede081c769ade7e003785916b6aa8392019300e9de3019f8360574c0b59373e8cc97ce8f8a9d4bcbfecfae97890e955a1d395f8866b69aa1fc4d762075aab9cc7f02de0cb39e26a3ce8de63bd86ac238a94b96ea625cb2abdad9adf1a1998b410690ac48f92462ee997d1dfd30717f07ef368d0ff7d0e76297a410477a502c56bb8d5dbc464cab8165a8b1f28c8403b89205db9611ab4632b8d36bf726522de64c074831ce24a46523cb9f425149f6adf19a9a8b90e1ae59726e19a9fccfa885c957f2d768d663e6bd6cb2a81a829fcb59c6b50dc1b3fb3854f4d4f5382e5ab7768f21e3cf9bf4d67aeece25e00a07c2f095508f75defdf8f02855916f1af2d10cb5c624e27349696a9dbee336380ec1def04174218493332fefa47bbdbefde0f84768c260620c209e6632d305e07fd8beacf69e737f100a242e92cb1dc362a41f60b814a006b5910da961f816b60c658d82c45b235bb6deb24335971fa7b05d5821cb3246568034f54241765f9207a7ae30ebdb9171b8b0aa750095552a0fdb34288a2a45e19b6722b8bd1b0d51b73a50e6a333ff67e66a36880eb2148296c032454eb1b04c023caacbaf215dc049c8ac96334e163d8487e8ad576dd2c19d9d067fd78181407e907e34e625b4a6911f437a3a2f714f4b12807c1e2ae876c45cdfb25bc3df7a89a0ad179906644c253f6ce3afcb0bdf8d60e9dfc40fdfe0604d71eec4c21aa9cfe769a57b2fa453a4c1dc0025d2006d4fa5c51694e5c68e601d0fe1bec94b566e70d33d24d9f2079ebaead15915d931c9f925b14a4b7cf96d2c15bb373f1469b8c82fc0d8244cf841ad262a8c2a83ede69738f136edc452bda82e4f20b64ff8b9015ed73c32193ff9041860e8543d5af18833b4672860d23eed8b25cad8ecceaba4237b7e5e01be2084caa9de9092c001a15463bb6354cc7c3d21f2849b24e4215b4c3f23f2c94d36568840605d6b0dd1dbf6c3aca47abd3d640290628f189192be94d5c1dd0bfaf445781c85da0509eb4b1937e4a1d0dc2a18f7c417bc2344d3e1a1d38d1fec462bb3f8eecd1cc6068b1be349f39d42f0c5938f823cd37651df324ac31ff604e021abddfa7a57ad445d01ad434f97b776d8d4ef460714bd2aff528a73795d3ce9fecda6d94c74b857544b84cc03a26eed59b1f2f0188a6d9b6e04c6a1b8683ab75acbade2facea552f14e8845d7395bf81c58bc324795527280fdb99796aa41d6bd92a82eee812f4a1aa8aecbc90c3a298e2749d1c7ed7ea68cbc54ede310093acaf30fa37a0add2983a94fe0e70539588240fba297ad1f2f2ef30fa1b3595aff6e586fe5d527d8d4036c8489b4741e90b94f0a41ea5c4209d120df43a98488a67ab9d3eed4206fca4878b206b43ec193f085ffdb3a0fb5d0fd04d44bc524260d99afd0be26569946aa76a1287d8e911a78d1f1c18cb2b81b7f264253b09a355f94e7e851a68e7c1cb1ada23137b309b295b6c51d99b638a5b5a6c988cbae0844b93594e1b5761adbef0234bbf4b094f6f802bbe217029ee65a6e0ae4119a955fe4174c4f34ffe723c6f31942fbbb0320d7bdf204ed34869c382219705d35b9019b0ce4c8b3bae72c56303a314cf497334f6eb6eebc449e7e95a50eab56439a626c81f106b2032a5a4e76fd1c455bda921712b4819a8827c4517a29106a83d1ec535b94097fbc80500d13aa873bb84bdde0d3e78ca01e88b7c43da42953675a3152434caf7b4fa7c10e20061ec3353809c45325076ca42fdd7885bcbf8a93aaf1f4a4042f7ae5d4304e4b690c237c89f86b38b1123661ff89df59c9cf143dc314a6137e2448293c8a5f388e0386476ed28a76048b8911101d17ff2d7038eb12b8214db73f2849516189039c26d2a928c0769b3ea0e6564e8acbd1318aa3d33534e6f6e2e22cf14bb4e00ef121f3ec95150ad0979fd120cf9cafd1435c8f5698f4e44eb5b0ccf823dd890e70eda7393bf45daa52f12ab7bc927f031f79a570889b6b3bc3c5985a3b132e70824f4df0eedf749176ea169f0541441315f7a749f88dd2c6ec87ebe728550d2905f909bd440cf032da45f6deda7a22c839b015a732cb21eba03b074316d278cff03bfae6e083d15a77632066fd65261600e443ea8815565f07161ff2380ab82c01fc9aa5a84b8015aeacf4e3e1d69314de932b7088ace8f579ef4ba389975d05677b5417f6d0394dbc5e4ea351dcff2e79e798faae0062b2400ac36a42f9f38153053a4e14154a741a05a0010fa46f9416ddea29133f014ac415c947c8a8bb602aec9b4d2a18e25a5a77271d34f5f9bce14316374101a57c25cf85a01e7ce4dfe1e4fe3193700595473c8e5a3da9c67faba5e9c9529c20560797f7142c529af7d329ed3f9ecae21816aa8a3073d371d9c315e789d26795f5c14805b28c5ececa85e044ed79955feb0a48f1f25a645e1636</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;hbe hbe-container&quot; id=&quot;hexo-blog-encrypt&quot; data-wpm=&quot;Oh, this is an invalid password. Check and try again, please.&quot; data-whm=&quot;OOP</summary>
      
    
    
    
    <category term="个人日志" scheme="http://luhao.wiki/categories/%E4%B8%AA%E4%BA%BA%E6%97%A5%E5%BF%97/"/>
    
    <category term="个人日志" scheme="http://luhao.wiki/categories/%E4%B8%AA%E4%BA%BA%E6%97%A5%E5%BF%97/%E4%B8%AA%E4%BA%BA%E6%97%A5%E5%BF%97/"/>
    
    
    <category term="vim" scheme="http://luhao.wiki/tags/vim/"/>
    
  </entry>
  
  <entry>
    <title>Google评分卡💯及自评</title>
    <link href="http://luhao.wiki/posts/grade/"/>
    <id>http://luhao.wiki/posts/grade/</id>
    <published>2023-06-27T16:40:51.000Z</published>
    <updated>2023-08-16T17:08:18.021Z</updated>
    
    <content type="html"><![CDATA[<div class="admonition note"><p class="admonition-title">导读</p><ul><li>Google将技术能力划分为 0~11 的等级</li><li>自我评估技术，判断下一步需要作出的努力</li></ul></div><h2 id="↓-Self-Evaluation">↓ Self-Evaluation</h2><table><thead><tr><th style="text-align:left">↓ 基础要求</th><th style="text-align:center">grade</th></tr></thead><tbody><tr><td style="text-align:left">熟悉数据结构与算法</td><td style="text-align:center">2</td></tr><tr><td style="text-align:left">熟练使用 C++11</td><td style="text-align:center">3</td></tr><tr><td style="text-align:left">熟悉并掌握 C++高级特性 (14/17/20)</td><td style="text-align:center">1</td></tr><tr><td style="text-align:left">熟练使用 Python 等脚本语言</td><td style="text-align:center">4</td></tr><tr><td style="text-align:left">熟悉batch、Shell、Linux常见指令</td><td style="text-align:center">1</td></tr><tr><td style="text-align:left">熟悉MySQL等数据库的设计、优化</td><td style="text-align:center">0</td></tr><tr><td style="text-align:left">熟悉编译原理、编译优化</td><td style="text-align:center">1</td></tr><tr><td style="text-align:left">熟悉 vscode、sublime、vim 等IDE、Editor</td><td style="text-align:center">5</td></tr><tr><td style="text-align:left">熟悉 Jenkins、TeamCity 等 CI&amp;CD 平台</td><td style="text-align:center">2</td></tr><tr><td style="text-align:left">熟悉 ChatGPT、CodeMaker 等 AI工具</td><td style="text-align:center">1</td></tr><tr><td style="text-align:left">熟悉Linux内核，如进程管理、内存管理、文件系统等</td><td style="text-align:center">1</td></tr><tr><td style="text-align:left">熟悉网络协议和网络编程，熟悉websocket、HTTP、socket、TCP/IP等</td><td style="text-align:center">1</td></tr><tr><td style="text-align:left">↓ <strong>C/C++领域</strong></td><td style="text-align:center"></td></tr><tr><td style="text-align:left">内存管理、内存分配、ASan原理、内存错误及排查</td><td style="text-align:center">1</td></tr><tr><td style="text-align:left">模板、SFINAE、type traits、metaprogramming</td><td style="text-align:center">1</td></tr><tr><td style="text-align:left">并发、memory order、同步、互斥、boost::asio</td><td style="text-align:center">0</td></tr><tr><td style="text-align:left">编译优化、SIMD、ISPC、CPU性能分析</td><td style="text-align:center">0</td></tr><tr><td style="text-align:left">C++编码规范</td><td style="text-align:center">2</td></tr><tr><td style="text-align:left">↓ <strong>Python2/3领域</strong></td><td style="text-align:center"></td></tr><tr><td style="text-align:left">Todo</td><td style="text-align:center"></td></tr><tr><td style="text-align:left">↓ <strong>工具/pipline领域</strong></td><td style="text-align:center"></td></tr><tr><td style="text-align:left">Jenkins 日常工作使用，无阻碍</td><td style="text-align:center">3</td></tr><tr><td style="text-align:left">VSCode 日常开发使用、多个插件开发经验</td><td style="text-align:center">5</td></tr><tr><td style="text-align:left">Vim 熟练使用、vimrc配置</td><td style="text-align:center">4</td></tr><tr><td style="text-align:left">Git 基本的GUI、CMD操作</td><td style="text-align:center">2 ~ 3</td></tr><tr><td style="text-align:left">↓ <strong>加分项</strong></td><td style="text-align:center"></td></tr><tr><td style="text-align:left">具备内存优化经验、熟悉linux内存分配</td><td style="text-align:center">1</td></tr><tr><td style="text-align:left">熟悉GPU使用，或有底层基础库（CUDA，mkl、openblas等）优化经验</td><td style="text-align:center">0 ~ 1</td></tr><tr><td style="text-align:left">良好的系统设计能力，如 performance、reliability、availability 多维度考量程序</td><td style="text-align:center">2</td></tr><tr><td style="text-align:left">熟悉机器学习平台相关工具，比如k8s，kubeflow，mlflow，automl等</td><td style="text-align:center">0</td></tr><tr><td style="text-align:left">有视频解码和渲染开发经验者优先</td><td style="text-align:center">2</td></tr><tr><td style="text-align:left">有存储系统、分布式系统等底层开发经验</td><td style="text-align:center">0</td></tr></tbody></table><br>## ↓ Google-Standards<table><thead><tr><th style="text-align:center">等级</th><th style="text-align:left">标准</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">You are unfamiliar with the subject area</td></tr><tr><td style="text-align:center"></td><td style="text-align:left">一窍不通</td></tr><tr><td style="text-align:center">1</td><td style="text-align:left">You can read/understand the most fundamental aspects of the subject area</td></tr><tr><td style="text-align:center"></td><td style="text-align:left">理解基本概念</td></tr><tr><td style="text-align:center">2</td><td style="text-align:left">Ability to implement small changes,understand basic principles and able to figure out additional details with minimal help</td></tr><tr><td style="text-align:center"></td><td style="text-align:left">能够实现一些小改动，在别人帮助下钻研更多细节</td></tr><tr><td style="text-align:center">3</td><td style="text-align:left">Basic proficiency in a subject area without relying on help</td></tr><tr><td style="text-align:center"></td><td style="text-align:left">基本掌握和熟练使用</td></tr><tr><td style="text-align:center">4</td><td style="text-align:left">You are comfortable with the subject area and all routine work on it</td></tr><tr><td style="text-align:center"></td><td style="text-align:left">足够精通，足够应对所有日常工作</td></tr><tr><td style="text-align:center">5</td><td style="text-align:left">An even lower degree of reliance on reference materials. Deeper skills in a field or specific technology in the subject area.</td></tr><tr><td style="text-align:center"></td><td style="text-align:left">深耕某个细分领域</td></tr><tr><td style="text-align:center">6</td><td style="text-align:left">Ability to develop large programs and systems from scratch</td></tr><tr><td style="text-align:center"></td><td style="text-align:left">独立开发大型系统</td></tr><tr><td style="text-align:center">7~10</td><td style="text-align:left">脚踏实地慢慢来吧…</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;admonition note&quot;&gt;&lt;p class=&quot;admonition-title&quot;&gt;导读
&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;Google将技术能力划分为 0~11 的等级&lt;/li&gt;
&lt;li&gt;自我评估技术，判断下一步需要作出的努力&lt;/li&gt;
&lt;/ul&gt;
&lt;/d</summary>
      
    
    
    
    <category term="个人日志" scheme="http://luhao.wiki/categories/%E4%B8%AA%E4%BA%BA%E6%97%A5%E5%BF%97/"/>
    
    <category term="个人日志" scheme="http://luhao.wiki/categories/%E4%B8%AA%E4%BA%BA%E6%97%A5%E5%BF%97/%E4%B8%AA%E4%BA%BA%E6%97%A5%E5%BF%97/"/>
    
    
    <category term="C++" scheme="http://luhao.wiki/tags/C/"/>
    
    <category term="Python" scheme="http://luhao.wiki/tags/Python/"/>
    
    <category term="linux" scheme="http://luhao.wiki/tags/linux/"/>
    
    <category term="vim" scheme="http://luhao.wiki/tags/vim/"/>
    
  </entry>
  
</feed>
