<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Luhao&#39;s Blog</title>
  
  <subtitle>luhao wiki</subtitle>
  <link href="http://luhao.wiki/atom.xml" rel="self"/>
  
  <link href="http://luhao.wiki/"/>
  <updated>2023-08-30T17:14:34.895Z</updated>
  <id>http://luhao.wiki/</id>
  
  <author>
    <name>Luhao</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ã€AIã€‘chatgptå…¥é—¨</title>
    <link href="http://luhao.wiki/posts/3GDXTCB/"/>
    <id>http://luhao.wiki/posts/3GDXTCB/</id>
    <published>2023-08-30T16:58:13.000Z</published>
    <updated>2023-08-30T17:14:34.895Z</updated>
    
    <content type="html"><![CDATA[<p>OpenAIæ³¨å†Œé—­å‘ã€GPT Apiè°ƒç”¨æŒ‡å—<span id="more"></span></p><h3 id="æ³¨å†Œ-OpenAI">æ³¨å†Œ <a href="https://openai.com/">OpenAI</a></h3><p>è·Ÿè¿™ä¸ªæ•™ç¨‹æ“ä½œå³å¯ï¼š<a href="https://www.awyerwu.com/9829.html">ChatGPTæœ€æ–°æ³¨å†Œæ•™ç¨‹</a></p><p>æ ¸å¿ƒé—®é¢˜æ˜¯ä¸¤ä¸ªï¼š</p><ol><li>å€ŸåŠ© VPN ç»•è¿‡ OpenAI çš„IPæ£€æµ‹å°æ§ï¼Œç›´æ¥æŒ‚ç¾å›½</li><li>å€ŸåŠ© <a href="https://sms-activate.org/">sms-activate</a> æ¥æ”¶å¤–å›½æ‰‹æœºçš„éªŒè¯ç </li></ol><h3 id="è°ƒç”¨-GPT-Api">è°ƒç”¨ <a href="https://platform.openai.com/docs/api-reference">GPT Api</a></h3><p>å¼€å‘ç¯å¢ƒä½¿ç”¨ <code>python3</code>ï¼Œé€šè¿‡ <code>pip3 install openai</code> å®‰è£…ä¾èµ–åŒ…ã€‚<br>æ³¨æ„ç”Ÿäº§ç¯å¢ƒä¹Ÿè¦æŒ‚VPNï¼Œä¸‹é¢æ˜¯ä¸€æ®µæµ‹è¯•ä»£ç ï¼š</p><pre><code class="language-python"># -*- coding: utf-8 -*-import openaiopenai.api_key = "***********************"completion = openai.ChatCompletion.create(  model="gpt-3.5-turbo-0613",  messages=[    {      "role": "user",       "content": "è§£é‡Šå„å°”å°¼è¯ºç°è±¡",    }  ],  temperature = 0.7)print (completion.choices[0].message.content)</code></pre><h3 id="å¼€æºæ¨è">å¼€æºæ¨è</h3><ul><li><a href="https://github.com/zhayujie/chatgpt-on-wechat">chatgpt-on-wechat</a></li></ul><p>å¾®ä¿¡èŠå¤©æœºå™¨äººï¼Œæ”¯æŒGPT3.5/GPT4.0/æ–‡å¿ƒä¸€è¨€/è®¯é£æ˜Ÿç«æ¨¡å‹ï¼Œæ”¯æŒä¸ªäººå¾®ä¿¡ã€å…¬ä¼—å·ã€ä¼ä¸šå¾®ä¿¡ï¼Œæ”¯æŒæ–‡æœ¬ã€è¯­éŸ³å’Œå›¾ç‰‡çš„å¤„ç†ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;OpenAIæ³¨å†Œé—­å‘ã€GPT Apiè°ƒç”¨æŒ‡å—&lt;/p&gt;</summary>
    
    
    
    <category term="AI" scheme="http://luhao.wiki/categories/AI/"/>
    
    <category term="AI" scheme="http://luhao.wiki/categories/AI/AI/"/>
    
    
    <category term="Python" scheme="http://luhao.wiki/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>ã€é‡åŒ–ã€‘äº¤æ˜“æ•°æ®ä¸“é¢˜</title>
    <link href="http://luhao.wiki/posts/1C3P776/"/>
    <id>http://luhao.wiki/posts/1C3P776/</id>
    <published>2023-08-29T15:40:15.000Z</published>
    <updated>2023-08-30T17:19:43.993Z</updated>
    
    <content type="html"><![CDATA[<div class="admonition note"><p class="admonition-title">å¯¼è¯»</p><ul><li>äº¤æ˜“éœ€è¦ä¸ <strong>å“ªäº›æ•°æ®</strong> æ‰“äº¤é“ï¼Ÿ</li><li>å¦‚ä½•é«˜æ•ˆåœ° <strong>å­˜å‚¨ã€è¯»å†™ã€è®¡ç®—</strong> æ•°æ®ï¼Ÿ</li></ul></div><h2 id="ä¸€å›¾èƒœåƒè¨€">ä¸€å›¾èƒœåƒè¨€</h2><p>äº¤æ˜“æ•°æ®å¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼ˆä»å·¦åˆ°å³ï¼‰ï¼š</p><p><img src="/images/quant-data-chart.png" alt=""></p><p>æ¢ä¸€ä¸ªè§’åº¦ç†è§£ï¼šBaræ˜¯Tickæ•°æ®çš„é‡è¦æ€§é‡‡æ ·ï¼ˆæœ‰ç‚¹åƒå…‰æ …åŒ–ï¼‰ï¼ŒK-Lineæ˜¯Baræ•°æ®çš„å¯è§†åŒ–å±•ç°ï¼ˆæœ‰ç‚¹åƒPixel-Shadingï¼‰ã€‚<br>åœ¨è¿™ä¸ªå¤„ç†æµç¨‹ä¸­ï¼Œä¿¡æ¯çš„åŸè²Œæ˜¯ä¸æ–­è¢«ä¸¢å¤±çš„ï¼Œå› æ­¤<strong>è¶ŠåŸå§‹çš„æ•°æ®ï¼Œä»·å€¼å«é‡è¶Šé«˜</strong>ï¼Œå°±åƒã€ŠèˆŒå°–ä¸Šçš„ä¸­å›½ã€‹æ‰€è¯´ï¼šé«˜ç«¯çš„é£Ÿæï¼Œå¾€å¾€åªéœ€æœ€ç®€å•çš„çƒ¹é¥ªã€‚</p><p>åŒæ—¶ä¹Ÿä¸èƒ½å¿½ç•¥ å›¾å½¢åŒ–å±•ç¤ºçš„æ„ä¹‰ï¼Œå› ä¸ºï¼š</p><ul><li><strong>ä¸»è§‚äº¤æ˜“</strong> ä¾èµ– Kçº¿å›¾ã€æŠ€æœ¯æŒ‡æ ‡ ç­‰ä½œå‡ºè¶‹åŠ¿æ€§ã€é¢„æµ‹æ€§åœ°åˆ¤æ–­</li><li><strong>é‡åŒ–äº¤æ˜“</strong> å¾€å¾€éœ€è¦å€ŸåŠ© Tickæ•°æ® å»è§£è¯»æ›´å¤šçš„å¸‚åœºå¾®è§‚ä¿¡æ¯ã€‚</li></ul><div class="admonition warning"><p class="admonition-title">å¦‚ä½•ç†è§£Tickæ•°æ®?</p><ul><li>äº¤æ˜“æ‰€æ”¶å‘äº¤æ˜“æ•°æ®çš„<strong>æœ€å°é—´éš”</strong></li><li>å¯èƒ½æ˜¯æ¯ä¸€ç¬”æ’®åˆæˆäº¤ï¼ˆAè‚¡ï¼‰ï¼Œä¹Ÿå¯èƒ½æ˜¯æ¯500æ¯«ç§’çš„äº¤æ˜“å¿«ç…§ï¼ˆå•†å“æœŸè´§ï¼‰</li></ul></div><h2 id="é‡‘èæ•°æ®åˆ†ç±»">é‡‘èæ•°æ®åˆ†ç±»</h2><p>ç‹­ä¹‰ç†è§£çš„é‡‘èæ•°æ®ï¼Œå¤§æ¦‚åªæœ‰ æˆäº¤é‡ å’Œ ä»·æ ¼ ç­‰å…³é”®å€¼ï¼Œä½†çœŸæ­£çš„é‡‘èå¸‚åœºæ˜¯é”™ç»¼å¤æ‚ã€å½±å“çº·ç¹çš„ï¼Œéœ€è¦ä»å¦‚ä¸‹å‡ ä¸ªé¢†åŸŸè€ƒé‡ï¼š</p><ul><li><font color="#ef6d3b"><strong>Fundamental Data</strong></font></li></ul><p><strong>åŸºæœ¬é¢æ•°æ®</strong>ï¼Œä¸»è¦æ˜¯ä¼ä¸šçš„è¥æ”¶ã€è´¢æŠ¥ç­‰å®è§‚ä¿¡æ¯ï¼Œä¼ ç»ŸæŠ•èµ„é¢†åŸŸä¸­çš„åˆ†æå¸ˆï¼Œå¾€å¾€æ˜¯å¯¹ç€æµ·é‡çš„è´¢æŠ¥ä½œå‡ºæŠ•èµ„å†³ç­–çš„ã€‚</p><ul><li><font color="#ef6d3b"><strong>Market Data</strong></font></li></ul><p><strong>å¸‚åœºæ•°æ®</strong>ï¼Œä¸»è¦æ˜¯å¸‚å€¼ã€å¸‚ç›ˆç‡ã€è‚¡ä»·ã€æˆå®¶é‡ç­‰é‡‘èæ•°æ®ï¼Œç‰¹ç‚¹æ˜¯ é¢‘ç‡é«˜ã€æ—¶æ•ˆæ€§å¼ºã€å™ªå£°å¤§ï¼Œæå–æœ‰ä»·å€¼ä¿¡æ¯çš„éš¾åº¦ä¹Ÿéå¸¸å¤§ã€‚</p><ul><li><font color="#ef6d3b"><strong>Analytics Data</strong></font></li></ul><p>ï¼ˆç¬¬ä¸‰æ–¹ï¼‰<strong>åˆ†ææ•°æ®</strong>æ˜¯å¾ˆå®½æ³›çš„æ¦‚å¿µï¼Œå¯èƒ½æ˜¯æœºæ„çš„ç ”æŠ¥ã€ç¤¾äº¤èˆ†æƒ…çš„æ•°æ®ï¼Œç”šè‡³æ˜¯ç›¸å…³æ”¿ç­–çš„é¢å¸ƒã€å¤©æ°”ä¿¡æ¯çš„å˜å¹»ç­‰ç­‰ã€‚ç‰¹ç‚¹æ˜¯è·å–éš¾åº¦å¤§ã€å½’çº³æå–æœ‰æ•ˆä¿¡æ¯éš¾åº¦æ›´å¤§ã€‚</p><hr><p>è€ƒè™‘åˆ°æ•°æ®è·å–çš„éš¾åº¦å› ç´ ï¼Œæˆ‘ä»¬ä¸€èˆ¬åŸºäº <code>Market Data</code> çš„æ•°æ®è¿›è¡Œæç‚¼å’Œç ”ç©¶ï¼Œè¿™éƒ¨åˆ†ä¿¡æ¯è·å–å…¬å¼€ã€é€æ˜ã€å¹³ç­‰ï¼Œä¸”èƒ½å¾—åˆ°çš„æ•°æ®é‡ä¹Ÿæ˜¯æœ€å¤§çš„ã€‚<br>ä¸‹é¢ä»‹ç»ä¸€äº›å¸¸è§çš„å¸‚åœºæ•°æ®çš„æä¾›å•†ï¼ˆè·å–æ¸ é“ï¼‰ã€‚</p><h2 id="é‡‘èæ•°æ®æä¾›å•†">é‡‘èæ•°æ®æä¾›å•†</h2><p>è¿™é‡Œæ¨èä¸‰ä¸ªå…·æœ‰æ€§ä»·æ¯”çš„æ¸ é“ï¼Œç›¸è¾ƒäºä¸ªäººæŠ•èµ„è€…ï¼ˆçˆ±å¥½è€…ï¼‰è€Œè¨€ï¼š</p><table><thead><tr><th style="text-align:center">æ¸ é“</th><th style="text-align:center">ä»·æ ¼</th><th style="text-align:center">å‡†ç¡®åº¦</th><th style="text-align:center">è¦†ç›–åº¦</th></tr></thead><tbody><tr><td style="text-align:center">taobao</td><td style="text-align:center">ä½</td><td style="text-align:center">å·®<br>ï¼ˆéƒ½æ˜¯ä¸ªäººæ¸…æ´—å¾—åˆ°ï¼‰</td><td style="text-align:center">é½å…¨</td></tr><tr><td style="text-align:center"><a href="http://www.jinshuyuan.net/">é‡‘æ•°æº</a></td><td style="text-align:center">ä¸­<br>ï¼ˆéƒ¨åˆ†ä½é¢‘æ•°æ®å…è´¹ï¼‰</td><td style="text-align:center">é«˜</td><td style="text-align:center">é½å…¨</td></tr><tr><td style="text-align:center"><a href="https://shinnytech.com/">å¤©å‹¤é‡åŒ–</a></td><td style="text-align:center">é«˜</td><td style="text-align:center">é«˜</td><td style="text-align:center">æ— è‚¡ç¥¨æ•°æ®</td></tr></tbody></table><p>å¦‚æœä½ çš„ç­–ç•¥æœ‰æ‰€èµ·è‰²ï¼Œç”šè‡³æ‰­äºä¸ºç›ˆäº†ï¼Œåé¢å¯ä»¥è€ƒè™‘å‘ä¸“ä¸šçš„æ•°æ®æä¾›å•†ï¼ˆå¦‚<a href="https://www.wind.com.cn/mobile/WDS/zh.html">Wind</a>ã€åŒèŠ±é¡ºï¼‰è´­ä¹°æ˜‚è´µä½†å‡†ç¡®çš„å¸‚åœºæ•°æ®ï¼Œæœ‰å¥è¯è¯´å¾—å¥½ï¼šè´µçš„ä¸œè¥¿æ€»æœ‰è´µçš„é“ç†ï¼</p><h2 id="é‡‘èæ•°æ®æ ¼å¼">é‡‘èæ•°æ®æ ¼å¼</h2><p>é‡‘èæ•°æ®æ˜¯é«˜åº¦åºåˆ—åŒ–çš„ï¼Œåå‘äºä½¿ç”¨çŸ©é˜µï¼ˆæ•°ç»„ï¼‰ç±»ç»“æ„å­˜å‚¨ï¼Œè¿™ç‚¹ä¸åŒäºæ¸¸æˆè¡Œä¸šçš„ç­–åˆ’æ•°å€¼è¡¨ã€‚å› æ­¤éœ€è¦è¡¡é‡å¦‚ä¸‹å‡ ç‚¹ï¼š</p><ul><li>æ˜“äº <code>Python/C++</code> å¼€å‘</li><li>è¯»å–é€Ÿåº¦å¿«</li><li>å­˜å‚¨ç©ºé—´å°</li></ul><hr><p>æ¨èä½¿ç”¨<code>feather</code>è¿›è¡Œæ•°æ®çš„è¯»å†™ï¼ŒæŸ¥é˜…æ–‡æ¡£ <a href="https://pandas.pydata.org/pandas-docs/version/1.4/user_guide/io.html">pandas IO tools</a></p><p>ä¸ºäº†å¯¹æ¯”å„ç§æ ¼å¼çš„ç‰¹ç‚¹ï¼Œä¸‹é¢é€‰å–æˆªæ­¢<code>2022-12-31</code>çš„ æ‰€æœ‰Aè‚¡æ—¥çº¿æ•°æ®ï¼š</p><ul><li><code>26415674 rows x 8 columns</code></li><li>8åˆ—åˆ†åˆ«æ˜¯ï¼š<code>code,time,open,high,low,close,volume,amount</code></li></ul><table><thead><tr><th style="text-align:center">æ–¹å¼</th><th style="text-align:center">å ç”¨ç©ºé—´</th><th style="text-align:center">è¯»å–è€—æ—¶</th><th style="text-align:center">å¯è¯»æ€§</th></tr></thead><tbody><tr><td style="text-align:center">csv</td><td style="text-align:center">1.5G</td><td style="text-align:center">20s</td><td style="text-align:center">ç±»ä¼¼excel</td></tr><tr><td style="text-align:center">pickle</td><td style="text-align:center">1.8G</td><td style="text-align:center">3.5s</td><td style="text-align:center">äºŒè¿›åˆ¶</td></tr><tr><td style="text-align:center">feather</td><td style="text-align:center">0.9G</td><td style="text-align:center">2s</td><td style="text-align:center">äºŒè¿›åˆ¶</td></tr></tbody></table><h2 id="TODO">TODO</h2><p>æ•´åˆè¿™ä¸‰ç¯‡åšå®¢ï¼Œå°†æ–‡æ¡£<strong>å†™è–„</strong>ï¼š</p><ul><li><a href="/posts/2QT24MY/">Pandasæ•°æ®å¤„ç†</a></li><li><a href="/posts/3RWWC79/">ä»€ä¹ˆæ˜¯å¤æƒä»·æ ¼?</a></li></ul><p>å‚è€ƒå¤–éƒ¨æ–‡ç« ï¼Œå–å…¶ç²¾åå»å…¶ç³Ÿç²•ï¼š</p><ul><li><a href="https://cloud.tencent.com/developer/article/1457545">ã€é‡‘èæ•°æ®ç»“æ„ã€ã€Œ1. æ•°æ®ç±»å‹ã€</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;admonition note&quot;&gt;&lt;p class=&quot;admonition-title&quot;&gt;å¯¼è¯»
&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;äº¤æ˜“éœ€è¦ä¸ &lt;strong&gt;å“ªäº›æ•°æ®&lt;/strong&gt; æ‰“äº¤é“ï¼Ÿ&lt;/li&gt;
&lt;li&gt;å¦‚ä½•é«˜æ•ˆåœ° &lt;strong&gt;å­˜å‚¨ã€è¯»å†™ã€è®¡ç®—&lt;/s</summary>
      
    
    
    
    <category term="é‡åŒ–äº¤æ˜“" scheme="http://luhao.wiki/categories/%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93/"/>
    
    <category term="é‡åŒ–äº¤æ˜“" scheme="http://luhao.wiki/categories/%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93/%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93/"/>
    
    
    <category term="C++" scheme="http://luhao.wiki/tags/C/"/>
    
    <category term="Python" scheme="http://luhao.wiki/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>ã€åäººè®¿è°ˆã€‘BBCé‡‡è®¿é©¬æ–¯å…‹</title>
    <link href="http://luhao.wiki/posts/2YS1Y71/"/>
    <id>http://luhao.wiki/posts/2YS1Y71/</id>
    <published>2023-08-23T15:14:25.000Z</published>
    <updated>2023-08-24T13:40:44.713Z</updated>
    
    <content type="html"><![CDATA[<div class="admonition note"><p class="admonition-title">å¯¼è¯»</p><ul><li><a href="https://www.youtube.com/watch?v=donC2VuVTtM"><strong>Youtubeé‡‡è®¿è§†é¢‘ 2023å¹´4æœˆ21æ—¥</strong></a></li><li><a href="https://www.bilibili.com/video/BV18F411y7ac"><strong>Bç«™è§£è¯´è§†é¢‘</strong></a></li><li>é©¬æ–¯å…‹çš„æ ¸å¿ƒæŠ€èƒ½ï¼šå±Œçˆ†çš„æ€ç»´é€»è¾‘ + çƒ‚ç†Ÿçš„è¾©è®ºæŠ€å·§</li><li>è¿™ä¸€æ´¾è¿˜æœ‰ä¸ªå¤§ä½¬æ˜¯ç½—æ°¸æµ©ï¼Œå¯ä»¥çœ‹ä»–é”¤ç‹è‡ªå¦‚çš„è§†é¢‘</li><li><font color="#FF1E10"><strong>TODO:</strong></font> æ–‡ç« æ’ç‰ˆä¸æ»¡æ„ï¼Œç­‰å½•ä¸ªè§†é¢‘é”»ç‚¼å£å¤´è¡¨è¾¾</li></ul></div><h2 id="é‡‡è®¿èƒŒæ™¯">é‡‡è®¿èƒŒæ™¯</h2><h3 id="é©¬æ–¯å…‹æ–¹é¢">é©¬æ–¯å…‹æ–¹é¢</h3><blockquote><p>é˜…è¯»ææ–™ï¼š<a href="https://zh.wikipedia.org/zh-hans/%E5%9F%83%E9%9A%86%C2%B7%E9%A9%AC%E6%96%AF%E5%85%8B%E6%94%B6%E8%B4%AD%E6%8E%A8%E7%89%B9%E6%A1%88">ç»´åŸºç™¾ç§‘ åŸƒéš†Â·é©¬æ–¯å…‹æ”¶è´­æ¨ç‰¹æ¡ˆ</a></p></blockquote><p>é©¬æ–¯å…‹ä¸ <strong>2022å¹´10æœˆ</strong> ä»¥ <strong>440äº¿ç¾é‡‘</strong> ä»·æ ¼ï¼Œæ”¶è´­ç¾å›½ç¤¾äº¤å·¨å¤´ <em><strong>Twitter</strong></em>ï¼Œå…¶è¿‡ç¨‹ç»å†ä¸‰ä¸ªé˜¶æ®µï¼š</p><ul><li>ã€æå‡ºã€‘é©¬æ–¯å…‹æå‡ºæ”¶è´­ï¼Œé­åˆ°Twitterå’Œå¸‚åœºåå¯¹</li><li>ã€åæ‚”ã€‘é©¬æ–¯å…‹å‘ç°Twitterç”¨æˆ·æ•°æ®é€ å‡ï¼Œå°è¯•æ”¾å¼ƒæ”¶è´­è®¡åˆ’</li><li>ã€è¢«è¿«ã€‘é©¬æ–¯å…‹è¿«äºæ³•å¾‹è¯‰è®¼ï¼Œè¢«è¿«æ”¶è´­Twitter</li></ul><p>æ”¶è´­ <em>Twitter</em> åï¼Œé©¬æ–¯å…‹ä¸»è¦å®è¡Œå››å¤§æªæ–½ï¼š</p><ul><li>å¤§é‡è£å‘˜ï¼ˆ8000äºº-&gt;1500äººï¼‰</li><li>å¼€æº <em>Twitter</em> å†…å®¹æ¨èç®—æ³•</li><li>åˆ é™¤åƒåœ¾æœºå™¨äºº</li><li>é€€å‡ºæ”¶è´¹è®¤è¯æœåŠ¡</li></ul><h3 id="BBCæ–¹é¢">BBCæ–¹é¢</h3><p>å…¶æ¬¡ï¼ŒBBCçš„é‡‡è®¿ç´ æ¥ä»¥ <strong>å°è¯•åˆéš¾é‡‡è®¿è€…ï¼Œè§’åº¦ç‹ è¾£ï¼Œåˆ¶é€ çˆ†ç‚¹è¯é¢˜</strong> ä¸ºä¸»ï¼Œå›´ç»•æ”¶è´­æ¡ˆæœ¬èº«ï¼Œï¼ˆä»BBCè§’åº¦ï¼‰æœ‰å¦‚ä¸‹å‡ ç‚¹å€¼å¾— <strong>åŸ‹å‘</strong>ï¼š</p><ol><li>ã€é“å¾·è§’åº¦ã€‘æ¥æ‰‹å…¬å¸åå¤§é‡è£å‘˜</li><li>ã€åª’ä½“è§’åº¦ã€‘Twitterå……æ–¥è¶Šæ¥è¶Šå¤šçš„è™šå‡ä¿¡æ¯</li><li>ã€å†³ç­–è§’åº¦ã€‘æ”¶è´¹è®¤è¯è¢«æ‰€æœ‰äººåæ§½</li></ol><p>æ‰€ä»¥ï¼Œè¿™æ¬¡é‡‡è®¿ä¸æ˜¯ä¸€ä¸ªæ­Œé¢‚ä¸°åŠŸä¼Ÿç»©çš„ â€œå•å£ç›¸å£°â€ï¼Œè€Œæ›´åƒæ˜¯äº’ç›¸åšå¼ˆçš„ â€œåŒäººå¯¹çº¿â€ï¼Œå¯ä»¥è¯´ç«è¯å‘³åè¶³ã€‚</p><h2 id="é‡‡è®¿æ­£é¢˜">é‡‡è®¿æ­£é¢˜</h2><ul><li><font color="#ef6d3b"><strong>â“BBC: èŠèŠTwitteræ”¶è´­æ¡ˆ</strong></font></li></ul><p>è¿™é‡Œé©¬æ–¯å…‹è°ˆäº†ä¸¤ç‚¹ï¼Œã€1ã€‘ä¸ºä»€ä¹ˆåœæ­¢æ”¶è´­ï¼Œã€2ã€‘å¼ºè°ƒæœ€ç»ˆæ”¶è´­æ˜¯è¿«ä¸å¾—å·²ã€‚</p><blockquote><p>åœ¨è°ˆã€1ã€‘æ—¶ï¼Œé©¬æ–¯å…‹ä¸¾äº†ä¸€ä¸ªéå¸¸å½¢è±¡çš„ä¾‹å­ï¼š</p><ul><li>ä½ æƒ³è´­ä¹°ä¸€è¢‹å¤§ç±³ï¼Œæœ¬æ¥çº¦å®šå…è®¸10%çš„ç±³æ˜¯åçš„ï¼Œæœ€åå‘ç°30%çš„ç±³éƒ½æ˜¯åçš„ã€‚è¿™æ˜¾ç„¶æ— æ³•æ¥å—ã€‚</li></ul></blockquote><ul><li><font color="#ef6d3b"><strong>â“BBCã€è¿›æ”»ä¸‰è¿ã€‘ï¼š1. ä½ è§£é›‡å¤§é‡å‘˜å·¥ï¼Œ2. ä½ è£å‘˜çš„è¡Œä¸ºå¾ˆéšæ„ï¼Œ3. ä½ æ¯«æ— åŒæƒ…å¿ƒ</strong></font></li></ul><p>è¿™é‡Œæœ‰ä¸‰ä¸ªè§‚ç‚¹ï¼Œåˆ†åˆ«æ˜¯ã€äº‹å®ã€‘-&gt;ã€è¡¨è±¡ã€‘-&gt;ã€æ¨æ–­ã€‘ï¼Œå±‚å±‚æ¨è¿›ï¼Œå±‚å±‚è‡´å‘½ã€‚</p><blockquote><p><strong>é©¬æ–¯å…‹çš„å›å¤å¾ˆç»å…¸</strong>ï¼Œå…¶å®æ ¸å¿ƒæ˜¯é©¬ä¿å›½çš„ <strong>æ¥åŒ–å‘</strong> ï¼ˆå¤ªæï¼‰ï¼š</p><ul><li>ã€æ¥ã€‘ï¼šéƒ¨åˆ†è®¤åŒï¼Œä½†ç•™æœ‰ä½™æ—‹ ï¼ˆMuskï¼šç¡®å®è£å‘˜äº†â€¦ï¼‰</li><li>ã€åŒ–ã€‘ï¼šè½¬ç§»åˆ°å¯¹è‡ªå·±æœ‰åˆ©çš„è¯é¢˜ ï¼ˆMuskï¼šå…¬å¸è´¦é¢åªèƒ½4ä¸ªæœˆï¼Œä¸è£å‘˜æ‰€æœ‰äººéƒ½æ­»â€¦ï¼‰</li><li>ã€å‘ã€‘ï¼šç”¨åˆé’»å‡è®¾ï¼Œåé—®å¯¹æ–¹ï¼ˆMuskï¼šæ¢åšä½ æ€ä¹ˆåš? <a href="https://zhuanlan.zhihu.com/p/338604183">æœ‰è½¨ç”µè½¦éš¾é¢˜</a>â€¦ï¼‰</li></ul></blockquote><ul><li><font color="#ef6d3b"><strong>â“BBCã€æ¢è§’åº¦è¿›æ”»ã€‘ï¼šä½ æ˜¯ä¸–ç•Œé¦–å¯Œï¼Œä¸ºä»€ä¹ˆä¸è‡ªå·±æé’±å¸®è‡ªå·±å…¬å¸?</strong></font></li></ul><blockquote><p>è¿™é‡Œé©¬æ–¯å…‹æ²¡æœ‰æŠ€å·§ï¼Œå…¨é <strong>çœŸè¯š+å–æƒ¨</strong>ï¼šæˆ‘è´±å–äº†å¾ˆå¤šç‰¹æ–¯æ‹‰çš„è‚¡ç¥¨æ‰èƒ½ä¹°ä¸‹Twitterï¼ˆåˆ«å†é“å¾·ç»‘æ¶ä¿ºâ€¦ï¼‰</p></blockquote><ul><li><font color="#ef6d3b"><strong>â“BBCã€é—®å¥åŸ‹å‘ã€‘ï¼šä½ æ˜¯å¦åæ‚”è£å‘˜ï¼Ÿ</strong></font></li></ul><p>è¿™æ˜¯è®°è€…ç»å…¸çš„ç–‘é—®åœˆå¥—ï¼Œä¸è®ºå›ç­”æ˜¯å¦éƒ½æ˜¯ä¸‹ç­–ã€‚</p><blockquote><p>å›ç­”æ˜¯ï¼šé©¬æ–¯å…‹è®¤é”™äº†ï¼äº²å£æ‰¿è®¤è£å‘˜ä¸æ˜æ™º<br>å›ç­”å¦ï¼šé©¬æ–¯å…‹å¿ƒç‹ æ‰‹è¾£ï¼è£å‘˜æ¯«æ— æ„§ç–š</p></blockquote><p>å› æ­¤é©¬æ–¯å…‹ç›´æ¥ä¸å›ç­”è¯¥é—®é¢˜ï¼Œè€Œæ˜¯ä¾§é¢è®²äº†ä¸¤ä¸ªè‡ªå·±çš„è§‚ç‚¹ï¼š</p><blockquote><p>ã€1ã€‘å…¬å¸æœ‰è‡ªå·±çš„è¿è½¬è§„å¾‹<br>ã€2ã€‘å–ç‰¹æ–¯æ‹‰è‚¡ç¥¨å¾ˆå›°éš¾ï¼Œå®ƒè¿˜å¯¼è‡´å…¶å¸‚å€¼æš´è·Œï¼ˆå¯»æ±‚å¼±åŠ¿ä½ä½ï¼‰</p><ul><li>ä½†å¦‚æœå…‰è¯´ç¬¬ä¸€ç‚¹è¿˜ä¸å¤Ÿï¼Œå› ä¸ºæ˜¯ <strong>è´±å–è‚¡ç¥¨</strong> è®©é©¬æ–¯å…‹æŠŠè‡ªå·±æ”¾åˆ°äº†ä¸€ä¸ªå¼±åŠ¿åœ°ä½ï¼Œæœ‰æ•ˆé˜»æ­¢è®°è€…ç»§ç»­çº ç¼ ã€‚</li></ul></blockquote><ul><li><font color="#ef6d3b"><strong>â“BBCã€èŠæ”¿æ²»ï¼ŒåŸ‹å‘ã€‘ï¼šTwitterè¢«ä½ æ”¶è´­åè§£å°äº†Trumpï¼Œä»–ä½•æ—¶å›å½’?</strong></font></li></ul><p>æ”¿æ²»æ˜¯æ•æ„Ÿè¯é¢˜ï¼Œåœ¨è¥¿æ–¹ä¹Ÿæ˜¯å¦‚æ­¤ã€‚å› æ­¤é©¬æ–¯å…‹ç›´æˆªäº†å½“åœ°è¯´ <strong>ä¸çŸ¥é“</strong>ã€‚<br>åˆ°è¿™é‡Œè¿˜æ²¡å®Œï¼Œé«˜æ‰‹å‰å®³ä¹‹å¤„å°±æ˜¯ï¼Œ<strong>æŠ“ä½ä»»ä½•æœºä¼šå®£ä¼ è‡ªå·±çš„ä¼ä¸š</strong>ï¼Œäºæ˜¯ä»–è¯´ï¼š</p><blockquote><p>æˆ‘åœ¨é€‰ä¸¾æŠ•äº†Bidenï¼Œä½†è§£å°äº†Trumpï¼Œè¯´æ˜ <strong>Twitteræ˜¯è‡ªç”±å‘å£°çš„åœ°æ–¹</strong></p></blockquote><p>ç‰›é€¼ï¼ä½†BBCä¹Ÿæ˜¯é«˜æ‰‹ï¼Œé¡ºç€è‡ªç”±å‘å£°çš„è¯é¢˜ï¼Œç«‹åˆ»è°ˆåˆ°Twitterçš„ä¸€äº›è´Ÿé¢é—®é¢˜ â†“</p><ul><li><font color="#ef6d3b"><strong>â“BBCã€å¼€å§‹æŠ¨å‡»ã€‘ï¼šTwitterå¼ºè°ƒè¨€è®ºè‡ªç”±ï¼Œæ˜¯å¦åŠ©é•¿é”™è¯¯ä¿¡æ¯ï¼ˆè¨€è®ºï¼‰?</strong></font></li></ul><p>å†ä¸€æ¬¡ç»å…¸çš„ç–‘é—®åœˆå¥—ï¼Œé©¬æ–¯å…‹ä½œä¸ºé«˜æ‰‹ï¼Œè‡ªç„¶ä¸ä¼šè½å…¥ä¿—å¥—ã€‚ä»–ç›´æ¥åé—®è®°è€…ï¼š<strong>è°å®šä¹‰é”™è¯¯ä¿¡æ¯ï¼Ÿ</strong>ï¼Œ<strong>BBCéš¾é“æ²¡æœ‰å‘å¸ƒè¿‡é”™è¯¯ä¿¡æ¯ï¼Ÿ</strong></p><ul><li><font color="#ef6d3b"><strong>â“BBCã€å¼€å§‹æŠ¨å‡»ã€‘ï¼šTwitterè£æ‰æ•´ä¸ªå†…å®¹å®¡æ ¸éƒ¨é—¨ï¼Œæ˜¯å¦åŠ©é•¿ä»‡æ¨è¨€è®º?</strong></font></li></ul><blockquote><p>è¿™é‡Œä»‹ç»ä¸€ä¸ªèƒŒæ™¯ï¼Œå¤§éƒ¨åˆ†çš„ç¤¾äº¤åª’ä½“ï¼Œéƒ½æ˜¯é€šè¿‡äººå·¥ï¼ˆä¸ºä¸»ï¼‰+AIï¼ˆä¸ºè¾…ï¼‰è¿‡æ»¤ä»‡æ¨è¨€è®ºï¼ˆå¦‚æ”¿æ²»ã€å®—æ•™ã€æ³•å¾‹ï¼‰ï¼Œä½†é©¬æ–¯å…‹èƒŒå…¶é“è€Œè¡Œä¹‹ï¼ˆè£æ‰éƒ¨é—¨ï¼‰ã€‚</p></blockquote><p>é©¬æ–¯å…‹ä»ç„¶ <strong>ä»¥åé—®èµ·æ‰‹</strong>ï¼šä»€ä¹ˆæ˜¯ä»‡æ¨è¨€è®ºï¼Ÿä½ ç”¨è¿‡Twitterå§ï¼ˆå¿…ç„¶ç”¨è¿‡ï¼‰ã€‚é‚£ä¸¾ä¸€ä¸ªä½ è§è¿‡çš„ä»‡æ¨è¨€è®ºçš„ä¾‹å­ã€‚</p><blockquote><p>ã€è‹¥è®°è€…ä¸¾äº†ã€‘å¯ä»¥é€ç‚¹åé©³å‡»ç ´ï¼Œå› ä¸ºå¾ˆå¤šä»‡æ¨è¨€è®ºæ˜¯ç‰‡é¢çš„ï¼Œå¦‚LSBTï¼Œä¸”æ²¡æ³•åœ¨å…¬å¼€åœºåˆè¯´<br>ã€è‹¥è®°è€…ä¸ä¸¾ã€‘æ ¹æ® â€œè°ä¸»å¼  è°ä¸¾è¯â€ çš„è§„åˆ™ï¼Œå…¶ä¸æ”»è‡ªç ´</p></blockquote><h2 id="é©¬æ–¯å…‹ä¼ è¾¾çš„è§‚å¿µ">é©¬æ–¯å…‹ä¼ è¾¾çš„è§‚å¿µ</h2><p><strong>ä¿—æ‰‹æ€»æ˜¯å»è¯æ˜è‡ªå·±ï¼Œé«˜æ‰‹å¾€å¾€æ˜¯åœ¨è¡¨è¾¾è‡ªå·±</strong></p><p>æŠ›å¼€è¾©è®ºæŠ€å·§ï¼Œå¤§ä½¬ä¼ è¾¾çš„è§‚å¿µä¹Ÿæ˜¯å€¼å¾—å­¦ä¹ çš„ï¼Œé©¬æ–¯å…‹åœ¨ä¸€ä¸ªå°æ—¶çš„é‡‡è®¿ä¸­ä¸»è¦ä¼ è¾¾äº†è¿™å‡ ä¸ªè§‚ç‚¹:</p><ul><li><p>ã€æ–¹æ³•è®ºã€‘æƒ³ç”Ÿå­˜? é™æœ¬å¢æ•ˆ</p><ul><li>ä¸€æ–¹é¢è£å‘˜ï¼Œä¸€æ–¹é¢è£è®¾å¤‡ï¼ˆè™½ç„¶å¯¼è‡´æœåŠ¡å´©æºƒï¼‰</li><li>æ‹‰å›æ—§çš„å¹¿å‘Šå•†ï¼Œæé«˜æ”¶å…¥</li></ul></li><li><p>ã€æ–¹æ³•è®ºã€‘å¼€æºæ ¸å¿ƒç®—æ³•</p><ul><li>å°±åƒé¤å…æŠŠè‡ªå·±çš„åå¨å…¬å¼€åˆ°å¹•å‰ã€‚</li><li>åªæœ‰å…¬å¼€é€æ˜çš„ç®—æ³•ï¼Œæ‰èƒ½è®©æ°‘ä¼—æ„Ÿåˆ°å®‰å¿ƒï¼ˆå°¤å…¶æ˜¯ç¤¾äº¤é¢†åŸŸï¼‰</li></ul></li><li><p>ã€ä»·å€¼è§‚ã€‘ç¤¾äº¤åª’ä½“çš„æ„ä¹‰</p><ul><li>é©¬æ–¯å…‹ä¸åœ¨ä¹èµšé’±ï¼ˆå‰ææ˜¯ä¼ä¸šèƒ½æ´»ä¸‹å»ï¼‰</li><li>å¥½çš„ç¤¾äº¤åª’ä½“ï¼Œæ˜¯äººä»¬ä¿¡èµ–çš„çœŸç›¸çš„æ¥æºï¼Œä¸”äººä»¬ä¼šè‡ªå‘å»è¯„åˆ¤å’Œè¿½æ±‚äº‹ç‰©çš„çœŸç›¸</li></ul></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;admonition note&quot;&gt;&lt;p class=&quot;admonition-title&quot;&gt;å¯¼è¯»
&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=donC2VuVTtM&quot;&gt;&lt;strong&gt;Youtu</summary>
      
    
    
    
    <category term="åäººè®¿è°ˆ" scheme="http://luhao.wiki/categories/%E5%90%8D%E4%BA%BA%E8%AE%BF%E8%B0%88/"/>
    
    <category term="åäººè®¿è°ˆ" scheme="http://luhao.wiki/categories/%E5%90%8D%E4%BA%BA%E8%AE%BF%E8%B0%88/%E5%90%8D%E4%BA%BA%E8%AE%BF%E8%B0%88/"/>
    
    
  </entry>
  
  <entry>
    <title>ã€C++11ã€‘lvalue &amp; rvalue (references)</title>
    <link href="http://luhao.wiki/posts/rvalue/"/>
    <id>http://luhao.wiki/posts/rvalue/</id>
    <published>2023-08-20T14:53:43.000Z</published>
    <updated>2023-08-20T17:58:30.454Z</updated>
    
    <content type="html"><![CDATA[<p><code>C++</code> å·¦å€¼ã€å³å€¼å¼•ç”¨<span id="more"></span></p><div class="admonition note"><p class="admonition-title">å¯¼è¯»</p><ul><li><a href="https://www.internalpointers.com/post/understanding-meaning-lvalues-and-rvalues-c"><em><strong>Understanding the meaning of lvalues and rvalues in C++</strong></em></a></li><li><a href="https://www.internalpointers.com/post/c-rvalue-references-and-move-semantics-beginners"><em><strong>C++ rvalue references and move semantics for beginners</strong></em></a></li><li><a href="https://www.cprogramming.com/c++11/rvalue-references-and-move-semantics-in-c++11.html"><em><strong>Move semantics and rvalue references in C++11</strong></em></a></li></ul></div><h2 id="å‰è¨€">å‰è¨€</h2><p>ä»æ¥è§¦ã€å­¦ä¹ ã€è¿ç”¨ <code>C++</code> è‡³ä»Šï¼Œå·¦å³å€¼å¼•ç”¨ä¸€ç›´æ˜¯è‡ªå·±å›°æƒ‘çš„ç‚¹ã€‚ä¼´éšç€ç°ä»£C++çš„å‘å±•ï¼Œå®ƒä»¬å¼€å§‹æ‰®æ¼”è¶Šæ¥è¶Šé‡è¦çš„ä½œç”¨ï¼ˆå¦‚ <code>std::move</code>ã€<code>std::remove_reference</code>â€¦ï¼‰ã€‚<br>è¿™ç¯‡äº‰å–å½»åº•ææ‡‚ä»–ä»¬ã€‚</p><p>å…ˆçœ‹ <code>gcc</code> ä¸€ä¸ªç¼–è¯‘æŠ¥é”™ï¼Œä¸ºä»€ä¹ˆ <code>666 = x</code> çš„è¯­æ³•æ˜¯é”™è¯¯çš„ï¼Ÿ<br><em><font color="#FF1E10"><strong>error:</strong></font> lvalue required as left operand of assignment</em></p><p>ç¼–è¯‘å™¨æ˜¯åœ¨è¯´ï¼š<strong>èµ‹å€¼ç¬¦å· <code>=</code> çš„å·¦æ“ä½œæ•°ï¼Œå¿…é¡»æ˜¯å·¦å€¼ <code>lvalue</code> ! æ¢å¥è¯è¯´ï¼Œè¿™é‡Œçš„ <code>666</code> ä¸æ˜¯ä¸€ä¸ªå·¦å€¼ã€‚</strong></p><pre><code class="language-c">int x;666 = x;</code></pre><h2 id="lvalue-rvalue">lvalue &amp; rvalue</h2><p>å¦‚ä½•åŒºåˆ† å·¦å€¼ å’Œ å³å€¼ï¼Ÿ</p><ul><li><strong><code>lvalue</code>ï¼šæŒ‡å‘æ˜ç¡®çš„å†…å­˜åœ°å€</strong>ï¼Œåˆç§° <code>variable</code></li><li><strong><code>rvalue</code>ï¼šæ²¡æœ‰æ˜ç¡®çš„å†…å­˜åœ°å€</strong>ï¼Œåˆç§° <code>literal constant</code></li></ul><p>ä¸‹é¢çœ‹å‡ ä¸ªç¤ºä¾‹ï¼š</p><ul><li><code>int x = 666</code>ï¼š<code>x</code> æ˜¯ <code>lvalue</code>ï¼Œ<code>666</code> æ˜¯ <code>rvalue</code></li><li><code>int* y = &amp;x</code>ï¼š<code>x</code> æ˜¯ <code>lvalue</code>ï¼Œ<code>y</code> æ˜¯ <code>lvalue reference</code></li></ul><p>ç¼–è¯‘è§„åˆ™ï¼Œèµ‹å€¼<code>=</code> å’Œå–åœ°å€<code>&amp;</code> çš„å·¦è¾¹å¿…é¡»æ˜¯ <code>lvalue</code>ï¼Œä¸ç„¶ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ï¼š</p><blockquote><p><em><font color="#FF1E10"><strong>error:</strong></font> lvalue required as left operand of assignment</em><br><em><font color="#FF1E10"><strong>error:</strong></font> lvalue required as unary â€˜&amp;â€™ operand`</em></p></blockquote><div class="admonition warning"><p class="admonition-title">åŒºåˆ† å·¦å€¼ å’Œ å·¦å€¼å¼•ç”¨</p><ul><li><code>int x = 1</code>ï¼šxæ˜¯å·¦å€¼</li><li><code>int&amp; y = x</code>ï¼šyæ˜¯å·¦å€¼å¼•ç”¨</li></ul></div><h2 id="function-reference">function reference</h2><p>å‡½æ•°çš„è¿”å›å€¼å¯ä»¥æ˜¯ å·¦å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯ å³å€¼ã€‚</p><ul><li>å³å€¼ Ã—</li></ul><pre><code class="language-c">int setValue() { return 6; };setValue() = 3; // error: lvalue required as left operand of assignment</code></pre><ul><li>å·¦å€¼ âˆš</li></ul><pre><code class="language-c">int x = 100;int&amp; setValue() { return x; };setValue() = 1;</code></pre><h2 id="lvalue-to-rvalue">lvalue to rvalue</h2><p>å·¦å€¼ ç»å¸¸ä¼šè¢«è½¬åŒ–ä¸º å³å€¼ï¼Œå¦‚ä¸‹ç¤ºä¾‹ï¼š</p><ul><li><code>x, y</code> éƒ½æ˜¯ å·¦å€¼</li><li><code>x + y</code> è¢«è½¬åŒ–ä¸º å³å€¼</li></ul><pre><code class="language-c">int x = 1;int y = 3;int z = x + y;   // ok</code></pre><p>ä¸Šé¢ç»å†äº†ä¸€æ¬¡ <strong>lvalue -&gt; rvalue</strong>  çš„éšå¼è½¬æ¢ï¼Œå¾ˆå¤šæ“ä½œç¬¦ï¼ˆ<code>+, -, /</code>ï¼‰éƒ½ä¼šæä¾›ã€‚</p><h2 id="rvalue-to-lvalue">rvalue to lvalue</h2><p>å³å€¼ åˆ° å·¦å€¼ çš„è½¬æ¢æ˜¯è¢«ç¦æ­¢çš„ï¼Œå¦‚ä¸‹ä»£ç æ˜¯éæ³•çš„ï¼š</p><pre><code class="language-c">int&amp; x = 10;// error: cannot bind non-const lvalue reference of type 'int&amp;' to an rvalue of type 'int'</code></pre><h2 id="rvalue-reference-ğŸ”¥">rvalue reference ğŸ”¥</h2><p>C++ çš„ä¸€æ¡é‡è¦ç¼–è¯‘è§„åˆ™æ˜¯ï¼š<strong>ä½ æ— æ³•ç»‘å®šä¸€ä¸ª å³å€¼ çš„åœ°å€ï¼Œé™¤éç»‘å®šåˆ°ä¸€ä¸ª <code>const</code> ç±»å‹</strong>ï¼Œä¾‹å¦‚ï¼š</p><pre><code class="language-c">int&amp; x = 666; // error: cannot bind non-const lvalue reference of type 'int&amp;' to an rvalue of type 'int'const int&amp; x = 666; // OKstd::string s1 = "Hello ";std::string s2 = "world";const std::string&amp; s3 = s1 + s2;s3 += " luhao";  // error: no match for 'operator+=' (operand types are 'const std::string'</code></pre><p>ä½†æ˜¯ä¸Šé¢çš„å†™æ³•æœ‰ä¸ªå¼Šç«¯ï¼Œ<strong>å³æ— æ³•å†ä¿®æ”¹ <code>s3</code> çš„å€¼</strong>ã€‚<br>ä¸ºäº†èƒ½å¤Ÿä¿®æ”¹å³å€¼ï¼ˆå³ä¸´æ—¶å˜é‡ï¼‰ï¼Œ<code>C++11</code> æ­£å¼å¼•å…¥å³å€¼å¼•ç”¨ï¼ˆ<code>rvalue reference</code>ï¼‰ï¼Œå…¶ç¬¦å·æ˜¯ <code>&amp;&amp;</code>ï¼š</p><pre><code class="language-c">std::string s1 = "Hello ";std::string s2 = "world";std::string&amp;&amp; s3 = s1 + s2;s3 += " luhao"; // OK</code></pre><p>ä¸Šé¢çš„ç¤ºä¾‹çœ‹å‡ºæ¥ç”¨å¤„ä¸å¤§ï¼Œ<strong>å› ä¸º <code>rvalue reference</code> çœŸæ­£å¤§å±•æ‹³è„šçš„åœ°æ–¹ï¼Œæ˜¯åœ¨ ç§»åŠ¨è¯­ä¹‰ï¼ˆ<code>move semantics</code>ï¼‰ã€‚</strong></p><h2 id="move-semantics-ğŸ”¥">move semantics ğŸ”¥</h2><p>é˜…è¯»èµ„æ–™</p><ul><li><a href="https://www.cprogramming.com/c++11/rvalue-references-and-move-semantics-in-c++11.html"><em><strong>Move semantics and rvalue references in C++11</strong></em></a></li></ul><p><strong>ç§»åŠ¨è¯­ä¹‰ æ˜¯ä¸€ç§åˆ©ç”¨å³å€¼å¼•ç”¨çš„æŠ€æœ¯ï¼Œæ¥é¿å…æ‹·è´ä¸´æ—¶å˜é‡çš„ä¼˜åŒ–æ‰‹æ®µã€‚</strong></p><h3 id="ä¸ºä»€ä¹ˆéœ€è¦-move-semantics-ğŸ’¡">ä¸ºä»€ä¹ˆéœ€è¦ move semantics? ğŸ’¡</h3><p>å‡è®¾ <code>class Holder</code> æ˜¯ä¸€ä¸ª(å†…å­˜)éå¸¸ç¹é‡çš„ç±»ï¼Œè€ƒè™‘åˆ°å¦‚ä¸‹çš„æ„é€ å’Œæ‹·è´æ„é€ å‡½æ•°ã€‚<br>å½“è°ƒç”¨ <code>Holder h1(h)</code> æ—¶ï¼Œå› ä¸º <code>std::copy</code> é€ æˆå·¨å¤§çš„å†…å­˜æ‹·è´å¼€é”€ï¼Œå¦‚æœåæ–‡ä¸­ <code>h</code> ä¹Ÿä¸å†ç»§ç»­ä½¿ç”¨ï¼Œä¸ºä»€ä¹ˆä¸å°è¯•å°† <code>h</code> è½¬äº¤ç»™ <code>h1</code> å‘¢?</p><pre><code class="language-c">class Holder{public:    Holder(int size) {        m_data = new int[size];        m_size = size;    }    Holder(const Holder&amp; other)    {        m_data = new int[other.m_size];        std::copy(other.m_data, other.m_data + other.m_size, m_data);        m_size = other.m_size;    }    ~Holder() { delete[] m_data; }private:    int*   m_data;    size_t m_size;}int main(){    Holder h(10000);    Holder h1(h); // è°ƒç”¨ std::copy å¸¦æ¥éå¿…è¦å¼€é”€    return 1;}</code></pre><p>å€ŸåŠ©ç§»åŠ¨è¯­ä¹‰ï¼Œå¯ä»¥ä¼˜åŒ–æ‰ä¸Šé¢çš„æ‹·è´ã€‚æ³¨æ„åˆ°ä¸‹é¢ä½¿ç”¨äº† <a href="#std-move"><em><strong>std::move</strong></em></a>ï¼Œå®ƒèƒ½å°†å·¦å€¼è½¬åŒ–ä¸ºå³å€¼ï¼Œæ˜¯C++æ ‡å‡†åº“çš„æˆå‘˜å‡½æ•°ï¼Œåé¢æœ‰ä»‹ç»ã€‚</p><pre><code class="language-c">Holder(Holder&amp;&amp; other){    // èµ‹å€¼    m_data = other.m_data;    m_size = other.m_size;    // æ¸…ç©ºotherçš„çŠ¶æ€    other.m_data = nullptr;    other.m_size = 0;}int main(){    Holder h(10000);    Holder h1(std::move(h));    return 1;}</code></pre><h3 id="std-move">std::move</h3><p>é˜…è¯»ææ–™ï¼š</p><ul><li><a href="https://en.cppreference.com/w/cpp/utility/move"><em>cppreference</em></a></li><li><a href="https://gcc.gnu.org/onlinedocs/libstdc++/libstdc++-api-4.5/a00936_source.html"><em>libstdc++: move.h</em></a></li></ul><p>é˜…è¯» <code>std::move</code> çš„æºç ï¼Œå…¶å®åªæ˜¯ä½œäº†ç±»å‹è½¬åŒ–ï¼Œå°† ä»»æ„å½¢å¼çš„<code>_Tp</code> è½¬åŒ–æˆå³å€¼:</p><ul><li><code>std::remove_reference</code>ï¼šå»æ‰å¼•ç”¨</li><li><code>static_cast</code>ï¼šéšå¼è½¬æ¢</li></ul><div class="admonition note"><p class="admonition-title">std::move</p><ul><li><code>move</code> å³å€¼ï¼šç›´æ¥è¿”å›</li><li><code>move</code> å·¦å€¼ï¼šè½¬æˆå³å€¼ï¼Œå¹¶è¿”å›</li></ul></div><pre><code class="language-c">  /**   *  @brief  Convert a value to an rvalue.   *  @param  __t  A thing of arbitrary type.   *  @return The parameter cast to an rvalue-reference to allow moving it.  */  template&lt;typename _Tp&gt;    constexpr typename std::remove_reference&lt;_Tp&gt;::type&amp;&amp;    move(_Tp&amp;&amp; __t) noexcept    { return static_cast&lt;typename std::remove_reference&lt;_Tp&gt;::type&amp;&amp;&gt;(__t); }</code></pre><h3 id="std-remove-reference">std::remove_reference</h3><p><code>remove_reference</code> é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å»é™¤ä»»æ„ç±»å‹çš„å¼•ç”¨ï¼Œå€ŸåŠ©æ¨¡æ¿å®ç°ã€‚<br>æ ¸å¿ƒæ˜¯å¯¹äº <code>_Tp&amp;</code> å’Œ <code>_Tp&amp;&amp;</code> è¿™ä¸¤ç§å¸¦å¼•ç”¨çš„ä¼ å‚ï¼Œéœ€è¦å»æ‰å…¶å¼•ç”¨çš„éƒ¨åˆ†ï¼Œåªè·å–å…¶ç±»å‹ï¼ˆé€šè¿‡ <code>::type</code> è·å–ï¼‰</p><pre><code class="language-c">  template&lt;typename _Tp&gt;    struct remove_reference    { typedef _Tp   type; };  // ç‰¹åŒ–  template&lt;typename _Tp&gt;    struct remove_reference&lt;_Tp&amp;&gt;    { typedef _Tp   type; };  // ç‰¹åŒ–  template&lt;typename _Tp&gt;    struct remove_reference&lt;_Tp&amp;&amp;&gt;    { typedef _Tp   type; };</code></pre>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;code&gt;C++&lt;/code&gt; å·¦å€¼ã€å³å€¼å¼•ç”¨&lt;/p&gt;</summary>
    
    
    
    <category term="C++" scheme="http://luhao.wiki/categories/C/"/>
    
    <category term="C++" scheme="http://luhao.wiki/categories/C/C/"/>
    
    
    <category term="C++" scheme="http://luhao.wiki/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>ã€C++17ã€‘refl-cpp</title>
    <link href="http://luhao.wiki/posts/refl-cpp/"/>
    <id>http://luhao.wiki/posts/refl-cpp/</id>
    <published>2023-08-17T16:27:58.000Z</published>
    <updated>2023-08-20T13:40:16.985Z</updated>
    
    <content type="html"><![CDATA[<p>å“è¯»<code>C++</code>ç»å…¸åå°„åº“<span id="more"></span></p><div class="admonition note"><p class="admonition-title">å¯¼è¯»</p><ul><li>æºç ï¼š<a href="https://github.com/veselink1/refl-cpp"><em><strong>veselink1/refl-cpp</strong></em></a></li><li>blogï¼š<a href="https://veselink1.github.io/blog/cpp/metaprogramming/2019/07/13/refl-cpp-deep-dive.html"><em>refl-cpp â€” A deep dive into this compile-time reflection library for C++</em></a></li><li>è¿™ç¯‡åšå®¢å¤§è‡´æ˜¯è‹±æ–‡ç‰ˆçš„ ç›´è¯‘ + è‡ªå·±ç†è§£ï¼Œæ—¨åœ¨æé«˜å¯¹ <code>templates</code> + <code>reflections</code> çš„æŒæ¡</li><li>ç²¾è¯»blog âœ ç†è§£æºç  âœ ä¸Šæ‰‹ä»¿é€ </li></ul></div><h2 id="ç›®å½•">ç›®å½•</h2><ul><li><a href="#%E5%89%8D%E8%A8%80">å‰è¨€</a></li><li><a href="#compile-time%E5%8F%8D%E5%B0%84">compile-timeåå°„</a></li><li><a href="#%E6%9E%84%E5%BB%BA%E7%B1%BB%E7%9A%84%E6%88%90%E5%91%98">æ„å»ºç±»çš„æˆå‘˜</a></li><li><a href="#%E4%BD%BF%E7%94%A8-macros-%E7%BB%84%E7%BB%87%E4%BB%A3%E7%A0%81">ä½¿ç”¨ <code>macros</code> ç»„ç»‡ä»£ç </a></li><li><a href="#%E5%87%BD%E6%95%B0%E5%8F%8D%E5%B0%84">å‡½æ•°åå°„</a></li><li><a href="#%E9%81%8D%E5%8E%86%E7%B1%BB%E7%9A%84%E6%88%90%E5%91%98">éå†ç±»çš„æˆå‘˜</a></li></ul><h2 id="å‰è¨€">å‰è¨€</h2><p><code>refl-cpp</code> çš„è®¾è®¡åˆè¡·æ˜¯ï¼š</p><ul><li>æ”¯æŒ åœ¨ <strong><code>C++17</code></strong> åŠæ›´é«˜ç‰ˆæœ¬ <strong>æä¾›ç¼–è¯‘æœŸåå°„ï¼ˆCompile-timeï¼‰</strong> çš„æ–¹æ³•ã€‚</li><li>æ”¯æŒ <code>enumeration</code>ï¼Œ<code>introspection</code><ul><li><code>enumeration</code>ï¼šç±»ä¼¼ <code>Python dir()</code> æšä¸¾å¯¹è±¡æ‰€æœ‰çš„å±æ€§</li><li><code>introsection</code>ï¼šç±»ä¼¼ <code>Python getattr</code> è®¿é—®å¯¹è±¡çš„æŒ‡å®šå±æ€§</li></ul></li><li>æ”¯æŒ ç±»å‹æ¨¡æ¿ã€æˆå‘˜æ¨¡æ¿</li><li>æ”¯æŒ <code>attributes</code> <font color="#FF1E10"><strong>TODO</strong></font></li></ul><p><code>refl-cpp</code> çš„è®¾è®¡é¿å…å¦‚ä¸‹ï¼š</p><ul><li>é¿å… ä½¿ç”¨å®é­”æ³•</li><li>é¿å… <code>Private</code> ç§æœ‰æˆå‘˜çš„åå°„</li><li>é¿å… è¿è¡Œæ—¶ æŒ‰åç§°æŸ¥è¯¢ç±»å‹ä¿¡æ¯</li></ul><h2 id="compile-timeåå°„">compile-timeåå°„</h2><p>é¦–å…ˆ <code>refl-cpp</code> æ˜¯ä¸€ä¸ª <code>compile-time</code> çš„åå°„åº“ï¼Œè¿™æ„å‘³ç€å®ƒä¸ä¼šç»´æŠ¤ä¸€ä¸ª runtime çš„æ•°æ®ç»“æ„æ¥å®ç°åå°„ç›®çš„ï¼Œä¾‹å¦‚ä¸‹é¢æ˜¯ä¸å¯å–çš„ï¼š</p><pre><code class="language-c">struct TypeInfo {    std::string name;           // å¯¹è±¡çš„ç±»å‹åç§°    std::vector&lt;?&gt; members;     // å¯¹è±¡çš„æ‰€æœ‰æˆå‘˜    std::vector&lt;?&gt; attributes;  // å¯¹è±¡çš„æ‰€æœ‰æˆå‘˜å–å€¼}// â†“ ç»´æŠ¤ä¸€ä¸ªå…¨å±€çš„åå°„æ•°æ®ç»“æ„std::unordered_map&lt;std::string, TypeInfo&gt; s_typeRegistry;</code></pre><p>ç›¸åï¼Œ<code>refl-cpp</code> çš„åšæ³•æ˜¯ï¼Œé€šè¿‡ cppæ¨¡æ¿ç‰¹åŒ– ä»¥ä¸€ç§ç±»ç›¸å…³çš„æ–¹å¼ï¼ˆ<code>type-dependent</code>ï¼‰æ¥å­˜å‚¨ <code>metadata</code>ï¼Œä¾‹å¦‚ä¸‹é¢çš„åšæ³•ï¼š</p><pre><code class="language-c">template &lt;typename&gt; struct TypeInfo {};// â†“ Pointç±»çš„ç¼–è¯‘æœŸä¿¡æ¯template &lt;&gt;struct TypeInfo&lt;Point&gt; {  static constexpr char name[] = "Point";  ??? members = {};  ??? attributes = {};};</code></pre><h2 id="æ„å»ºç±»çš„æˆå‘˜">æ„å»ºç±»çš„æˆå‘˜</h2><p>ä¸Šä¸€èŠ‚æä¾›äº†å­˜å‚¨ ç±»ä¿¡æ¯ çš„æ–¹æ³•ï¼Œä½†æ˜¯å¦‚ä½•å­˜å‚¨ å…¶æˆå‘˜å˜é‡ï¼ˆå’Œæ–¹æ³•ï¼‰å‘¢ï¼Ÿ<br><code>refl-cpp</code> ä½¿ç”¨ä¸€ç§æ–°é¢–çš„æ–¹å¼æ¥å­˜å‚¨ï¼š</p><pre><code class="language-c">template &lt;size_t N&gt;struct MemberInfo;/* ç¬¬0ä¸ªæˆå‘˜çš„æ¨¡æ¿ç‰¹åŒ– */template &lt;&gt;struct MemberInfo&lt;0&gt; {  /* ... */};/* ç¬¬1ä¸ªæˆå‘˜çš„æ¨¡æ¿ç‰¹åŒ– */template &lt;&gt;struct MemberInfo&lt;1&gt; {  /* ... */};static constexpr size_t MemberCount = 2;</code></pre><p><code>MemberInfo</code> æ˜¯ç±»æˆå‘˜çš„æ¨¡æ¿ç‰¹åŒ–ï¼Œå› æ­¤å°†å…¶æ·»åŠ åˆ° <code>TypeInfo</code> çš„ä½œç”¨åŸŸï¼ˆå¦‚ä¸‹ï¼‰ã€‚<br><code>typename Dummy</code> æ˜¯å› ä¸ºC++ä¸å…è®¸æˆå‘˜å®Œå…¨æ¨¡æ¿ç‰¹åŒ–ï¼Œè€Œéƒ¨åˆ†æˆå‘˜çš„æ¨¡æ¿ç‰¹åŒ–æ˜¯å…è®¸çš„ã€‚<font color="#FF1E10"><strong>TODO</strong></font></p><pre><code class="language-c">template &lt;&gt;struct TypeInfo&lt;Point&gt; {  template &lt;size_t N, typename Dummy&gt;  struct MemberInfo;  /* ç¬¬0ä¸ªæˆå‘˜çš„æ¨¡æ¿ç‰¹åŒ– */  template &lt;typename Dummy&gt;  struct MemberInfo&lt;0&gt; {    /* ... */  };  /* ç¬¬1ä¸ªæˆå‘˜çš„æ¨¡æ¿ç‰¹åŒ– */  template &lt;typename Dummy&gt;  struct MemberInfo&lt;1&gt; {    /* ... */  };  static constexpr size_t MemberCount = 2;};</code></pre><h2 id="ä½¿ç”¨-macros-ç»„ç»‡ä»£ç ">ä½¿ç”¨ <code>macros</code> ç»„ç»‡ä»£ç </h2><p>ä¸Šä¸€èŠ‚æä¾›äº†ç²—ç•¥çš„ ç±» + ç±»æˆå‘˜ çš„åå°„æ–¹æ¡ˆï¼Œé‚£ä¹ˆå¦‚ä½•å£°æ˜å®ƒä»¬å‘¢ï¼Ÿ<br>ç­”æ¡ˆæ˜¯å€ŸåŠ© <code>macros</code> å®ç°ï¼ˆä½œè€…ä¸æ˜¯ä¸å»ºè®®ä½¿ç”¨å®ä¹ˆğŸ˜‚â€¦ï¼‰</p><ul><li><code>__COUNTER__</code> æ˜¯éæ ‡å‡†åº“çš„å®ï¼Œæ¯æ¬¡è°ƒç”¨å¢åŠ <code>1</code>ï¼Œä¸”ä»<code>0</code>å¼€å§‹</li><li>å®å±•å¼€åçš„ä»£ç ï¼Œå¯çœ‹ç¤ºä¾‹ï¼š<a href="https://gist.github.com/veselink1/f4e2fa94bda0514631753f13a9b93f9b"><em>refl-cpp-deep-dive-5-generated.cpp</em></a></li><li>å¦å¤–æ¯ä¸ª <code>TypeInfo</code> å’Œ <code>MemberInfo</code> è¿˜åº”è¯¥åŒ…å«å¦‚ä¸‹å†…å®¹ï¼š<ul><li><code>static constexpr char name[] = â€¦</code></li><li><code>static constexpr std::tuple&lt;â€¦&gt; attributes = {â€¦}</code></li><li><code>static constexpr auto* pointer = &amp;Type::MemberName</code></li></ul></li></ul><pre><code class="language-c">template &lt;typename T&gt;struct TypeInfo {};#define REFLECT_TYPE(TypeName) \  template&lt;&gt; struct TypeInfo&lt;TypeName&gt; { \    template &lt;size_t, typename&gt; struct MemberInfo; \    static constexpr size_t MemberIndexOffset = __COUNTER__ + 1; #define REFLECT_FIELD(FieldName) \  template &lt;typename Dummy&gt; struct MemberInfo&lt;__COUNTER__ - MemberIndexOffset&gt; \  {}; \#define REFLECT_END \    static constexpr size_t MemberCount = __COUNTER__ - MemberIndexOffset; \  };// Usage:REFLECT_TYPE(Point)   REFLECT_FIELD(x)   REFLECT_FIELD(y)REFLECT_END</code></pre><div class="admonition note"><p class="admonition-title">Tips: å€ŸåŠ© VisualStudio æŸ¥çœ‹å®å±•å¼€</p><ul><li>é¼ æ ‡æ‚¬åœåœ¨å®ä¸Šï¼Œç‚¹å‡» <code>Expand Inline</code><img src="/images/vs-macros-expand.png" alt=""></li></ul></div><h2 id="å‡½æ•°åå°„">å‡½æ•°åå°„</h2><p><code>refl-cpp</code> è¿˜æä¾›åå°„å‡½æ•°çš„åŠŸèƒ½ã€‚</p><p>ä¸ºäº†åŒºåˆ†æˆå‘˜ï¼ˆæ˜¯å˜é‡è¿˜æ˜¯æ–¹æ³•ï¼‰ï¼Œæ¯ä¸ª <code>MemberInfo</code> æœ‰ä¸€ä¸ªå…¬å…±çš„ <code>typedef</code>ï¼Œå®ƒç­‰åŒäº <code>refl::members::field</code> å’Œ <code>refl::members::function</code> ä¸¤è€…ä¹‹ä¸€ã€‚è€Œè€ƒè™‘åˆ° å‡½æ•°çš„é‡è½½å’Œæ¨¡æ¿ï¼Œè¿™éƒ¨åˆ†åŠŸèƒ½ï¼ˆç›¸å¯¹äºåå°„æˆå‘˜ï¼‰ä¼šæ›´åŠ å¤æ‚ã€‚</p><p><code>refl-cpp</code> é€šè¿‡å¦‚ä¸‹æ–¹æ³•ï¼š<font color="#FF1E10"><strong>TODO</strong></font></p><pre><code class="language-c">template &lt;typename R, typename... Args&gt;auto resolve(R(*fn)(Args...), Args&amp;&amp;... args) -&gt; decltype(fn);/*   Imagine 12 more overloads of resolve for different pointer-to-member   combinations (plain, &amp;, &amp;&amp;, const, volatile qualifiers)*/template &lt;typename... Args&gt;static constexpr decltype(detail::resolve(&amp;Type::MemberName, std::declval&lt;Args&gt;()...)) pointer { &amp;Type::MemberName };</code></pre><p>â†‘ ä¸Šé¢è¿™æ®µä»£ç ç†è§£èµ·æ¥è¾ƒä¸ºå›°éš¾ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶åŠŸèƒ½æ‹†è§£ä¸€ä¸‹ï¼Œå®ƒæ˜¯ä¸ºäº†è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ</p><p>æƒ³è±¡ç±»å‹ <code>A</code> å…·æœ‰ä¸¤ä¸ªå‡½æ•°é‡è½½ï¼š</p><ul><li><code>f(int)</code></li><li><code>f(const std::string)</code></li></ul><p>å½“æ‹¥æœ‰ä¸€ä¸ªæŒ‡å‘fçš„å‡½æ•°æŒ‡é’ˆï¼ˆ<code>&amp;f</code>ï¼‰æ—¶ï¼Œç¼–è¯‘å™¨æ€ä¹ˆçŸ¥é“è°ƒç”¨å“ªä¸ªï¼Ÿ<br><code>refl-cpp</code> å®é™…ä¼šå¸®åŠ©ç¼–è¯‘å™¨ æ¨å¯¼å‡ºæ­£ç¡®çš„é‡è½½å‡½æ•°ï¼ˆé€šè¿‡å°† <code>&amp;f</code> ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°çš„æ–¹å¼ï¼Œæ¥ç›´æ¥è§¦å‘å‡½æ•°ï¼‰ã€‚<br><code>resolve</code> æ²¡æœ‰ä»»ä½•å®šä¹‰ï¼Œå®ƒåªæ˜¯ä¸€ä¸ª <code>prototype</code>ï¼Œä½œç”¨æ˜¯ä½œä¸ºç¼–è¯‘å™¨çš„ä¸€ä¸ªæç¤ºã€‚</p><p>è¿™ç§æ–¹æ³•æ€»ç»“èµ·æ¥æ˜¯ï¼š<strong>ä¼ é€’å‡½æ•°æ€§è´¨çš„å‚æ•°ï¼ˆç”± <code>std::decalval</code> äº§ç”Ÿï¼‰</strong>ã€‚å®ƒçš„å¥½å¤„æ˜¯ï¼šæ‰€æœ‰çš„å‚æ•°ç±»å‹è½¬æ¢éƒ½é€‚ç”¨ï¼Œå³æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>MemberInfo&lt;?&gt;::pointer&lt;int&gt;</code> å¹¶å¾—åˆ°ä¸€ä¸ª <code>void(*)(long)</code> ç±»å‹çš„æŒ‡é’ˆä½œä¸ºç»“æœã€‚</p><h2 id="éå†ç±»çš„æˆå‘˜">éå†ç±»çš„æˆå‘˜</h2><p>å‰é¢è®²äº†å¦‚ä½•åˆ›å»ºå’Œå­˜å‚¨ç±»æˆå‘˜çš„ <code>metadata</code>ï¼Œè¿™èŠ‚ä»‹ç»å¦‚ä½•éå†å®ƒä»¬ï¼ˆ<code>compile-time</code>ï¼‰ã€‚<br>æ ¸å¿ƒæ€æƒ³æ˜¯ å€ŸåŠ©å¯å˜å‚æ•°æ¨¡æ¿ï¼Œåˆ›å»ºä¸€ä¸ª <code>TypeList</code> çš„ç±»å‹æˆå‘˜åˆ—è¡¨ï¼Œå¹¶æä¾›æšä¸¾çš„æ–¹æ³•ã€‚</p><pre><code class="language-c">template &lt;typename... Ts&gt;struct TypeList {};</code></pre><p>!!! NOTE è¿™å—è®²çš„ä¸æ˜¯å¾ˆç»†ï¼Œæ²¡ææ‡‚â€¦</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;å“è¯»&lt;code&gt;C++&lt;/code&gt;ç»å…¸åå°„åº“&lt;/p&gt;</summary>
    
    
    
    <category term="C++" scheme="http://luhao.wiki/categories/C/"/>
    
    <category term="C++" scheme="http://luhao.wiki/categories/C/C/"/>
    
    
    <category term="C++" scheme="http://luhao.wiki/tags/C/"/>
    
    <category term="Python" scheme="http://luhao.wiki/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>ã€cppã€‘Templates</title>
    <link href="http://luhao.wiki/posts/templates/"/>
    <id>http://luhao.wiki/posts/templates/</id>
    <published>2023-08-13T17:47:03.000Z</published>
    <updated>2023-08-30T17:19:34.685Z</updated>
    
    <content type="html"><![CDATA[<p>C++æ¨¡æ¿ã€meta-programming<span id="more"></span></p><div class="markmap-container" style="height:300px">  <svg data="{&quot;t&quot;:&quot;root&quot;,&quot;d&quot;:0,&quot;v&quot;:&quot;&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[0,1]},&quot;v&quot;:&quot;Function Templates&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[1,2]},&quot;v&quot;:&quot;<a href=\&quot;#æ¨¡æ¿åŸºç¡€\&quot;>æ¨¡æ¿åŸºç¡€</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[2,3]},&quot;v&quot;:&quot;<a href=\&quot;#ç¼–è¯‘æ£€æŸ¥\&quot;>ç¼–è¯‘æ£€æŸ¥</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[3,4]},&quot;v&quot;:&quot;<a href=\&quot;#å‚æ•°æ¨å¯¼\&quot;>å‚æ•°æ¨å¯¼</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[4,5]},&quot;v&quot;:&quot;<a href=\&quot;#å¤šå‚æ•°\&quot;>å¤šå‚æ•°</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[5,6]},&quot;v&quot;:&quot;<a href=\&quot;#å‡½æ•°é‡è½½\&quot;>å‡½æ•°é‡è½½</a>&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[6,7]},&quot;v&quot;:&quot;Class Templates&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[7,8]},&quot;v&quot;:&quot;<a href=\&quot;#æ¨¡æ¿ç‰¹åŒ–\&quot;>æ¨¡æ¿ç‰¹åŒ–</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[8,9]},&quot;v&quot;:&quot;åç‰¹åŒ–&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[9,10]},&quot;v&quot;:&quot;<a href=\&quot;#æ¨¡æ¿ç‰¹åŒ–-ä»£ç ç¤ºä¾‹\&quot;>ä»£ç ç¤ºä¾‹</a>&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[10,11]},&quot;v&quot;:&quot;SFINAE <font color=#FF1E10><strong>TODO</strong></font>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[11,12]},&quot;v&quot;:&quot;std&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[12,13]},&quot;v&quot;:&quot;<a href=\&quot;#â­std-max\&quot;>std::max</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[13,14]},&quot;v&quot;:&quot;<a href=\&quot;#â­std-pair\&quot;>std::pair</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[14,15]},&quot;v&quot;:&quot;<a href=\&quot;#â­type-traits\&quot;>type_traits::is_integral</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[15,16]},&quot;v&quot;:&quot;<a href=\&quot;/posts/rvalue/#std-move\&quot;>std::move</a>&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[16,17]},&quot;v&quot;:&quot;åå°„ <font color=#FF1E10>&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[17,18]},&quot;v&quot;:&quot;<a href=\&quot;/posts/refl-cpp/\&quot;>refl-cpp</a>&quot;}]}],&quot;p&quot;:{}}"></svg></div><h2 id="Function-Templates">Function Templates</h2><h3 id="æ¨¡æ¿åŸºç¡€">æ¨¡æ¿åŸºç¡€</h3><p>ä¸‹é¢æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„å‡½æ•°æ¨¡æ¿ç¤ºä¾‹ï¼š</p><pre><code class="language-c">template &lt;typename T&gt;T max (T a, T b){    return b &lt; a ? a : b;}</code></pre><ul><li><code>T</code> æ˜¯å®šä¹‰ç±»å‹çš„å˜é‡ï¼Œå®ƒå¯ä»¥æ˜¯ <code>int</code>ã€<code>float</code>ã€ä»»ä½•classâ€¦</li><li><code>typename</code> æ˜¯å…³é”®å­—ï¼Œ<code>template&lt;class T&gt;</code> æ˜¯å…¼å®¹ C++98 çš„ä¸€ç§æ­£ç¡®å†™æ³•</li><li>ä¸Šé¢æœ‰ä¸¤ä¸ªæ½œåœ¨çº¦æŸï¼š1. <code>T</code>å¿…é¡»æ”¯æŒ<code>&lt;</code>æ“ä½œç¬¦ï¼Œ2. <code>T</code>å¿…é¡»æ”¯æŒæ‹·è´æ„é€ å‡½æ•°ï¼Œä¸ºäº†<code>return</code></li></ul><p>ä¸‹é¢æ˜¯ç®€å•çš„æ¨¡æ¿ä½¿ç”¨å®ä¾‹ï¼š</p><pre><code class="language-c">::max(7, 8);          // 8::max(1.2, 1.5);      // 1.5::max("abc", "abcd"); // abcd</code></pre><p>å½“è°ƒç”¨ä¸Šè€…æ—¶ï¼Œæ¨¡æ¿ä¼šè‡ªåŠ¨å®ä¾‹åŒ–ä¸ºï¼š</p><pre><code>int max(int, int);double max(double, double);char const* max(char const*, char const*);</code></pre><h3 id="ç¼–è¯‘æ£€æŸ¥">ç¼–è¯‘æ£€æŸ¥</h3><p>æ¨¡æ¿çš„ç¼–è¯‘æ£€æŸ¥åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼ˆ<code>Two-Phase Translation</code>ï¼‰</p><ul><li>å®šä¹‰é˜¶æ®µ</li><li>å®ä¾‹åŒ–é˜¶æ®µ</li></ul><pre><code class="language-c">template &lt;typename T&gt;void foo(T t){    undeclared(); // æœªå®šä¹‰å‡½æ•°ï¼Œå®šä¹‰é˜¶æ®µæŠ¥é”™    undeclared(t); // å¼•ç”¨äº†Tï¼Œæ‰€ä»¥å®ä¾‹åŒ–é˜¶æ®µæ‰æŠ¥é”™}</code></pre><h3 id="å‚æ•°æ¨å¯¼">å‚æ•°æ¨å¯¼</h3><p>ç¼–è¯‘å™¨ä¼šæ ¹æ®ä¼ å…¥å‚æ•°çš„ç±»å‹ï¼Œè‡ªåŠ¨æ¨å¯¼ <code>T</code> çš„å–å€¼</p><ul><li>è‹¥å¼•ç”¨ä¼ é€’ï¼šä¸å…è®¸ç±»å‹è½¬åŒ–</li><li>è‹¥å€¼ä¼ é€’ï¼šåªå…è®¸é€€åŒ–ï¼ˆ<code>decay</code>ï¼‰ï¼Œ<code>const</code>å’Œ<code>volatile</code>ä¼šè¢«å¿½ç•¥ã€‚å¼•ç”¨ä¼šè¢«è½¬åŒ–æˆå¼•ç”¨çš„ç±»å‹ã€‚</li></ul><pre><code class="language-c">int const c = 42;int i = 1;::max(i, c); // OK: (int, int)::max(c, c); // OK: (int, int)int&amp; ir = i;::max(i, ir); // OK: (int, int)int arr[4];::max(&amp;i, arr); // OK: (int*, int*)</code></pre><h3 id="å¤šå‚æ•°">å¤šå‚æ•°</h3><p>æ¨¡æ¿å…è®¸å®šä¹‰å¤šç»„ä¸åŒçš„å‚æ•°ï¼Œä»¥å¦‚ä¸‹å‡½æ•°ç¤ºä¾‹ï¼Œå…¶<strong>è¿”å›å€¼çš„ç±»å‹æ˜¯ä¸ç¡®å®šçš„</strong>ï¼š</p><pre><code class="language-c">template&lt;typename T1, typename T2&gt;T1 max (T1 a, T2 b){    return b &lt; a ? a : b;}</code></pre><ul><li><font color="#ef6d3b"><strong>è¿”å›ç±»å‹æ¨æ–­</strong></font></li></ul><p>ä»<code>C++14</code>å¼€å§‹ï¼Œå…è®¸ä½¿ç”¨ <code>auto</code> å£°æ˜å‡½æ•°çš„è¿”å›å€¼ï¼Œå³è®©ç¼–è¯‘å™¨è‡ªå·±å†³å®šã€‚</p><pre><code class="language-c">template&lt;typename T1, typename T2&gt;auto max (T1 a, T2 b){    return b &lt; a ? a : b;}</code></pre><p>åœ¨<code>C++11</code>ä¸­ï¼Œ<code>auto</code>å¿…é¡»é…åˆ <code>trailing return type</code> ä½¿ç”¨ï¼Œå¦åˆ™ç¼–è¯‘æŠ¥é”™å¦‚ä¸‹ï¼š</p><div class="admonition error"><p class="admonition-title">error: 'xxx' function uses 'auto' type specifier without trailing return type</p></div><pre><code class="language-c">template&lt;typename T1, typename T2&gt;auto max (T1 a, T2 b) -&gt; decltype(b&lt;a?a:b);</code></pre><ul><li><font color="#ef6d3b"><strong>ç±»å‹èƒå–</strong></font></li></ul><pre><code class="language-c">#include &lt;type_traits&gt;template&lt;typename T1, typename T2&gt;std::common_type_t&lt;T1,T2&gt; max (T1 a, T2 b)</code></pre><div class="admonition note"><p class="admonition-title">Trick: C++å¦‚ä½•è·å–å˜é‡xçš„ç±»å‹?</p><ul><li><code>#include &lt;typeinfo&gt;</code></li><li><code>typeid(x).name()</code></li></ul></div><h2 id="Class-Templates">Class Templates</h2><h3 id="æ¨¡æ¿ç‰¹åŒ–">æ¨¡æ¿ç‰¹åŒ–</h3><ul><li>è¿™ç¯‡ä¸­æ–‡èµ„æ–™è¯´å¾—é€šä¿—æ˜“æ‡‚ï¼š<a href="https://sg-first.gitbooks.io/cpp-template-tutorial/content/jie_te_hua_yu_pian_te_hua.html"><em><strong>æ·±å…¥ç†è§£ç‰¹åŒ–ä¸åç‰¹åŒ–</strong></em></a></li><li>æºç  æ¨èé˜…è¯»ï¼š <a href="#%E2%AD%90type-traits"><em><strong>type_traits</strong></em></a></li></ul><p>æ¨¡æ¿ç‰¹åŒ–çš„ä½œç”¨æ˜¯ï¼Œ<strong>é’ˆå¯¹æ¨¡æ¿çš„å‚æ•°ç±»å‹ï¼Œä»è€Œå®šä¹‰ä¸åŒçš„å®ç°</strong>ã€‚<br><font color="#ef6d3b"><strong>åªè¦ä½ æ•™å¾—å¥½ï¼Œå®ƒå¯ä»¥ â€œè§äººè¯´äººè¯ï¼Œè§é¬¼è¯´é¬¼è¯â€</strong></font><br>ï¼ˆæœ‰ç‚¹ç±»ä¼¼ å‡½æ•°é‡è½½ å’Œ è™šå‡½æ•°ç»§æ‰¿ çš„æ€æƒ³ï¼‰</p><p>æ¨¡æ¿ç‰¹åŒ–å®ç°æ€è·¯æ˜¯ï¼š</p><ul><li>å…ˆå®šä¹‰åŸºæœ¬æ¨¡æ¿ï¼ˆèƒ½è¯´è¯ï¼‰</li><li>å†é’ˆå¯¹æ¯ç§å‚æ•°å®ç°ç‰¹ä¾‹ï¼ˆèƒ½è§äººä¸‹èœç¢Ÿï¼‰</li></ul><p>ä¸‹é¢ä»¿ç…§ <code>Python</code> å®ç° <code>C++</code> çš„ <code>type</code> å‡½æ•°:</p><pre><code class="language-c">#include &lt;iostream&gt;#include &lt;string&gt;using namespace std;template&lt;typename T&gt;class TypeId{public:    static constexpr char const* type = "NULL";    TypeId(T t) {}};template&lt;&gt;class TypeId&lt;int&gt;{public:    static constexpr char const* type = "INT";    TypeId(int t) {}};template&lt;&gt;class TypeId&lt;std::string&gt;{public:    static constexpr char const* type = "STRING";    TypeId(std::string t) {}};int main(){    ::cout &lt;&lt; TypeId(1).type &lt;&lt; "\n";                   // INT    ::cout &lt;&lt; TypeId(std::string("abc")).type &lt;&lt; "\n";  // STRING    return 1;}</code></pre><h3 id="æ¨¡æ¿ç‰¹åŒ–-è§„åˆ™">æ¨¡æ¿ç‰¹åŒ– è§„åˆ™</h3><p>æ¨¡æ¿ç‰¹åŒ– ç¬¦åˆ å‡½æ•°é‡è½½ çš„ä¸¤ä¸ªæ¡ä»¶ä¹‹ä¸€ï¼š</p><ul><li>å‚æ•°æ•°é‡ç›¸åŒã€ç±»å‹ä¸åŒ</li><li>å‚æ•°æ•°é‡ä¸åŒï¼ˆ<strong>ç‰¹åŒ–åªèƒ½å°‘äºç­‰äº</strong>ï¼‰</li></ul><p>å¦åˆ™å‡ºç°æŠ¥é”™ï¼š</p><div class="admonition error"><p class="admonition-title">error: too many template arguments for class template xxx</p></div><p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><pre><code class="language-c">template &lt;typename T, typename U&gt; struct X            ;    // 0 // åŸå‹æœ‰ä¸¤ä¸ªç±»å‹å‚æ•°// æ‰€ä»¥ä¸‹é¢çš„è¿™äº›åç‰¹åŒ–çš„å®å‚åˆ—è¡¨// ä¹Ÿéœ€è¦ä¸¤ä¸ªç±»å‹å‚æ•°å¯¹åº”template &lt;typename T&gt;             struct X&lt;T,  T  &gt; {};    // 1template &lt;typename T&gt;             struct X&lt;T*, T  &gt; {};    // 2template &lt;typename T&gt;             struct X&lt;T,  T* &gt; {};    // 3template &lt;typename U&gt;             struct X&lt;U,  int&gt; {};    // 4template &lt;typename U&gt;             struct X&lt;U*, int&gt; {};    // 5template &lt;typename U, typename T&gt; struct X&lt;U*, T* &gt; {};    // 6template &lt;typename U, typename T&gt; struct X&lt;U,  T* &gt; {};    // 7template &lt;typename U, typename T&gt; struct X&lt;U,  T, T &gt; {};  // Error</code></pre><h3 id="æ¨¡æ¿ç‰¹åŒ–-ä»£ç ç¤ºä¾‹">æ¨¡æ¿ç‰¹åŒ– ä»£ç ç¤ºä¾‹</h3><ul><li><a href="/code/refl-sum.cpp"><em><strong>refl-sum.cpp</strong></em></a></li><li><a href="/code/refl-factorial.cpp"><em><strong>refl-factorial.cpp</strong></em></a></li></ul><h2 id="std">std</h2><h3 id="â­std-max"><a href="https://gcc.gnu.org/onlinedocs/gcc-4.9.2/libstdc++/api/a01226_source.html">â­std::max</a></h3><ul><li><code>_GLIBCXX14_CONSTEXPR</code> åœ¨ <code>C++14</code> ä¼šè¢«æ›¿æ¢ä¸º <code>constexpr</code></li><li>å®é™…å¯ä»¥å±•å¼€ä¸ºï¼š<code>constexpr inline const _Tp&amp; max(const _Tp&amp; __a, const _Tp&amp; __b)</code><ul><li><code>constexpr</code>æ— å®è´¨ä½œç”¨ï¼Œé‡ç‚¹æ˜¯å‚æ•°ä½¿ç”¨ <code>const &amp;</code></li></ul></li></ul><pre><code class="language-c">  template&lt;typename _Tp&gt;    _GLIBCXX14_CONSTEXPR    inline const _Tp&amp;    max(const _Tp&amp; __a, const _Tp&amp; __b)    {      // concept requirements      __glibcxx_function_requires(_LessThanComparableConcept&lt;_Tp&gt;)      //return  __a &lt; __b ? __b : __a;      if (__a &lt; __b)return __b;      return __a;    }</code></pre><!-- ### [â­std::stack](https://gcc.gnu.org/onlinedocs/gcc-4.8.3/libstdc++/api/a01566_source.html) --><h3 id="â­std-pair"><a href="https://gcc.gnu.org/onlinedocs/gcc-4.9.2/libstdc++/api/a01240_source.html">â­std::pair</a></h3><ul><li><a href="https://en.cppreference.com/w/cpp/utility/pair/pair"><em><strong>[cppreference] std::pair</strong></em></a></li><li><a href="https://stackoverflow.com/a/9270585/16823597"><em><strong>[stackoverflow] What is the purpose of std::make_pair vs the constructor of std::pair?</strong></em></a><ul><li>c++14åŠä¹‹å‰ï¼Œ<code>std::pair</code>éœ€è¦æ˜¾å¼æŒ‡å®šç±»å‹ï¼Œ<code>std::make_pair</code>ä¸éœ€è¦</li></ul></li></ul><pre><code class="language-c"> template&lt;typename _T1, typename _T2&gt;    struct pair    : private __pair_base&lt;_T1, _T2&gt;    {      typedef _T1 first_type;    ///&lt; The type of the `first` member      typedef _T2 second_type;   ///&lt; The type of the `second` member      _T1 first;                 ///&lt; The first member      _T2 second;                ///&lt; The second member      _GLIBCXX_CONSTEXPR pair()      : first(), second() { }      // ...    }</code></pre><h3 id="â­type-traits"><a href="https://gcc.gnu.org/onlinedocs/gcc-4.7.4/libstdc++/api/a01417_source.html">â­type_traits</a></h3><ul><li>ä»¥ <code>is_integral</code> ä¸ºä¾‹ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºæ•´å‹</li></ul><pre><code class="language-c">  template&lt;typename _Tp&gt;    struct is_integral    : public __is_integral_helper&lt;__remove_cv_t&lt;_Tp&gt;&gt;::type    { };</code></pre><ul><li><code>__is_integral_helper</code> æ˜¯ä¸€ä¸ªæ ‡å‡†çš„æ¨¡æ¿ç‰¹åŒ–ï¼Œ<strong>éå¸¸ç®€å•</strong>ï¼</li></ul><pre><code class="language-c">template&lt;typename&gt;    struct __is_integral_helper    : public false_type { };  template&lt;&gt;    struct __is_integral_helper&lt;int&gt;    : public true_type { };  template&lt;&gt;    struct __is_integral_helper&lt;char&gt;    : public true_type { };  // ...</code></pre><ul><li><code>true_type</code> ç›¸å…³å®šä¹‰å¦‚ä¸‹ï¼Œå…¶<code>value</code>å˜é‡å°±æ˜¯ä¸€ä¸ªboolç±»å‹çš„ <code>true</code></li></ul><pre><code class="language-c">  /// integral_constant  template&lt;typename _Tp, _Tp __v&gt;    struct integral_constant    {      static constexpr _Tp                  value = __v;      typedef _Tp                           value_type;      typedef integral_constant&lt;_Tp, __v&gt;   type;      constexpr operator value_type() const noexcept { return value; }      // ...    };  template&lt;typename _Tp, _Tp __v&gt;    constexpr _Tp integral_constant&lt;_Tp, __v&gt;::value;  /// The type used as a compile-time boolean with true value.  typedef integral_constant&lt;bool, true&gt;     true_type;  /// The type used as a compile-time boolean with false value.  typedef integral_constant&lt;bool, false&gt;    false_type;</code></pre><h2 id="åå°„">åå°„</h2><p>å…ˆçœ‹çœ‹ä»€ä¹ˆæ˜¯ <a href="https://en.wikipedia.org/wiki/Reflective_programming"><em><strong>reflection</strong></em></a>:</p><blockquote><p><em>reflection is the ability of a process to examine, introspect, and modify its own structure and behavior.</em></p></blockquote><ul><li>é€šä¿—è§£é‡Šï¼Œåå°„å°±æ˜¯ä»ä¸€ä¸ªå¯¹è±¡(<code>object</code>)ï¼Œèƒ½å¤Ÿåæ¨å…¶ç±»å‹ã€æˆå‘˜å’Œæ–¹æ³•</li><li>ä»¥<code>Python</code>ä¸ºä¾‹ï¼Œ<code>getattr</code> å°±æ˜¯ç»å…¸çš„åå°„åŠŸèƒ½</li></ul><div class="admonition warning"><p class="admonition-title">ä¸ºä»€ä¹ˆcppæ²¡æœ‰åå°„?</p><ul><li>åå°„ä¼šå¯¼è‡´ç¼–è¯‘åæ–‡ä»¶è¿‡å¤§</li><li>cppå¾ˆå°‘ç”¨åˆ°å…ƒç¼–ç¨‹ï¼ˆç›¸å¯¹äºC#)</li><li>cppæœ‰æ¨¡æ¿ï¼Œè¶³å¤Ÿåº”ä»˜å¤§éƒ¨åˆ†éœ€æ±‚...</li></ul></div><h2 id="é˜…è¯»ææ–™">é˜…è¯»ææ–™</h2><ul><li><p><a href="http://110.42.228.178/pdf/CPP_Templates_2nd.pdf">CPP-Templates-2nd è‹±æ–‡</a></p><ul><li><a href="https://github.com/wuye9036/CppTemplateTutorial">CPP-Templates-2nd ä¸­æ–‡ç‰ˆç¿»è¯‘</a></li><li><a href="https://github.com/r00tk1ts/cpp-templates-2nd">cpp-templates-2nd ä¸­æ–‡ç‰ˆç¿»è¯‘</a></li></ul></li><li><p><a href="https://github.com/wuye9036/CppTemplateTutorial">C++ Template è¿›é˜¶æŒ‡å—</a></p></li><li><p><a href="https://veselink1.github.io/blog/cpp/metaprogramming/2019/07/13/refl-cpp-deep-dive.html">refl-cpp</a></p></li><li><p><a href="https://bartoszmilewski.com/2009/10/21/what-does-haskell-have-to-do-with-c/">What Does Haskell Have to Do with C++?</a></p></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;C++æ¨¡æ¿ã€meta-programming&lt;/p&gt;</summary>
    
    
    
    <category term="C++" scheme="http://luhao.wiki/categories/C/"/>
    
    <category term="C++" scheme="http://luhao.wiki/categories/C/C/"/>
    
    
    <category term="C++" scheme="http://luhao.wiki/tags/C/"/>
    
    <category term="Python" scheme="http://luhao.wiki/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>æ—¥å¿—ï¼š2023å¹´8æœˆ</title>
    <link href="http://luhao.wiki/posts/2023/8/"/>
    <id>http://luhao.wiki/posts/2023/8/</id>
    <published>2023-07-31T16:35:13.000Z</published>
    <updated>2023-08-30T16:04:40.510Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="8330c154a59cfaf0e4f19f099c127ae0f76d981f0f6fec119dedc5b12d143a20">b3dc07a81f6459d120ce338ccca550463faa708b9b4d89df9ab14ba4edd809f60b32d15b5672ce84c5d84744f7f475debb79baf718116b8398ebb7a36965f5712db04a990a04196bf7d89b9188d2f59608c72ed5aa29e6fc56a5ff1b29fef766d4c0885ae8cf2dca8001db9ea7dd57171e66061d8a834aadac2d5261a378e855f619f74a4d6dbb2143558f830195ad778bbec3dcb3f658d755d1900562037e667a8aeb10ee60aaaef6c52df6297f9462edb95ad5b1ef626d83551b4a58dc951356f6585adb2fd17b3f8d279cf52c2f8d72cc91aa7ad9374c68556628b6eac552ac81c22994c7b364278c503dc6b9e916f56c3289675ec392461c4d50f00956ce96203d0a17d7f4458149e5c03b3d15d25dc9bc97122722d2250a1152b6099fc76cd6195b428a08f18cb69fe8d82c40e43c8c38a5500656942f3433797e60d6a8f344b3c986c222c2b19188dc6dff923af46c9788c75ccaf2a53bb6d471b52d7d78082aa39339be9a3d5a47f1ed73fd2b82eecb9a72c58c852cd134cd59e6e171a048bff0963791c087783f734fd515a509b9cdbc1fa123e4626f486d10cc01dc4ed2a88986b4e7570f318c4dbb6e86fd53e7ab53df54888700de38a7b27956a28f5a24d71ac1b210981238f7342356616aa65e5122776a1f30ea01ff979b59063560287145598109219d575b6645521e79ac5abcef9c65a76ef1c4a012ab1023dcaf610a7177d58555f457b3232550034541b922a28c8c669ded60f2dd90b5588eb16acd656e9cec360506579a2dc172f6f8d48712dca447b77f30771cc05f59b344b28155a2eebe9e0e62973d4b08bf75975b25b3a6596784cc75d81d427475ccf777f747731e75b43a458cfb15ced98c341de90aa91ff69dc7f358bd38c7987a2fdbe9501f2688be9e0b04ed2a13dba7fefa1a69916542ab272ddeb644ef2b0901c45f082a464199f2c8ae72edfee7c2ded443503f7404a997e3ad7bc56f499f36d43f144c28c1cafd4abe4301d4b77a7990d9c19b0e1e65f80a01b1bc08be553bda7515556b371f446bdab2308b945e98d57fad8a230c67824ca39f6efacd32441d7eac1dcd2c468e1affd1f75ec3cac40b9a0a60b6ab4be0866beef224ecca938443eb9f928f10b109560f5e23c3647325c4f1b4ea56bd08834e9339c99ab2022860ad7e4bd73a77780816ce90bf3648aad0448954ef40c533daebfa7b8af885b8510b4bbb59e11f361d79f77dcf79c2fb9d6bbd6a874dbc5a9583839cb6c3c0c8e4d59b52a3592283f7e6cdb132d18a7cbdd6147b2c25dcbd4f4b3b94dd000a51192076143fe0a111b4398214e9cec164b13d2173dcb71d1dc7828f7a2b8e1f3acfe4db5bef90a53aef52978b663e9cc4395aca82a0e9bb46b16849fcfcaf973187f093cdc7eef3b12bb3c99334d16e1713b0681c68d118e4cb079f1c5b29964763692a286a18f1557cdf06c33986e3409e8ff08969a0542d9ddd90dfcabf3c56aa846667e4a494d3f9118ef808217c2d134ce3df023c09c916a695d3e29f0a0d653f5147b714d4d945041ddb02ca4e96fd085112dd7316fb5fe3d386c90a13b6014b2cb65f5d1e5f3b581e02db0f19bd0966fe6d8e10e5ec3c1702e1a349c0f0f8ad24733d2defbc62267564c2ac0a180f752eeb5b30ee7b6739e24f5bdcb124d9d5f4eaee2f36647ae2002da11fc833ae99f8c176a9a2cc94ff1b76ab89893451da86f1e1e0fe45cade3abcf38962512b69da369b168f52c62ee0533ed15c468f98fdd24ac7657dda3c3e3ef94e083b688729469880ca4a131fea831c02a6e6a0d78116cc7201f6d532fa852be65a671ae5c1c5be8cc557cdd0e5eb7ece962f98d2139ee7a59d46ed7f056e00bff9f353d706d60adfee1e97ddd17f5dbecf01a5f2e766f97a8720092dfc382e774e61bd60de8c266fc2b4194c5db41b815f1983e5322ebd66de0063c8bf9a8ffc1182484c1490fc53f0f38879a5fe9574fd96c15068a11dedf1f3d9d80205a9806093fefadc48f3cf97ed33976526213067fa4e4056ee2a80665abd35bcb8c27095d736a2a650c71a0102098fd4bdfa8a0124ca9c1afd169d032e713018790cce141e236bba6a05e4e93b200253501e691e48e04587821a8220e72d0cdf5a12b76f33dca948ae248a769ef73db52fb3d6115dcdb1ce4d6ff304ede9260edafbeb0fdc043a0762d55cd10b7d52f96d0ad27456df948e742eebb606b0ad86cba7444c7bf5717437b6900b5b93c6790ee980980f2e7b19f70502070c4fd4f6bf2af5238b56282562aa3854eb56d8516a04609540fbe5c5c003ba56431996b88cbe804d17c41f20e49f8fbf38e28056102f44c21d0868fde6147ccbedce9af70b3a30473cc7b8fe00edf627321d7852fe01d5ddafd2cf6e149069d2ac3c827b8036a72df1a5f00d497641715df04db9c81a3ccb12c05b8f8e7754dc816c91d778e3ff190e3607fe67f1ae903163672daf89883a861bf17df4c1e7870ceb54c3efcca6a17b39559d7532e96897f11aa07d4dd5bcc68e1b51b78e8faff834c7cfca454980b7a937d2da416a5aa6cc5c1d10877d9c5f997e4b2867c74307c19f2dfc488b702e80dfefe042a6a35fa1e01a2d0f7c84f3cc8f91baa02c88cb243c484ea101dc9afbc05ad5b624c4638df7e3b9c74aadd0919217a5421ed3ff9e1244f1d288642f3b59b6ee6c1babc71bc49bf9b46d8fc3a4c58b17c99e25b71f8a125626b422adc431c82bf6d0ecb55a446c69cc230cf995fda4f6c7285d34c04e0ed25ada1e1b0ea5fe6e886e265524b242824bbe4218c8db2f5fdb3c05ae184ff804280648335f5113b9d87cce9577d91c9a3aeaa8b74cfe01145ce812edc850c739b51dae8caee37f8339d5468ce911c656a8f80ca54529dcc3e2f7e4dffaf3761c6c875fa32b49a52c0d561541fbd9516608bd17e6f1932c974aeca9351ddde105dec01ed7de9a16ffc78105a2593cc3496dacf22c497fe4654b4fcb7a6659fd7b19b904b45270831a1387fc1337ff10941628aa2f58646b5d6704e927a0c396f32a7de5b98a39e955c8830970ba915ed34208c1cb7699a114ba0afcec3708eed351530b07e151aacbda4b93a449def32a855d0259907efdba9da2831b43ca6f73ab7ffb604428e153a9a839945faa4dc159ad8a321e66592aeae4f1b8686714fff75fc219d87aceb9aef79b877d1dce3f237f9022e1ccbbabfaa01f8f9d5108daf8ca84041ac302eafd6d8ee2977fb35a4eb17a907419d4d58510c3d2bcc6686e0bdb09f9324d76b0b533ad896bd5f8093e8ce14cc78eb065933a3ea5accb4fbee76735e2e0e0ebec2e446abc4d233e62bf17b7917906c5d076b47f9d293099d778819f334d399ed3440e04130f6c205f6dc871a386970d351d86cfe36bb5cbeecaa11636c234cb12ce9dfefa61c6cf4cc3c77efa12e744bbcc545ab890ca7285cc68acf9fc43d330658caa5ae42a43b8e10864eb503ac66ad17843654f530bb3b9a87ecd60942c82f08ea323962acfd2da2e86b94d81885bc4438a8a80fd56dfa20ce26811b775f46f50d70449a63400eef48f3d129c8ed909503bbae502d07f5dfe23f5e5473735d62502d8d7f24256f3678519f495b844199080caff9c6eb3065bed3bfc4a74a3856184dc8b4d7fd4a0e18eeac248487ba5c184388db2d8c4d146cc6a491c74aa41975bba7d10bb99ae6c06b1d699763d653d9f29ff2c21cfde7be5ec03cd7abd420ba3dfbfb046dcf3c39468996887b5c55f4db490234fca766b97f869dfaeee687a1ce7d8ce1cd0d260998f9e3d2afeb35289ea20085ee2a52caf87127ce01c66e1598b2929645a9681142441784b0205bac7d0c5ada3886e58a5bcd3ec3e3211491186cfca3835a19399a563295125593f28209183b3323e603a8b37fa016a9a1542de4596782c15bc53449b41ef5ce6d837923f1ee7e24f58bab6d634a3d0f46030d5d8172d64bede92ff6b6a1989cd1067975882caee06ddd9c5fd511cbd2d5231ef990b87fd3a9de0c00528ea1607add836a5ead7aee0f71a8dd0987da0d5177fd5eb892bdd81f239fc61df1cfdf0c8cf30a920edd62d0cd2d01ba93557092389b0ae783abf1d3ddf5c41db0deb5d046116c1225453a42be28e2c0cc7a55f8539f5361bc1eb8edf7628ad275faf928cb98b14dadc10fc9ef3cd2f8585904463651ea10e165acd763067b7328dd34dda2c285b7ba1de5a759fa850423e80181fd56c2d500736b855b9933b9a8933e6b5842874cd726c7abcfc4b13dd5f1e80a9d2291fe692d755e5daa5614a2ceb71de4d2f4bec03ea5785617f472f058c78a63efdb1eb42025ecd68d2d32c979a7cfa8f518fd259f7c9a143a63851d27ef1bcaa5beb838a16ce18448885b77b1cb7107688185d1746965a9b442dc8ee35a355a885cdb3e1cad9ea96f86fa53785077894be05a117678959c082992bfc217fe3527f59ec122646b0469ceb37e90ce5a37fdb45f90d641cc77444917f4f0be17ebe5e11dd39ecff8bbcbb231b02f51865694e56fb7edb8f767efa209bddc1d4be8825772eb731b2efc071d986a20f74a73e04bf3f37e768292b8fff21f092e808b3bc1e7fa636b33b39bb09be09b70cb8b6a93f846fc4a4d5c6e28241fdc16277047c8ee3cba9389d4fe536bc2b79f5c435b67e9f852b27de4bdbd1b00b1b4743b7f6551a3a6326f3a98aadde5c50d5f69853b977f55bf5d00f0edef51fce78d60892a40963934499db293052e6112eb69aa8a89ce5baa6df47909ff778531c27eb70b6d693eb57552758de1ff0e35150407729883fa3608a20347f6f036b3ab20c2b08dbafda2baaf8e957748211486d123da34ecd83872bb512bd65e454c02a07d958222ced4bc5a33d35d9682045945d682d4ff2bfaaf85761b91e568cc8c42cc8410678f308de638f08b719be916479e8402a2e3b4632e21c28d0384bd344cde6b02ac9a1cabd145db662268d00b25939b157309a9197e32561fd99dc71b3487a8ca271c45bc707ae822eba7a118bbd50600ca5ab2027007e4ee09fbd3e67be1a426e8d2e5483dc6a0e0d22a608ed0e23fc9124dd3d8406d54b7b38a293bc1c77ed89763ed960bfcbdda794c9b4f49243e58b6b93d965cbd3c4f6d1b92388ae2ff8331827085c24b60982c27dbe561d6e06f52895c162e2bd84816907d521fc77c666a469a1dfae8295dd800e6aa7d0fa92e6f94fb59198f20e9675b1c25eb40f357168d35085d8a085788004e32495672bb9ac7608d7ec9e85ae60bddc392176af1f9c8801fff6ff8d49d50d8b0e3472737e737412bb577591e8449c43ed912cfc97826f71c34894d4901785591b446fc3e7d6904b6c7dc30ff4e55ca7c1c5cd97c79097172d681b71c2f0bc012650dc809c03a6461b926880e54c9981f8b8f535036e5e4c</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;hbe hbe-container&quot; id=&quot;hexo-blog-encrypt&quot; data-wpm=&quot;Oh, this is an invalid password. Check and try again, please.&quot; data-whm=&quot;OOP</summary>
      
    
    
    
    <category term="ä¸ªäººæ—¥å¿—" scheme="http://luhao.wiki/categories/%E4%B8%AA%E4%BA%BA%E6%97%A5%E5%BF%97/"/>
    
    <category term="ä¸ªäººæ—¥å¿—" scheme="http://luhao.wiki/categories/%E4%B8%AA%E4%BA%BA%E6%97%A5%E5%BF%97/%E4%B8%AA%E4%BA%BA%E6%97%A5%E5%BF%97/"/>
    
    
    <category term="C++" scheme="http://luhao.wiki/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>ã€vscodeã€‘vimå®šåˆ¶åŒ–æ’ä»¶</title>
    <link href="http://luhao.wiki/posts/vscode-vim/"/>
    <id>http://luhao.wiki/posts/vscode-vim/</id>
    <published>2023-07-23T12:04:39.000Z</published>
    <updated>2023-07-29T18:41:03.599Z</updated>
    
    <content type="html"><![CDATA[<div class="admonition note"><p class="admonition-title">å¯¼è¯»</p><ul><li><a href="https://github.com/VSCodeVim/Vim">VSCodeVim</a> æ˜¯ä»¿ç…§vimçš„vscodeæ’ä»¶</li><li>æœ¬æ–‡åœ¨å…¶åŸºç¡€ä¸Šæ·»åŠ ä¸€äº›é¢å¤–çš„ä¸ªæ€§åŒ–åŠŸèƒ½</li></ul></div><h3 id="VSCodeVim">VSCodeVim</h3><p>vscode vimä¸»æµæ’ä»¶æœ‰ä¸¤æ¬¾ï¼Œåˆ†åˆ«æ˜¯:</p><ul><li><a href="https://github.com/VSCodeVim/Vim">VSCodeVim</a>ï¼šä»¿vimçš„æ’ä»¶ï¼ŒåŠŸèƒ½ä¸å…¨</li><li><a href="https://github.com/vscode-neovim/vscode-neovim">VSCode Neovim</a>ï¼šåŸºäºNeovimï¼ŒåŠŸèƒ½è¾ƒå…¨ï¼Œä½†ä¾èµ–nvimç¯å¢ƒä¸”é…ç½®å¤æ‚</li></ul><p>ç¬”è€…ä¸€ç›´ä½¿ç”¨å‰è€…ï¼Œå› æ­¤æœ¬æ–‡å…¨éƒ¨å›´ç»• VSCodeVimå±•å¼€ã€‚</p><h3 id="ç¼ºé™·-ğŸ˜">ç¼ºé™· ğŸ˜</h3><p>VSCodeVim Github æ‹¥æœ‰ 1.5k æœªå¤„ç†çš„ Issuesï¼Œä½œè€…çš„ç»´æŠ¤è¿­ä»£é€Ÿåº¦éå¸¸æ…¢ï¼Œå› æ­¤æœ‰å¾ˆå¤šç¼ºé™·å’ŒåŠŸèƒ½ä¸è¶³ä¹‹å¤„ï¼š</p><ul><li>ä¸æ”¯æŒ vimscript function</li><li>ä¸æ”¯æŒ vim bash</li><li><font color="#FF1E10"><strong>ã€bugã€‘</strong></font>ç»å¸¸Escå¤±æ•ˆï¼Œå¼¹çª—æŠ¥é”™ <code>vim.Escape is undefined</code>â€¦ éœ€è¦é‡è£…æ’ä»¶</li></ul><h3 id="äº®ç‚¹-ğŸ‰">äº®ç‚¹ ğŸ‰</h3><p>æ‰“å¼€ <code>"vim.statusBarColorControl": true</code>ï¼Œå¯ä»¥ä½¿åº•éƒ¨ <code>statusBar</code> è·Ÿéš vimæ¨¡å¼ è€Œæ”¹å˜é¢œè‰²ã€‚<br>æœ¬æ–‡å¸Œæœ›è¿›è€Œæ”¹å˜ Cursor å’Œ å½“å‰è¡Œ çš„é¢œè‰²ã€é«˜äº®æ˜¾ç¤ºï¼Œå¹¶æ”¯æŒ config é…ç½®ï¼Œæ•ˆæœå›¾å¦‚ä¸‹ï¼š</p><p><img src="/images/vim-mode-demo.png" alt=""></p><h3 id="æ”¹è¿›-ğŸ’¡">æ”¹è¿› ğŸ’¡</h3><ul><li><p><strong>æ”¯æŒé…ç½® StatusBar, Highlight ç­‰é¢œè‰²é…ç½®</strong></p></li><li><p><strong>æ”¯æŒåŒºåˆ† Normal, Insert, Visual ä¸‰ç§æ¨¡å¼çš„é¢œè‰²</strong></p></li><li><p>ä¸‹è½½é“¾æ¥:<br><a href="https://github.com/593413198/Vim/releases/tag/vim-mode-1.0">https://github.com/593413198/Vim/releases/tag/vim-mode-1.0</a></p></li><li><p>é…ç½®æ–‡ä»¶:</p></li></ul><pre><code>    "vim.statusBarColorControl": true,    "vim.alpha": "80",    "vim.statusBarColors.visual": "#005f5f",    "vim.statusBarColors.insert": "#5f0000",</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;admonition note&quot;&gt;&lt;p class=&quot;admonition-title&quot;&gt;å¯¼è¯»
&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/VSCodeVim/Vim&quot;&gt;VSCodeVim&lt;/a&gt; æ˜¯ä»¿ç…§vimçš„vsc</summary>
      
    
    
    
    <category term="VSCode" scheme="http://luhao.wiki/categories/VSCode/"/>
    
    <category term="VSCode" scheme="http://luhao.wiki/categories/VSCode/VSCode/"/>
    
    
    <category term="vim" scheme="http://luhao.wiki/tags/vim/"/>
    
  </entry>
  
  <entry>
    <title>éšæ‰‹è®°</title>
    <link href="http://luhao.wiki/posts/idea/"/>
    <id>http://luhao.wiki/posts/idea/</id>
    <published>2023-07-21T19:15:33.000Z</published>
    <updated>2023-08-22T14:42:04.139Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="c6bc65f94a7832896020538fbf887fe8a9709c7686bd29f80c3038bd4febf32f">b3dc07a81f6459d120ce338ccca550463faa708b9b4d89df9ab14ba4edd809f60b32d15b5672ce84c5d84744f7f475debb79baf718116b8398ebb7a36965f5712db04a990a04196bf7d89b9188d2f5969b089300c199c887ad4490953d1810357cd375ac06e732d356d4ec27b642aa2d46c8fdf198d48a4b9620936f8c18efa99cd53c0e6c5befbd6da9ebb0e8d473ba88daf9814bf097589053470cd244c49759b29258898ae147d3b92406541ecc1426781b7f965d69488f8227468d25ace43c6b69c8a19f97354453e8ff96435fa7c142eabaa7418866597b071d73575a4fa98f09916a3b6256959c82764411afd8c8baf90fb4965fdfacbf4695b2488acf5d7f161a49b796a0b1b992232c56c8393b9705588b441acf55138be81fe973cfb15be2e79a6f99afa38481729479c286ec6a02cc951fd7f863308221e3409f3e1974680d2f02c063980d44af8e06e16848b8bd660fed16d9b5d1445f1619d498731bec635a5437f3f2dd0b389fbb52905c7c24ebbf54885173e06c7c5b2e3915335e700578626ce7eac45b801a88360b8431a63f02f909f337c51c8aca522afdfb179a032059d1b0c60d82a39c9101894591c99a69d4788c0964ffdf8c8bd340d4f4d0c40c91f0d7b04f33253a142ee29a844e5b7eca56476ebd534d90b54953c9f26a98bfd690dc70f043a224f68814d251f07166ef0cdd195c05dc74eb39f54b5345f809b762a7889cd161f77be58e0d1a2d473e983209035a731b88905105060112483e9324a6df5104a9d6be63f87da391c0963d4f09a7cab737a5ca573d7cc00e96996d16164c26f39cad48b191074aafceccb1b3d53728962bd363fbc5627a401d1e619cec7e88b364d74eb44372b771b3298a63f2ee75e774d3e77dfbd897be6acdde70394ef7580df602e0a38bce10cad68512761784e406a8013db99dd0603f12f71922b4c0096b6300d7650275d8ecb2786e40c1187ee12fd4fb1775bda1356f771b8b5a57a0bed3378dfad7dc5baad11f5881526cb7ac9ab7611d612d3c29b056a9b9bf0de347f042f4450adfc4ea792893a9036ac653c750ef496314e75ab9bba2d0cc6fbb432a6d0f3660175d4b2ad9eeec969249f0bbbbda47a5f4f7dce869e349d36873f7467f4f5ec0aa44ad792b07401cc88a8dc033e02944369446cb5b05697fe8bf6bbf65a9d346bff04820224139dfd1a1cf85deca75e794f0b832b49512771efbf8f1a0eef19813c8e81a9c512407b82da2a92ce4ff5c7498c4616570b114c4726cf5e093b6db53b0caae6b68f5c41bafd3160eb97aa989ea35ceb03a147a590f98ce818c50346ca8f47237f31af4a0cfeb0791050d948fbca28ef55ded16209f8e41edb8a9842d0ef9827896b599286592e161b849811ca388e6bf80f06961d2ea9f358183636ff61f5eec59b8ac1545fe823aa00d11178e27670035ef3bd2b9d8f471ca1d586eec438333b06b5fc4108afbf9f7944b8e3d322f9080ca0b7257758b2afa40fc4d13c8d7f981ef5695731074e28a121caf34662a362ae542b924e7d4fd9ceae3b9fa8e2156b05a39f3097052cb253621faf9b116c4036437439ec93b0b62c96bf2919ef9ad9253db93e51b547212058a17ae92375a14a55c772414c4522f55a3ef5efdeb323b24c79caa9357d59432b46a8573d1493361c7c3590e11bb944e909a82ddc36bf88270aeae872ca68dfe902569a78f619b1adb34b97df39eeffb28a5014b262ec15a7ed4bebb1b7f2460ceda958ff9a7de6a055c36de7dbe157c0525ba2e49875514a08865a7a718a47c8a33a8eb7d47d7f3a4d64ebda713869f43b091edfa61119340049ca058007dd9905e1cc2965a213a563431740a7102aac4e0a994a8e9a940ff8dc13e0c45ff1a51a04224bac0b622b1dd70b405b4050db4461ffabbdcb3ea261b7a472e18505cfdb68b66bfa1e27083b8c3c13607300fd56b4a27f0cd5ef639af34fbfeb0efd525cc23fcdbec7c41d22200f013fc7ae0e12bb3b4f5097232b15478fdbe6123c2c57c5103580cb7f658f88c2fef06b6f95cd263e9b8efdff49ba91912030d3dcb27186e876b79c55a7d858c879ced8f072df33819cb630a99d257c12908716bf5641cee7f6194f99d50b48bf8f89a313966f1444bb912ece43df34b7d076ddadd04196cddb3a91e66e6087e8f45627d2a079cb965614c87013a5c72dc3eb9bb4ead78c8d1731c6a6ec05c3c3df91531183798efc466bb311e25c69c8eccdcbc01d9988bb464bf5fce429d571caaa21955f9edfe44ede26630953d2435425e61f24a70cf49102abd5bb9214225f69386c2c95b7979d5229a20d297de7c7868295ca0acbc0231fc8dac08bf5406b8ee577d2e149a87a97feda2e744bd178b37f08700dc7a3ad0f0ec4931472a967e48665fb734bfce821d359eb03fa8ce1a71fb3631b151e449073a58c9cdb11e8a00b7561fffa36adb40edaff25ed6f18b146238b350fea5bfe68c44b6d3371f8e4c86eabee6495898c28c6fc39559860856313745c4b39bc2a01e82f0cab968733f206a603d192013a8be40d62b477810bcda312ab9aa5776ed3473a97a8f3997855b4b79cec7279a5682d14884cc6248576e0a71e3da135c4ec8724f71d7b06577bf0cb7e966cfe4471d37fb036984a7b009a29aef0bcd3895fcd5f07525e7d491e25c9e780b7326483f7c21afe885f107131ee9ca7dc92d4d6b59d9fcf6abaa10585a6bf751c8bd689d490e9c8ff97835323c668d9ba245b927eae9a6b3177b043f6040e544b14804824f5fdc2fc1d7d932eff3638a79a70bdfdf83eb4198e34a4bd7f28893e1673e962e366dc02381a90b26cb7d6bc5b28c072cfe42fff517c675b5ee13122b2e44e2f2ef1a9a52c2948c464916cf8aa765bc8e93b919de8f3905d76b7be1007402733dc96118a70ea043cd853f44bf6a24d502372e9a0bc263bfb528d5a50299057452f248e701eb95bcb35cba946fdfecf00ee7f950891ada81bf5fbb7c50cfcfb87471cb7c508fdab6500f1fcecaa14adcbf4fa67db0b69504ccfdfe40d0008bfa3d9f3e7fd25ff920727b9343d1c28849098562f320a5913e2da7c6d58d52a2896ff129c2f033ecca018966cd7072307eef5627c5cee4ca51f4cbca8f0949709fa8a1e3a11381b9b34aa11e8c2c89ab51600c2d9a0b6a7f5695455a359a63a7c909532b8f1b12d5659d72057f8c9fb63053bfb4e2e31d48197229bea07a75fd0aadf546cb579de248fedcbbe9f416ad19b4973526f3db93f23e2152e69649ef16a0491a36b057b5cd7a29296eab589297f10f66dc580c7f23925e4ec19faa5f7a90b0336496e777be4df21d9a8dc81d7166022ddaad43fd49a16416919012857bb9fbdafbb827199cf9e1b00133b7edb69e470b6cb3c21b00c1dbdb92badba66919df58f59e375afb8c9f5cb83c474614b78befad9c8b0898141c7d9439d746c6d2bdb1b250c8bdd3adaf3eb19f748a735766807be62bbbec279d13df4b3033bc9ab8532622a402f9339177bc264016bd093a0698db1b306219c8e9e1cd52bbd7f04719b8f717b776846e858c27057d6185b6cac98f14d3520c871208b6943979f341e632ec0b9c5e215456349e82a8b7395ef513592b2698276ab100397170e44d254a31902d9e65fbd2d6a4500f3821ded5b9af485ba4579d94e8c3a90506b9501f2da698dba433e71f2c7d4ad9c890875cc711b15a40f6523f03b1d992df43322b8d215a43d1ac932f374b00a676b714839c1ba5c2e82074533a760a09d68b32ba41af7a92546937ddc6a24de3663a5a531a3b21872f2f70f97cca67908225ce18ebdad384df3ffc741a00d03a01eb9bc5b4c7d348294932ba31abf6119566c0b084ede078752f1f3b3fa3f7951f2c7266131dd39c1741deca65c7eabec77aa3a4a8f93748546f8a9b4982a29f8c8148ac5ab894a39aea999f67d395e4c88a08aa53ac69ac2fdc38d53814d165d0927f3271fdc22df70e6639e45f488822167714edab64c5293ba226d7b04a9f884505738c667106ae8d7aa6485bf115949856cb7df2f7940acb514f88feab832d613b65b812e2d49faf835347974f26ba3f10ff43b4df0b6243e9979c7e460123347a6c6c747b46851656da7642ca7723647bb046d25b4423836dbf4a4d0a48ba6d799cc4c7ede10ad68065bc2ba60cd40cac8ccfecd0957cf44abaadb5558a832780449bf347d608e114eebd089524fa79adcaf909aafb837e7de4da3cb58213620a2b2c813843003b438a8903a9a248689572d39f2ff263198e170ec8c6ef6afc4e1d3e9b08a77ba1998f858b6672242a9f62c7af0fe22416fab68c69939e7330466a01212762aa64c34bcf8df85f14977ffe23c6d5f7ff766e</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;hbe hbe-container&quot; id=&quot;hexo-blog-encrypt&quot; data-wpm=&quot;Oh, this is an invalid password. Check and try again, please.&quot; data-whm=&quot;OOP</summary>
      
    
    
    
    <category term="éšç¬”" scheme="http://luhao.wiki/categories/%E9%9A%8F%E7%AC%94/"/>
    
    <category term="éšç¬”" scheme="http://luhao.wiki/categories/%E9%9A%8F%E7%AC%94/%E9%9A%8F%E7%AC%94/"/>
    
    
  </entry>
  
  <entry>
    <title>ã€è¡¨è¾¾æŠ€å·§ã€‘è·Ÿç½—æ°¸æµ©å­¦æ¼”è®²</title>
    <link href="http://luhao.wiki/posts/talk/"/>
    <id>http://luhao.wiki/posts/talk/</id>
    <published>2023-07-09T16:52:35.000Z</published>
    <updated>2023-08-16T17:17:05.401Z</updated>
    
    <content type="html"><![CDATA[<p><code>ç½—æ°¸æµ©15å ‚æ¼”è®²ç§æ•™è¯¾</code>å­¦ä¹ æ€»ç»“<span id="more"></span></p><div class="admonition note"><p class="admonition-title">å¯¼è¯»</p><ul><li>Bç«™è§†é¢‘ï¼š<a href="https://www.bilibili.com/video/BV1PP411T7fv">ã€æ¼”è®²ã€‘ç½—æ°¸æµ©15å ‚æ¼”è®²ç§æ•™è¯¾</a></li><li>çŸ¥ä¹ï¼š<a href="https://zhuanlan.zhihu.com/p/619973080">ã€å­¦ä¹ ç¬”è®°ã€‘ç½—æ°¸æµ©æ¼”è®²ç§æ•™è¯¾</a></li></ul></div><h2 id="å‰è¨€">å‰è¨€</h2><p>å¼€è¿™ç¯‡æ˜¯å› ä¸ºè¿‘æœŸï¼Œæœ‰ä¸€ä¸ªåœ¨å…¬å¸å†…éƒ¨åˆ†äº«çš„è®¡åˆ’ã€‚<br>å› ä¸ºä¸æ˜¯æŠ€æœ¯ç±»å‹çš„è®²åº§ï¼ŒæŠ€å·§å› ç´ å æ¯”å°±ä¼šå¾ˆä½ï¼ˆè€ŒæŠ€æœ¯åˆ†äº«æ›´æ³¨é‡å°†ä¸œè¥¿è§£é‡Šæ¸…æ¥šï¼‰ã€‚æ‰€ä»¥èŒç”Ÿå­¦ä¹ è¿™ç±»æ¼”è®² + è¡¨è¾¾æŠ€å·§çš„å¿µå¤´ã€‚<br>è®¤è¯†ç½—æ°¸æµ©ï¼Œæœ€åˆæ˜¯ 6ä¸ªäº¿ çš„è´Ÿå€ºæ¢—ï¼Œæ›´æ·±å…¥çš„æ˜¯åœ¨ è„±å£ç§€å¤§ä¼š ä½œä¸ºå˜‰å®¾æ—¶æœŸçš„å‘è¨€ï¼Œå¯¹å…¶æœ‰å‡ ä¸ªè®¤è¯†ï¼š</p><ul><li><p><strong>å¬æ„Ÿ</strong>ï¼šè¡¨è¾¾æ¸…æ™°è¿è´¯ï¼Œä½†å—“éŸ³æ¡ä»¶æ¶åŠ£ï¼ˆæ®æœ¬äººè°ƒä¾ƒæ˜¯è€å¤ªç›‘éŸ³è‰²ï¼‰</p></li><li><p><strong>é€»è¾‘</strong>ï¼šçŸ¥è¯†æ¶‰çŒå¹¿æ³›ï¼Œä¸”ä¸´åœºååº”è¿…é€Ÿï¼ˆåè€…æ˜¯å¹½é»˜æ„Ÿ + ç»éªŒç´¯ç§¯ï¼‰</p></li><li><p><strong>å†…æ ¸</strong>ï¼šå–„äºåˆ¶é€ ä¸€å¥<strong>æ ¸å¿ƒè¯é¢˜</strong>ï¼Œå¹¶åå¤æ´—è„‘callbackï¼ˆå¦‚è„±å£ç§€çš„â€œå¤§å±€è§‚â€ï¼Œå¦‚æ¼”è®²è¯¾çš„â€œå› ä¸ºå¤§è„‘å°±æ˜¯è¢«è¿™æ ·è®¾è®¡çš„â€â€¦ï¼‰</p></li></ul><h3 id="å…³äºè¿™ä¸ªæ•™ç¨‹">å…³äºè¿™ä¸ªæ•™ç¨‹</h3><p>åŸºäºç½—è€å¸ˆ <strong>â€œæ¼”è®²éƒ½æ˜¯æœ‰å¥—è·¯å’ŒæŠ€å·§â€</strong> çš„è§‚ç‚¹ï¼Œå°†å…¶æ¼”è®²è¯¾çš„å¥—è·¯æ€»ç»“å¦‚ä¸‹ä¸‰ç‚¹ï¼š</p><ul><li><p><strong>ä¸ºä»€ä¹ˆè¦è¿™æ ·?ï¼ˆèµ¢å¾—è®¤åŒï¼‰</strong></p></li><li><p><strong>å¦‚ä½•è¾¾åˆ°è¿™æ ·?ï¼ˆæ–¹æ³•è®ºï¼‰</strong></p></li><li><p><strong>ä¸¾ä¾‹ã€ç±»æ¯”è®ºè¯ï¼ˆæ·±å…¥äººå¿ƒï¼‰</strong></p></li></ul><h2 id="åä¸‰ä¸ªè¦ç´ ">åä¸‰ä¸ªè¦ç´ </h2><p>è¿™äº›æŠ€å·§æ¯”è¾ƒå¤šï¼Œéš¾ä»¥çŸ­æ—¶é—´è®°å¿†å’ŒæŒæ¡ï¼Œå› æ­¤å…ˆè®°å½•ä¸€ä¸‹æ ¸å¿ƒè§‚å¿µï¼Œå‰©ä¸‹çš„åœ¨å®è·µä¸­æŒæ¡å’Œç†è§£ã€‚</p><div class="markmap-container" style="height:350px">  <svg data="{&quot;t&quot;:&quot;root&quot;,&quot;d&quot;:0,&quot;v&quot;:&quot;&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[0,1]},&quot;v&quot;:&quot;è®©è§‚ä¼—å¬ä¸‹å»&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[1,2]},&quot;v&quot;:&quot;<strong>è®²ç¬‘è¯</strong>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[2,3]},&quot;v&quot;:&quot;å¹ç‰›é€¼&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[3,4]},&quot;v&quot;:&quot;è£…é€¼&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[4,5]},&quot;v&quot;:&quot;è®©è§‚ä¼—å®¹æ˜“ç†è§£&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[5,6]},&quot;v&quot;:&quot;è®²æ•…äº‹&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[6,7]},&quot;v&quot;:&quot;<strong>ä½œç±»æ¯”</strong>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[7,8]},&quot;v&quot;:&quot;<strong>ä¸‰æ®µå¼</strong>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[8,9]},&quot;v&quot;:&quot;æé—®é¢˜&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[9,10]},&quot;v&quot;:&quot;å…·æœ‰è¯´æœåŠ›&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[10,11]},&quot;v&quot;:&quot;æœ‰é€»è¾‘&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[11,12]},&quot;v&quot;:&quot;æœ‰æ•°æ®&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[12,13]},&quot;v&quot;:&quot;è®©è§‚ä¼—äº§ç”Ÿå…±é¸£&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[13,14]},&quot;v&quot;:&quot;æœ‰æ¿€æƒ…&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[14,15]},&quot;v&quot;:&quot;æœ‰æƒ…æ„Ÿ&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[15,16]},&quot;v&quot;:&quot;<strong>å‡åå¢ƒç•Œ</strong>&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[16,17]},&quot;v&quot;:&quot;æ ¸å¿ƒ&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[17,18]},&quot;v&quot;:&quot;<strong>æœ‰ç”»é¢</strong>&quot;}]}],&quot;p&quot;:{}}"></svg></div><h3 id="ç²¾åæ‘˜è¦">ç²¾åæ‘˜è¦</h3><ul><li><p>å¼€å§‹ä¸€åœºæ¼”è®²çš„æœ€å¥½æ–¹å¼ï¼Œå°±æ˜¯<font color="#ef6d3b"><strong>è®²ç¬‘è¯æˆ–è®²æ•…äº‹</strong></font>ã€‚ï¼ˆåƒä¸‡ä¸èƒ½è®²é“ç†ï¼‰</p></li><li><p>å¯¹äºæ™¦æ¶©æˆ–é™Œç”Ÿçš„äº‹ç‰©ï¼Œè¦<font color="#ef6d3b"><strong>å·§ç”¨ç±»æ¯”</strong></font>ï¼Œå¦‚ è°ˆåˆ¤å°±æ˜¯æ‰¾äº¤é›†ã€‚</p></li><li><p>å¼€å§‹ä¸»ä½“å†…å®¹å‰ï¼Œç”¨<font color="#ef6d3b"><strong>ä¸‰æ®µå¼</strong></font>ä»‹ç»æçº²ã€‚ï¼ˆæ€ç»´å¯¼å›¾ï¼‰</p></li><li><p>è®²æ•…äº‹çš„ä¸‰è¦ç´ ï¼šå†²çªï¼ˆå¸å¼•æ³¨æ„åŠ›ï¼‰ + è¡ŒåŠ¨ï¼ˆæ•…äº‹çš„å‘å±•ï¼‰ + ç»“å±€ï¼ˆè¡¨è¾¾çš„å†…æ¶µï¼‰</p></li></ul><h2 id="å…¶ä»–æŠ€å·§">å…¶ä»–æŠ€å·§</h2><h3 id="1-ç”¨åæ ‡ç³»æè¿°äº‹ç‰©">1. ç”¨åæ ‡ç³»æè¿°äº‹ç‰©</h3><p>ä¸¾ä¾‹ï¼Œå¦‚ä½•çœ‹å¾… <strong>â€œé‡åŒ–äº¤æ˜“â€</strong>?</p><p>é¦–å…ˆï¼Œä¸€ä¸ªäº¤æ˜“ç­–ç•¥çš„è¯„åˆ¤æ ‡å‡†æœ‰ä¸¤ä¸ªç»´åº¦ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ul><li>Interpretï¼šï¼ˆé‡‘èåº•å±‚çš„ï¼‰è§£é‡Šèƒ½åŠ›</li><li>Predictï¼šï¼ˆé‡‘èå¸‚åœºçš„ï¼‰é¢„æµ‹èƒ½åŠ›</li></ul><p>å› æ­¤ï¼Œå¼•å…¥ä¸€ä¸ªäºŒç»´åæ ‡ç³»ï¼Œç”šè‡³å¯ä»¥ç±»æ¯”ä¸åŒäº‹ç‰©åœ¨å…¶åˆ†å¸ƒï¼Œä¾‹å¦‚ï¼š</p><ul><li>è¿›åŒ–è®ºï¼šèƒ½è§£é‡Šä¸ºä»€ä¹ˆçŒ¿çŒ´è¿›åŒ–åˆ°äººç±»ï¼Œä½†æ— æ³•é¢„æµ‹äººç±»æœªæ¥è¿›åŒ–çš„è¶‹åŠ¿</li><li>åœ°å¿ƒè¯´ï¼šèƒ½é¢„æµ‹å¤ªé˜³ä¸œå‡è¥¿è½ï¼Œä½†åº•å±‚ç§‘å­¦åŸç†æ˜¯é”™çš„</li></ul><p><img src="/images/interpret-predict.png" alt=""></p><p>æœ€åï¼Œæ ¹æ® é‡åŒ–äº¤æ˜“ é¢„æµ‹èƒ½åŠ›å¼ºï¼Œä½†æ— æ³•è‡ªåœ†å…¶è¯´çš„ç‰¹ç‚¹ï¼Œå¯ä»¥å°†å®ƒæ”¾åœ¨ç±»ä¼¼è¿›åŒ–è®ºçš„ä½ç½®ã€‚</p><p><strong>è¯¥æ–¹æ³•è®ºå¯ä»¥è®©å¬ä¼—ç›´è§‚æ¸…æ™°åœ°äº†è§£äº‹ç‰©çš„å¤šç»´åº¦ç‰¹å¾ã€‚</strong></p><hr><h3 id="2-ç»“å°¾å‡åä¸»é¢˜">2. ç»“å°¾å‡åä¸»é¢˜</h3><ul><li><p>å‡ å¤©è¿‡åï¼Œè§‚ä¼—æœªå¿…ä¼šè®°å¾—ä½ è®²äº†ä»€ä¹ˆï¼Œä½†ä»–ä»¬æˆ–è®¸èƒ½ä»æƒ…æ„Ÿä¸Šè®¤åŒä½ ã€‚</p></li><li><p>è¿™å¾ˆå¤§ç¨‹åº¦ä¸Šï¼Œæ¥æºäºç»“å°¾çš„å‡ å¥å‡åã€‚</p></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;code&gt;ç½—æ°¸æµ©15å ‚æ¼”è®²ç§æ•™è¯¾&lt;/code&gt;å­¦ä¹ æ€»ç»“&lt;/p&gt;</summary>
    
    
    
    <category term="éšç¬”" scheme="http://luhao.wiki/categories/%E9%9A%8F%E7%AC%94/"/>
    
    <category term="éšç¬”" scheme="http://luhao.wiki/categories/%E9%9A%8F%E7%AC%94/%E9%9A%8F%E7%AC%94/"/>
    
    
  </entry>
  
  <entry>
    <title>ã€cppã€‘Memory</title>
    <link href="http://luhao.wiki/posts/memory/"/>
    <id>http://luhao.wiki/posts/memory/</id>
    <published>2023-07-04T17:01:35.000Z</published>
    <updated>2023-07-22T13:03:25.859Z</updated>
    
    <content type="html"><![CDATA[<p>C++çš„å†…å­˜åˆ†é…ä¸ç®¡ç†<span id="more"></span></p><div class="admonition note"><p class="admonition-title">å¯¼è¯»</p><ul><li>ç†è®ºåï¼š<a href="/posts/virtual-memory/">ã€CSAPPã€‘Virtual Memory</a></li><li>æœ¬ç¯‡ç»“åˆ C/C++ äº†è§£å†…å­˜åˆ†é…ç›¸å…³é¢†åŸŸçŸ¥è¯†</li><li>ptmallocï¼Œtcmallocï¼Œjemalloc ...</li></ul></div><div class="markmap-container" style="height:300px">  <svg data="{&quot;t&quot;:&quot;root&quot;,&quot;d&quot;:0,&quot;v&quot;:&quot;&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[0,1]},&quot;v&quot;:&quot;malloc / free&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[1,2]},&quot;v&quot;:&quot;new / delete&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[2,3]},&quot;v&quot;:&quot;system-call&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[3,4]},&quot;v&quot;:&quot;<a href=\&quot;#brk-sbrk\&quot;>brk / sbrk</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[4,5]},&quot;v&quot;:&quot;<a href=\&quot;#mmap\&quot;>mmap</a>&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[5,6]},&quot;v&quot;:&quot;c-malloc&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[6,7]},&quot;v&quot;:&quot;<a href=\&quot;#ptmalloc\&quot;>ptmallocï¼ˆglibcï¼‰</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[7,8]},&quot;v&quot;:&quot;tcmallocï¼ˆgoogleï¼‰&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[8,9]},&quot;v&quot;:&quot;jemallocï¼ˆfacebokï¼‰&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[9,10]},&quot;v&quot;:&quot;mimallocï¼ˆmicrosoftï¼‰&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[10,11]},&quot;v&quot;:&quot;c++&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[11,12]},&quot;v&quot;:&quot;std::allocator&quot;}]}],&quot;p&quot;:{}}"></svg></div><h2 id="malloc-free">malloc/free</h2><ul><li>é˜…è¯»æ–‡æ¡£ï¼š<a href="https://en.cppreference.com/w/c/memory">cppreference: Dynamic memory management</a></li><li>ä½¿ç”¨çš„æ—¶å€™å¤šæŸ¥é˜…æ–‡æ¡£ï¼Œæ³¨æ„ <code>malloc</code> ä½¿ç”¨æ—¶è¦åˆ¤æ–­ <code>NULL</code> é¿å…å†…å­˜åˆ†é…å¤±è´¥</li></ul><pre><code class="language-c++">#include &lt;unistd.h&gt;void *malloc(size_t size);void *calloc( size_t num, size_t size );void *realloc( void *ptr, size_t new_size );</code></pre><ul><li>åˆ†é…è¿‡ç¨‹ï¼šâ†“</li><li>éœ€è¦è€ƒè™‘å­—èŠ‚å¯¹é½ï¼Œæ³¨æ„è¢«é‡Šæ”¾åçš„å†…å­˜ä¹Ÿå¯èƒ½é‡å¤åˆ©ç”¨ï¼Œè¿™ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆé‡æŒ‡é’ˆçš„ <code>undefined behavior</code></li></ul><p><img src="/images/malloc-demo.png" alt=""></p><h2 id="new-delete">new/delete</h2><p><a href="/posts/virtual-memory/#u-class-black-mallco-free-u">malloc / free</a> å‰é¢æœ‰ä»‹ç»è¿‡ã€‚</p><p><strong>ä»¥ <code>A* a = new A</code>ä¸ºä¾‹ï¼Œé€šè¿‡ <a href="https://gcc.godbolt.org/">godbolt</a> æŸ¥çœ‹æ±‡ç¼–ä»£ç ï¼Œå‘ç°å…¶æœ‰ä¸¤æ®µé€»è¾‘ç»„æˆï¼š</strong></p><ul><li>è°ƒç”¨ <code>new operator</code></li><li>è°ƒç”¨ <code>class's constructor</code></li></ul><pre><code class="language-asm">call    operator new(unsigned long)mov     rbx, raxmov     rdi, rbxcall    A::A() [complete object constructor]</code></pre><p><strong>ç›¸åº”çš„ <code>delete</code> æ–¹æ³•ï¼Œä¹Ÿå¯¹åº”å¦‚ä¸‹çš„ä¸¤æ®µé€»è¾‘ï¼š</strong></p><ul><li>è°ƒç”¨ <code>class's destructor</code></li><li>è°ƒç”¨ <code>delete operator</code></li></ul><p>ä¸‹é¢é‡ç‚¹å±•å¼€å¯¹ <code>new / delete</code> ä¸¤ä¸ªæ“ä½œç¬¦çš„å­¦ä¹ ï¼ˆæ¨èé˜…è¯» <a href="https://www.programiz.com/cpp-programming/operators">C++ Operators</a> å’Œ <a href="https://en.cppreference.com/w/cpp/language/operators">cppreference operator overloading</a>ï¼‰</p><p><strong>å…ˆçœ‹ libc çš„ <a href="https://codebrowser.dev/llvm/libcxx/src/new.cpp.html">æºç å®ç°</a>ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯å¯¹ <code>malloc</code> çš„ä¸€å±‚å°è£…ã€‚</strong><br>å¦‚æœç±»è‡ªå®šä¹‰äº† <code>new /delete</code>ï¼Œåˆ™ä¼˜å…ˆè°ƒç”¨å®ƒä»¬ã€‚</p><pre><code class="language-C++">void *operator new(std::size_t size) _THROW_BAD_ALLOC{    if (size == 0)        size = 1;    void* p;    while ((p = ::malloc(size)) == nullptr)    {        // If malloc fails and there is a new_handler,        // call it to try free up memory.        std::new_handler nh = std::get_new_handler();        if (nh)            nh();        else#ifndef _LIBCPP_HAS_NO_EXCEPTIONS            throw std::bad_alloc();#else            break;#endif    }    return p;}voidoperator delete(void* ptr) noexcept{    ::free(ptr);}</code></pre><h2 id="System-Call">System Call</h2><p>ç¨‹åºä¸­çš„å†…å­˜åˆ†é…æœ‰ä¸‰ä¸ªå±‚æ¬¡ï¼Œå¦‚ä¸‹å›¾ã€‚<br>æœ€ç»ˆè°ƒç”¨çš„è¿˜æ˜¯Linux/Windowsä¸­çš„æ“ä½œç³»ç»ŸAPIï¼šå¦‚sbrk, mmapâ€¦ å› æ­¤éœ€è¦é‡ç‚¹æŒæ¡è¿™äº›ç³»ç»Ÿè°ƒç”¨ã€‚</p><p><img src="/images/memory-call.png" alt=""></p><h3 id="brk-sbrk">brk, sbrk</h3><blockquote><p><em>change data segment size</em></p></blockquote><p>å‚è€ƒé˜…è¯»  <a href="https://www.cnblogs.com/sylar5/p/11508821.html">cnblog: brk å’Œ sbrk åŒºåˆ«</a></p><p>linux man æ‰‹å†Œä¸­æè¿°ä¸¤è€…çš„ä½œç”¨æ˜¯æ”¹å˜ <code>data segment</code> çš„ç»“æŸåœ°å€ã€‚<br>é€šä¿—åœ°ç†è§£å°±æ˜¯ï¼Œ<code>brk</code>å‡½æ•°ä¼šé‡æ–°è®¾ç½® <code>heap</code> çš„é«˜ä½åœ°å€ï¼Œè€Œ <code>sbrk</code>å‡½æ•°ä¼šæ ¹æ®å¤§å°æ¥è°ƒæ•´ <code>heap</code> çš„å®¹é‡ã€‚</p><p>ä¸¤ä¸ªå‡½æ•°çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><pre><code class="language-C++"> #include &lt;unistd.h&gt;int brk(void *addr);void *sbrk(intptr_t increment);</code></pre><h3 id="mmap">mmap</h3><blockquote><p><em>map (or unmap) files or devices into memory</em></p></blockquote><pre><code class="language-C++">#include &lt;sys/mman.h&gt;void *mmap(void *addr, size_t length, int prot, int flags,            int fd, off_t offset);int munmap(void *addr, size_t length);</code></pre><h2 id="ptmalloc">ptmalloc</h2>]]></content>
    
    
    <summary type="html">&lt;p&gt;C++çš„å†…å­˜åˆ†é…ä¸ç®¡ç†&lt;/p&gt;</summary>
    
    
    
    <category term="C++" scheme="http://luhao.wiki/categories/C/"/>
    
    <category term="C++" scheme="http://luhao.wiki/categories/C/C/"/>
    
    
    <category term="C++" scheme="http://luhao.wiki/tags/C/"/>
    
    <category term="linux" scheme="http://luhao.wiki/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>æ—¥å¿—ï¼š2023å¹´7æœˆ</title>
    <link href="http://luhao.wiki/posts/2023/7/"/>
    <id>http://luhao.wiki/posts/2023/7/</id>
    <published>2023-06-30T16:23:22.000Z</published>
    <updated>2023-08-07T16:19:29.048Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="0851a0368b387b9bfd1f7d1594c7eae2a82ee3ac45ebf15175c78bf0da59da97">b3dc07a81f6459d120ce338ccca550463faa708b9b4d89df9ab14ba4edd809f60b32d15b5672ce84c5d84744f7f475debb79baf718116b8398ebb7a36965f5712db04a990a04196bf7d89b9188d2f59608c72ed5aa29e6fc56a5ff1b29fef766d5ea38b7aab101c2c288cc8d47a1ddb98f58e3ebed46e51710844af238f638a595dcac39d4bda5ded8547aa673d0beeca805102f4562a781f12cdc07d2da448e4ebf47133795728ca1d580628672d374c763017902d054d929efa4c3aee95334f067071686413aed6fbc1c0d418e93aa3bcb387a92a042cfa05b807fe267b5ba62c20a2f048c31c3b7091c6bfd48e1bbdf52156047e2f8b07cc4a7df940b8fef50a435e591511689fcf8d2d5faafbabd0527fcb5da530c6230f1fa703e6716f23890796df860502732d5f6a1cea25acc2e1bc11a51504d36fdd945bce963514e161abf4cec44c03159e11f9038e237289e9d8281c702e61576f2f90f375a12a819e4286e7c31c3bb74514a6925ee85eca1529d6abdd7538e15c4bd1fc3fd1f3ebff6ac9483c9dfce5b7b0eccabc593db99c4822ca51a2378436fcf09fdad42d29ff50482e9d0eb1b58dadea5fa9f50b79855fd26c4b19f49d191e8c2aab60a2e1a436859f97a44935946f841150d27050f2903a09341a4a8cf9ad0138efa26d1c815137b28364ad5ed2b4a1ff9fe16eb21147a6a004b01f2403a1a0085ba3db57dfe4654b751e00925b9d369286309ba339d22f2dddb796ead59f80055f73298232520397531f0b0bf705b21554ea101a48ae5198f596e98687394f595cb88f6dee6cf78552aa85c806a0a8159ad13cbaeabe70aae83809f31eade9f489579c6a060c007c51f55e25f3efe4c96a995ca0f4021d2c4e4440c6e09b16160c085b5b23dc7b78be18c8976f0be7ed1e97c28be99e78fcd804bd5506b100a863f874f936bc9ed0b78aac30391272c90e7d1d316b6e5c2cc5f1eed1893662cb50797b1d4b808eeeb26daadad35aabeceb2fdfdd8f3be439a15a66581b665403960b81732cbb50ddf30180c7375d28c085245e3a2cadd3b2d476254386ac8b145a5aaff957ffed6c48dba81df88bb3382b402af47ea8680eb1fe397d3bb86d8b229a9748bfd6a62751b933916745ab9b5a6a9e773e52a4d4071bbcc2e57efa8556864abb615fc4e253fc4ebf85f1caf87972a49b45ee2517d46b10098ccfe32a315a4e0b47488a4724c74e25a09f2f4ee2967d96b393e885bb43f3a82d36843b27a51d9656f20d41770672b81c2e7b3da43e172e55ff0979c9bdf1025f6ddd49ad4af161eea013373b3cf15a20468117c1193013fe3bf6db061118a23a0050afdc5fb085393904249490314b1628e1dfe03f37072e7ba62e793d34bd62fd6f64c799eb289e2208cc202709291d15df54bdfb21f389b168c0f3e02e373d8c751be8e61ec2f1a067a1ba484704dc9c9811dea65853c08781728678cabd4b6cbd900710b0efc505729f7c46b7e460e170f2fa94e9074029e9f6f6ef812557fbb56bcbebfec0e7b9b6634f2a18879de02211e08fa0399cd8774dfdd1fd1955ec71252e0d53df0acd78629e25f744aa6f60252d65d659c040506ce1575b77a5873e09d6a3c637493a04e75580aaf4ffe018fb783edbc83e439794e861ffab9b4d2c9d9b3cb35d58ff7325563ebb045ef75509072d74494e140e0a50f0c02487562fb6287259f07251e539cda2b3895bdad3cdbd023b8779fc0493dc3fe460563cff17d403f99d77a8828c301fb4a673bce167d4937ef27c9f9dcff8e350bc7c04c6abab0d9ae0c4b50a1280ecff99136e4630850a0a283668f6f7a163dbbc5d2bad3bdf260c0c830bdee9e5544c667b5841c9e61d439950b737215db4115bf937dbd188d8abe942c27bdb222dabad08c7d5411d1d33f64b48a2cacfcc74976f93c48c7be58619b24e03f73e0ae71ddd8d9aa3cba8bd5241c901ccbb12047c71df2f1e0f1d8c32b6fbb77079595043e084d71302e670c2c93d5c3dbfac2bb55fd167be16ec2a74adbdffb67689b15bce66a86311136613f7c99ecebd9e46c8b2089e9ce1af7985c3dada61c7f6465192afea33e9693b3b4f750f1c734b959ab9c4e9ee1b884fe587cf7a85870296dad165b34248e76a1aab7a6e29c81561757aef5d293dc52f6f280705c880fb6b86c9e3cb78e6eafab6b717b5670108af7ae4f54ef294e37a35fa85c3f222fd86c258f527908cf424ed2b4e0157871288f709a37900b01a328960d19a4f82637d1571e9bb0d8c7cedc536a6288b33d3a7a4c1914fbd4946cce2209cb735a3e86f82d100d3f3e0ada4de54f1a8b1a4503faea8645b502aee40fb7e0f4a972c5ecd020d00b3ef50deaed2d91418684b7c0c9cee51dbc616861db3992c8be405dd83981022b68b5ddabe3930545b07acea0bfa328def7212adfbdfdb3e2a29b30d8ecae02b08cf0a1e37053c3533fba1d8c214a3a4bf6f6bf768028d5e39af030d42a561e908b6a8adb0870dc59164c6b41eebd6f7cd339047ab3115eb107904d0e869330b8b2ffaa8b07b2a8729871cb589505754bb5d5a8fafbd49c1b210f5591c68f71f166fef3a030eb2d7f3c7b889d398953fdfa85c5a522dae6a699be1eba275739811d6185901a96d74796fd8e2169dc2763bf66683a1564afc2662bf0da774c0f3ad3040b6c9a3b71495e7f7fb2af8baec4432394cfaebae134cecf5903339f4082a7f719532e441fe971cc4f63e23420710a78970362d3ca4f95aac85b62976bb256b2dafe1a81cd4a905973d12b7d9fe80b55dffb5ec11a7f091a10c088fe7b24ca48f3a1adbc64eb5b238420f121b1acc6c4c8cee8625e9b26bfec714553d92b501633b893ee9497d6299c1cd0e1732e3cb3c81775326a622ce31bac61ade3a8d4c188dc5964cbc5187ded1de93a5050726e1d9431f4253ee3d6f8c589d304e66d5b6c275a8b9de7a66c717d98fa5491026ef813fb52417c68a30893b792900520f4533dbcdc5e92b4864957167918ad9781db9181bd90e1f30c58750d5c631c1870d8afe445da4f9e65494985cb2f61ec69a82edb3cf1527d7c07824a62649aac69d7c4fbc5a2fe03e4372a52cef7200d7d012d8e0be071467579d24a817ac5d9bd24b12473ce9d92297384e44ac719eb9c104bf356052de42f123899d850b46a8f3a790dbdaaf2d05560890e3a3d880669538307b7525ca3361609c356bcbd8316d113af68b238582799278bf2b05ff931df04fd8edf741a5d6aa1b6dd5bbeb2532b43c6299130fbe1e60cecbeff951a11f5cc8e3c5ceda6b972a52e5b99ddc0844c20fa96773c6c31a8180e4e2042a9331b440305c6053ce0ff5cb945b42b603ca3c44557288e0760a9d1e367b0ecfe47e9cb0be7a4f3821d1f9bf8ce0084d442c19a144417cf2641027647b9af5dbdfc0d246ffbdbbb1ccd272702035da0120809a713188f544ee7177ef356dd0f7f90664af7994ca49f7fcd53508380b5c074cb829271df0d9f2dc9694d59b08d60eb036c2fb125bdda82a353881a860134c734afea74432376e1e0e8050cc312cb8fc7b614f9e4a2cf2084cffb694045f6a80c687ffe4a05b9f729027117f24e96bbfac5bb1fcb70380fbd849e7db7f35da3b294070868c15e327c7f9b973b3b125a7da178eaca670c38ecc36cfa1bf30e09c9716f4013648129f30e5ba577bd2bd5d6b782fca8820d51ecb8b58fd0099325a5b6dd8f5e92159905ada98825a90c6f2f1435a68644fa3f2e12ce85cc4f95e7d7fbd157a6c60f2923ac5325e0dc99dd56267772016b7e8dcdd31b837899aa02999811f617c8938edf1770d7a282347aa0675aff22c16ce5aac49bce8ce09da67f600cc620d094b5c9001b8dcbad4316bdd5a7c5e7342a370c6272d554ab6483bd2b5ff3b50f170a8184937a41de33da575d35daba03896316323534f1d616c0f745d03405130da3ff4edaee6bc65a05da28795c69b941b5da634d4628113b85201779d48cafe9a7cf05d401ec4e2d95abb7ad7ffe2b5d739ab653f381c942af01cc93101749094673d1da7959ed6a3a4c058dcf7df7aeac52d2e51fec89e3e2f6821ad97073631943568425072bf7ddb1d6626570730a6ef615e987ef70001fcfe22fc75377390369ff8746e9fa689968518d1951b9ed544af5ac5642715fff081cc3192572d5409b00d32d39fb224f78cb39477fb711443a415aa98547b8d3508ccfda42e41f5a786a82e6a56eb6ff5f4317d2413a4a1f8f0d59a078cca5b99e97b9c7e824cc9547e6c90ca2febb33edb407e230ab0fdabad15d869d617ef2c36c90dcb4b1a322972ec87ed4e7fcefc8644ad5821d8aab57a94adef417a6ae5a7da91f04c589c16d51b4fdcce19f4573e5821cbd50cdae4e13c23b22628c81c2743e1aec6d94bbc8af4c65082463c0767fe9ee4aee334de605126c3fe04cdeac70768cb5312aaa81d873b7ab8e10917bfa321f677dbc7f61bec01ec32469c78d1afe8e085b86437439ed615e6fe2641a05cb41f69e917d90c775a2f9e39d506a6a6f540ef0ae2d4f954cfb1070445407592967dbdc4a15b84ecf8d61f9c675b844c49d8221600aa09140692777def80bbcd4d56fd18701e60ed67c8c044ebbcfe8f2279b3b74e8ecbc51cecfe8594d0945df93d68b17d2ec78f48e9870fef5eea32f6b50563a828f630ee83aa507109cb20457b6b42d5ce5f3357f179b90a939e36fd32be5c8c4f3a76235e8d89df99d4ac755afd14b14d102c2fba8aedb6743bc942e2468069e437a6c593dc0a147cd375dc68934ba3fcaf725ce186f69fff739e8f8a6c89c82559a2f1115f0b93028d37baa54a482a97d6f426edf678229042dcf806d747514b8d86b690adeef4eb178dc9b345035a030bb834821c1c064b69306f57765a39e022c9abcf19c2da3533bcdd30b77a97ad3ca44fe8388ea54f1b1ed6d46be660ebd51715f605644c9375fc50733aa7dae481691241e6dd54cca1c47f468289a8f0838377849d9189a1ae8a8350c823c720fe40e7ffc1ca2e2411c772a3509b76b5f85596b1454d4e3422f8918fd4383c7020fc791f03fd850c37209ad301f0b0fb536d3e0a6cbee4d19b03f5a03bf92cf64778b76cc60ea6918094261d5f5a60e455f0cf7b84655677918b4cc722387be25d786865ec2a1b9f75c25eff52b534dcea4dc8b09a63394432c939b7ac38f3276bfc220803eb2f3c9460d7c6412fdc04c748602749b25addb1a4c9f6709d2a2935fa2f74e56bffecbeedbc645a7c9b77c13d79ca23ed866c46875ccf1918386c6d83b20ed86b7dcb7e1b040b753c73e2ad3921f05a399ad67ec7a9df630e1a2ae8ff74ea5e00dff6f2dfce3b1c8646d5f947181843a69b82df3f15cebd7168c87976bc598e1058636f4af23c280092a735820403590a6c065854653e6e12772037e8f221d8e48fb1a30f9e909c6b2e3e6ce4bdc808616d232ce88acf8f9a837d100f618a8e3fa0c7227ccda3cf88e02d66b7d2c430b1252f78267132c8927bdae7bc84953b5c271b64d8e81aebb202c79b6cc526dafdee92da4af6356fb54071c26ec25aa2086e59cb1183172e093b84612f938997c9d5d1036718792e5f291b2b36c2dc832524c7db54745aca1a829845a80ed631989339607776965518f89465a89a4342e4465717af858212d79a933775907de7aac428d5efb78bf354117f2ab54cfad82d0b5a744babc0dd2b87f1a8e4cbf96bcfb665c335588c1d22cdfaa3852bef3c91a13286764c0ba44c72cc37345731cb1e642bba556b2bfba771b99661f954d22c5e437752930eb11490647a2b26afb7a23f1a07316a51c8def4b57c70cea01c1a69fb482e7700e488459cc1293442f6b26e1ca933cd30322c6aca178f8e9f88b06a75358aaa87a2037aa51ec94a5ca7fc5373bb1694c59febdd78c1dd1b1daec60e29712fd393ffe4e8f659568c9a4e6caf8c70a59a259c157052323e083c47c465bbf333cd393d18cbb3467c6ee8ec6acd0feb53b3923005f563d5e703b3555a8e8f415411a8e67d6f49697cf7f9e49012d4c4b8311ca9f429c74cce655d0703b4020787633705f860c7c6d47956d377e770df3f316956c8859e526b40e8d5f61c5782153916efe1f4fc646cce2a7ce0dcaf6d32ed9410029ee0622da4ca5981ec49d88f3bdc8f86801871a6d76cbcfd9ab85c033ad0aca4925bd885e2ea6026a6ef9f211bd18833296ae0e6a982cce2d16b5452594b419695fdb7ff8fe633540e67ce9ebe369fe6d45324069a404f7af2c0c787e15b214cc3fc628f74432b012328dd93ecf150c7770875f55b5f1d5cf871be9ebe1db7875dc3a5080684672e3ebafbc3ab37fa1901eb986400cb96f3b3817667cd626a6c46616969a15c1c78b6124c678a1dba521e16cba513521d12398013c70f76a3c887a20212a85ca34d54e0d1e8c63cf1e0345d0d1d45d2096e08d722214a6cef7b7bfd4671e6b1416f6694e795bc19e7dc827d861588ecda82710f38d7f3306ae56562591e08b701a803cda99fca9408b3395fbba9407d149aa59aa1ea53d1d1618a67c4cd59fed13e23f9365c4bbad1f009712aceeae566425987db32e59f1cb80bc1861977dbdda87476a0d328ecf830d431fc33b23a09c8f86e3c3467bc91cc8eddd60bc3c0309a961b02532a462f7966460c923b8baa236091b116023c927c501ae78473aae12555c55b39f97741dc32cb2ac11cd6e7547da7f95a3a34bb97767a6a90dd5337c2ce9951f4a43dad32a8864a1b2e24e7a18447ee3a026f4b161030dcb8ef514a725f38a0609cff84a704a72f7f1f5a5474a4f4d85ef87813a11ba86655bb421988e5e788e59c92feaeb8697603a3d67a218acfa20f4e11d0c8ff23868da856fb2ea2a58f431e195ad5db2a86cc4e11a72e0da34a37627d30e40c911c8003736eddd6ca566eee05916f2acc10fc6d55440962f78094777e4023b81b4f8eea9e782c94f4aed27423ea62b4c5b21274f447a1f63aebb9f118d4bcaf77cb82365c4537ea6fa84262d9683151ec86e101f0995d7131543eada2ae0e2e18157ac7c82f2253ff44986ef3abb2483e00e5662284f92296dfc479d6c9e6f070c7689c0118f4c5f1dc1a48542f00eb5eae67f91bdcc675b38fb13251a05421412001d2da0f3f25d99a8759683ee1e0dfc651ffc262df1fbcfcea3ae8c3379ee79cca7d91ef196cc047c8179619ad6cc4791371ef92b377e63b66be402458adb9da94684953e864e4ef44dca8bf82e699395d5cb15175806961b82dbd73ff37a78b739a700f59e41383cd1364dec38474525c7c51a52cabb7983042836af3f2534bf684ad106bde36aad56</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;hbe hbe-container&quot; id=&quot;hexo-blog-encrypt&quot; data-wpm=&quot;Oh, this is an invalid password. Check and try again, please.&quot; data-whm=&quot;OOP</summary>
      
    
    
    
    <category term="ä¸ªäººæ—¥å¿—" scheme="http://luhao.wiki/categories/%E4%B8%AA%E4%BA%BA%E6%97%A5%E5%BF%97/"/>
    
    <category term="ä¸ªäººæ—¥å¿—" scheme="http://luhao.wiki/categories/%E4%B8%AA%E4%BA%BA%E6%97%A5%E5%BF%97/%E4%B8%AA%E4%BA%BA%E6%97%A5%E5%BF%97/"/>
    
    
    <category term="vim" scheme="http://luhao.wiki/tags/vim/"/>
    
  </entry>
  
  <entry>
    <title>Googleè¯„åˆ†å¡ğŸ’¯åŠè‡ªè¯„</title>
    <link href="http://luhao.wiki/posts/grade/"/>
    <id>http://luhao.wiki/posts/grade/</id>
    <published>2023-06-27T16:40:51.000Z</published>
    <updated>2023-08-16T17:08:18.021Z</updated>
    
    <content type="html"><![CDATA[<div class="admonition note"><p class="admonition-title">å¯¼è¯»</p><ul><li>Googleå°†æŠ€æœ¯èƒ½åŠ›åˆ’åˆ†ä¸º 0~11 çš„ç­‰çº§</li><li>è‡ªæˆ‘è¯„ä¼°æŠ€æœ¯ï¼Œåˆ¤æ–­ä¸‹ä¸€æ­¥éœ€è¦ä½œå‡ºçš„åŠªåŠ›</li></ul></div><h2 id="â†“-Self-Evaluation">â†“ Self-Evaluation</h2><table><thead><tr><th style="text-align:left">â†“ åŸºç¡€è¦æ±‚</th><th style="text-align:center">grade</th></tr></thead><tbody><tr><td style="text-align:left">ç†Ÿæ‚‰æ•°æ®ç»“æ„ä¸ç®—æ³•</td><td style="text-align:center">2</td></tr><tr><td style="text-align:left">ç†Ÿç»ƒä½¿ç”¨ C++11</td><td style="text-align:center">3</td></tr><tr><td style="text-align:left">ç†Ÿæ‚‰å¹¶æŒæ¡ C++é«˜çº§ç‰¹æ€§ (14/17/20)</td><td style="text-align:center">1</td></tr><tr><td style="text-align:left">ç†Ÿç»ƒä½¿ç”¨ Python ç­‰è„šæœ¬è¯­è¨€</td><td style="text-align:center">4</td></tr><tr><td style="text-align:left">ç†Ÿæ‚‰batchã€Shellã€Linuxå¸¸è§æŒ‡ä»¤</td><td style="text-align:center">1</td></tr><tr><td style="text-align:left">ç†Ÿæ‚‰MySQLç­‰æ•°æ®åº“çš„è®¾è®¡ã€ä¼˜åŒ–</td><td style="text-align:center">0</td></tr><tr><td style="text-align:left">ç†Ÿæ‚‰ç¼–è¯‘åŸç†ã€ç¼–è¯‘ä¼˜åŒ–</td><td style="text-align:center">1</td></tr><tr><td style="text-align:left">ç†Ÿæ‚‰ vscodeã€sublimeã€vim ç­‰IDEã€Editor</td><td style="text-align:center">5</td></tr><tr><td style="text-align:left">ç†Ÿæ‚‰ Jenkinsã€TeamCity ç­‰ CI&amp;CD å¹³å°</td><td style="text-align:center">2</td></tr><tr><td style="text-align:left">ç†Ÿæ‚‰ ChatGPTã€CodeMaker ç­‰ AIå·¥å…·</td><td style="text-align:center">1</td></tr><tr><td style="text-align:left">ç†Ÿæ‚‰Linuxå†…æ ¸ï¼Œå¦‚è¿›ç¨‹ç®¡ç†ã€å†…å­˜ç®¡ç†ã€æ–‡ä»¶ç³»ç»Ÿç­‰</td><td style="text-align:center">1</td></tr><tr><td style="text-align:left">ç†Ÿæ‚‰ç½‘ç»œåè®®å’Œç½‘ç»œç¼–ç¨‹ï¼Œç†Ÿæ‚‰websocketã€HTTPã€socketã€TCP/IPç­‰</td><td style="text-align:center">1</td></tr><tr><td style="text-align:left">â†“ <strong>C/C++é¢†åŸŸ</strong></td><td style="text-align:center"></td></tr><tr><td style="text-align:left">å†…å­˜ç®¡ç†ã€å†…å­˜åˆ†é…ã€ASanåŸç†ã€å†…å­˜é”™è¯¯åŠæ’æŸ¥</td><td style="text-align:center">1</td></tr><tr><td style="text-align:left">æ¨¡æ¿ã€SFINAEã€type traitsã€metaprogramming</td><td style="text-align:center">1</td></tr><tr><td style="text-align:left">å¹¶å‘ã€memory orderã€åŒæ­¥ã€äº’æ–¥ã€boost::asio</td><td style="text-align:center">0</td></tr><tr><td style="text-align:left">ç¼–è¯‘ä¼˜åŒ–ã€SIMDã€ISPCã€CPUæ€§èƒ½åˆ†æ</td><td style="text-align:center">0</td></tr><tr><td style="text-align:left">C++ç¼–ç è§„èŒƒ</td><td style="text-align:center">2</td></tr><tr><td style="text-align:left">â†“ <strong>Python2/3é¢†åŸŸ</strong></td><td style="text-align:center"></td></tr><tr><td style="text-align:left">Todo</td><td style="text-align:center"></td></tr><tr><td style="text-align:left">â†“ <strong>å·¥å…·/piplineé¢†åŸŸ</strong></td><td style="text-align:center"></td></tr><tr><td style="text-align:left">Jenkins æ—¥å¸¸å·¥ä½œä½¿ç”¨ï¼Œæ— é˜»ç¢</td><td style="text-align:center">3</td></tr><tr><td style="text-align:left">VSCode æ—¥å¸¸å¼€å‘ä½¿ç”¨ã€å¤šä¸ªæ’ä»¶å¼€å‘ç»éªŒ</td><td style="text-align:center">5</td></tr><tr><td style="text-align:left">Vim ç†Ÿç»ƒä½¿ç”¨ã€vimrcé…ç½®</td><td style="text-align:center">4</td></tr><tr><td style="text-align:left">Git åŸºæœ¬çš„GUIã€CMDæ“ä½œ</td><td style="text-align:center">2 ~ 3</td></tr><tr><td style="text-align:left">â†“ <strong>åŠ åˆ†é¡¹</strong></td><td style="text-align:center"></td></tr><tr><td style="text-align:left">å…·å¤‡å†…å­˜ä¼˜åŒ–ç»éªŒã€ç†Ÿæ‚‰linuxå†…å­˜åˆ†é…</td><td style="text-align:center">1</td></tr><tr><td style="text-align:left">ç†Ÿæ‚‰GPUä½¿ç”¨ï¼Œæˆ–æœ‰åº•å±‚åŸºç¡€åº“ï¼ˆCUDAï¼Œmklã€openblasç­‰ï¼‰ä¼˜åŒ–ç»éªŒ</td><td style="text-align:center">0 ~ 1</td></tr><tr><td style="text-align:left">è‰¯å¥½çš„ç³»ç»Ÿè®¾è®¡èƒ½åŠ›ï¼Œå¦‚ performanceã€reliabilityã€availability å¤šç»´åº¦è€ƒé‡ç¨‹åº</td><td style="text-align:center">2</td></tr><tr><td style="text-align:left">ç†Ÿæ‚‰æœºå™¨å­¦ä¹ å¹³å°ç›¸å…³å·¥å…·ï¼Œæ¯”å¦‚k8sï¼Œkubeflowï¼Œmlflowï¼Œautomlç­‰</td><td style="text-align:center">0</td></tr><tr><td style="text-align:left">æœ‰è§†é¢‘è§£ç å’Œæ¸²æŸ“å¼€å‘ç»éªŒè€…ä¼˜å…ˆ</td><td style="text-align:center">2</td></tr><tr><td style="text-align:left">æœ‰å­˜å‚¨ç³»ç»Ÿã€åˆ†å¸ƒå¼ç³»ç»Ÿç­‰åº•å±‚å¼€å‘ç»éªŒ</td><td style="text-align:center">0</td></tr></tbody></table><br>## â†“ Google-Standards<table><thead><tr><th style="text-align:center">ç­‰çº§</th><th style="text-align:left">æ ‡å‡†</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">You are unfamiliar with the subject area</td></tr><tr><td style="text-align:center"></td><td style="text-align:left">ä¸€çªä¸é€š</td></tr><tr><td style="text-align:center">1</td><td style="text-align:left">You can read/understand the most fundamental aspects of the subject area</td></tr><tr><td style="text-align:center"></td><td style="text-align:left">ç†è§£åŸºæœ¬æ¦‚å¿µ</td></tr><tr><td style="text-align:center">2</td><td style="text-align:left">Ability to implement small changes,understand basic principles and able to figure out additional details with minimal help</td></tr><tr><td style="text-align:center"></td><td style="text-align:left">èƒ½å¤Ÿå®ç°ä¸€äº›å°æ”¹åŠ¨ï¼Œåœ¨åˆ«äººå¸®åŠ©ä¸‹é’»ç ”æ›´å¤šç»†èŠ‚</td></tr><tr><td style="text-align:center">3</td><td style="text-align:left">Basic proficiency in a subject area without relying on help</td></tr><tr><td style="text-align:center"></td><td style="text-align:left">åŸºæœ¬æŒæ¡å’Œç†Ÿç»ƒä½¿ç”¨</td></tr><tr><td style="text-align:center">4</td><td style="text-align:left">You are comfortable with the subject area and all routine work on it</td></tr><tr><td style="text-align:center"></td><td style="text-align:left">è¶³å¤Ÿç²¾é€šï¼Œè¶³å¤Ÿåº”å¯¹æ‰€æœ‰æ—¥å¸¸å·¥ä½œ</td></tr><tr><td style="text-align:center">5</td><td style="text-align:left">An even lower degree of reliance on reference materials. Deeper skills in a field or specific technology in the subject area.</td></tr><tr><td style="text-align:center"></td><td style="text-align:left">æ·±è€•æŸä¸ªç»†åˆ†é¢†åŸŸ</td></tr><tr><td style="text-align:center">6</td><td style="text-align:left">Ability to develop large programs and systems from scratch</td></tr><tr><td style="text-align:center"></td><td style="text-align:left">ç‹¬ç«‹å¼€å‘å¤§å‹ç³»ç»Ÿ</td></tr><tr><td style="text-align:center">7~10</td><td style="text-align:left">è„šè¸å®åœ°æ…¢æ…¢æ¥å§â€¦</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;admonition note&quot;&gt;&lt;p class=&quot;admonition-title&quot;&gt;å¯¼è¯»
&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;Googleå°†æŠ€æœ¯èƒ½åŠ›åˆ’åˆ†ä¸º 0~11 çš„ç­‰çº§&lt;/li&gt;
&lt;li&gt;è‡ªæˆ‘è¯„ä¼°æŠ€æœ¯ï¼Œåˆ¤æ–­ä¸‹ä¸€æ­¥éœ€è¦ä½œå‡ºçš„åŠªåŠ›&lt;/li&gt;
&lt;/ul&gt;
&lt;/d</summary>
      
    
    
    
    <category term="ä¸ªäººæ—¥å¿—" scheme="http://luhao.wiki/categories/%E4%B8%AA%E4%BA%BA%E6%97%A5%E5%BF%97/"/>
    
    <category term="ä¸ªäººæ—¥å¿—" scheme="http://luhao.wiki/categories/%E4%B8%AA%E4%BA%BA%E6%97%A5%E5%BF%97/%E4%B8%AA%E4%BA%BA%E6%97%A5%E5%BF%97/"/>
    
    
    <category term="C++" scheme="http://luhao.wiki/tags/C/"/>
    
    <category term="Python" scheme="http://luhao.wiki/tags/Python/"/>
    
    <category term="linux" scheme="http://luhao.wiki/tags/linux/"/>
    
    <category term="vim" scheme="http://luhao.wiki/tags/vim/"/>
    
  </entry>
  
  <entry>
    <title>ã€ç½‘ç»œã€‘HTTPåè®®è¿›é˜¶</title>
    <link href="http://luhao.wiki/posts/http/2/"/>
    <id>http://luhao.wiki/posts/http/2/</id>
    <published>2023-06-26T12:51:27.000Z</published>
    <updated>2023-07-01T17:08:49.171Z</updated>
    
    <content type="html"><![CDATA[<div class="admonition note"><p class="admonition-title">å¯¼è¯»</p><ul><li><a href="https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/%E9%80%8F%E8%A7%86HTTP%E5%8D%8F%E8%AE%AE">ä¸“æ ï¼šé€è§†HTTPåè®®</a> å¢™è£‚æ¨è â­</li><li><a href="/posts/http-1/">HTTPåè®®å…¥é—¨</a></li></ul></div><div class="markmap-container" style="height:500px">  <svg data="{&quot;t&quot;:&quot;root&quot;,&quot;d&quot;:0,&quot;v&quot;:&quot;&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[0,1]},&quot;v&quot;:&quot;HTTPæ•°æ®ç¼–ç &quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[1,2]},&quot;v&quot;:&quot;<a href=\&quot;#MIME-type\&quot;>MIME-type</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[2,3]},&quot;v&quot;:&quot;&amp;quot;Accept&amp;quot;&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[3,4]},&quot;v&quot;:&quot;&amp;quot;Content-Type&amp;quot;&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[4,5]},&quot;v&quot;:&quot;HTTPå¤§æ–‡ä»¶&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[5,6]},&quot;v&quot;:&quot;æ•°æ®å‹ç¼©&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[6,7]},&quot;v&quot;:&quot;chunkedä¼ è¾“&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[7,8]},&quot;v&quot;:&quot;HTTPè¿æ¥&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[8,9]},&quot;v&quot;:&quot;çŸ­è¿æ¥&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[9,10]},&quot;v&quot;:&quot;é•¿è¿æ¥&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[10,11]},&quot;v&quot;:&quot;<a href=\&quot;#é˜Ÿé¦–é˜»å¡\&quot;>é˜Ÿé¦–é˜»å¡</a>&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[11,12]},&quot;v&quot;:&quot;<a href=\&quot;#Cookie\&quot;>Cookie</a>&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[12,13]},&quot;v&quot;:&quot;<a href=\&quot;#CookieåŸç†\&quot;>CookieåŸç†</a>&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:3,&quot;p&quot;:{&quot;lines&quot;:[13,14]},&quot;v&quot;:&quot;<a href=\&quot;#Cookieç”Ÿå‘½å‘¨æœŸ\&quot;>Cookieç”Ÿå‘½å‘¨æœŸ</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:3,&quot;p&quot;:{&quot;lines&quot;:[14,15]},&quot;v&quot;:&quot;<a href=\&quot;#Cookieä½œç”¨åŸŸ\&quot;>Cookieä½œç”¨åŸŸ</a>&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[15,16]},&quot;v&quot;:&quot;Cookieåº”ç”¨&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:3,&quot;p&quot;:{&quot;lines&quot;:[16,17]},&quot;v&quot;:&quot;<a href=\&quot;#Cookieåº”ç”¨ï¼šèº«ä»½è¯†åˆ«â­\&quot;>èº«ä»½è¯†åˆ«</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:3,&quot;p&quot;:{&quot;lines&quot;:[17,18]},&quot;v&quot;:&quot;<a href=\&quot;#Cookieåº”ç”¨ï¼šå¹¿å‘Šè¿½è¸ª\&quot;>å¹¿å‘Šè¿½è¸ª</a>&quot;}]}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[18,19]},&quot;v&quot;:&quot;<a href=\&quot;#HTTPä»£ç†\&quot;>HTTPä»£ç†</a>&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[19,20]},&quot;v&quot;:&quot;<a href=\&quot;#ä»£ç†å­—æ®µ\&quot;>ä»£ç†å­—æ®µ</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[20,21]},&quot;v&quot;:&quot;<a href=\&quot;#ä»£ç†åè®®\&quot;>ä»£ç†åè®®</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[21,22]},&quot;v&quot;:&quot;<a href=\&quot;#è´Ÿè½½å‡è¡¡\&quot;>è´Ÿè½½å‡è¡¡</a>&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[22,23]},&quot;v&quot;:&quot;Cache&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[23,24]},&quot;v&quot;:&quot;<a href=\&quot;#Cacheï¼šæµè§ˆå™¨\&quot;>æµè§ˆå™¨cache</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[24,25]},&quot;v&quot;:&quot;<a href=\&quot;#Cacheï¼šæœåŠ¡å™¨\&quot;>æœåŠ¡å™¨cache</a>&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[25,26]},&quot;v&quot;:&quot;<a href=\&quot;#Chromeè°ƒè¯•\&quot;>Chromeè°ƒè¯•</a>&quot;}],&quot;p&quot;:{}}"></svg></div><h2 id="HTTPæ•°æ®ç¼–ç ">HTTPæ•°æ®ç¼–ç </h2><p><font color="#FF1E10"><strong>todo</strong></font></p><h3 id="MIME-type">MIME-type</h3><p>ä½¿ç”¨svnæ›´æ–°çš„æ—¶å€™æœ‰ä¸€æ ä¼šæ ‡æ³¨ <code>Mime type</code>ï¼Œå¯ä»¥è§‚å¯Ÿåˆ°é™¤äº†å¸¸è§ä»£ç æ–‡ä»¶å¤–ï¼Œéƒ½æ˜¯ä»¥ <code>application/octet-stream</code> æ ¼å¼ä¼ è¾“ï¼Œå®ƒä»£è¡¨æœªçŸ¥çš„äºŒè¿›åˆ¶æ•°æ®ã€‚</p><p><img src="/images/svn-mime-type.png" alt=""></p><h2 id="HTTPå¤§æ–‡ä»¶">HTTPå¤§æ–‡ä»¶</h2><p><font color="#FF1E10"><strong>todo</strong></font></p><h2 id="HTTPè¿æ¥">HTTPè¿æ¥</h2><p><a href="/posts/http-1/#TCP">å‰é¢è¯´è¿‡</a>ï¼ŒHTTPåè®® æ˜¯è¿è¡Œåœ¨ TCP/IPåè®® ä¹‹ä¸Šï¼Œå› æ­¤æ¯ä¸€æ¬¡æ–°çš„HTTPè¿æ¥ï¼Œéƒ½éœ€è¦ç»è¿‡TCPåè®®çš„ <strong>â€œ3æ¬¡æ¡æ‰‹ &amp; 4æ¬¡æŒ¥æ‰‹â€</strong>ï¼Œè¿™æ— å½¢ä¸­é™ä½äº†HTTPåè®®è¿æ¥çš„ä»£ä»·ã€‚</p><p>å› ä¸º TCPä½äºä¼ è¾“å±‚ï¼ŒHTTPä½äºåº”ç”¨å±‚ï¼Œæ‰€ä»¥å¯ä»¥ç”¨å¦‚ä¸‹çš„ç±»æ¯”æ¥ç†è§£è¿æ¥çš„ä»£ä»·ï¼š</p><ul><li>å¼€å…³æœºï¼šTCPè¿æ¥</li><li>ä½¿ç”¨ç”µè„‘åŠå…¬ï¼šHTTPè¿æ¥</li></ul><p>æ¯æ¬¡ä½¿ç”¨ç”µè„‘åŠå…¬ï¼Œéƒ½éœ€è¦æ‰“å¼€ç”µè„‘ï¼Œåœ¨ä½¿ç”¨å®Œæ¯•ååˆéœ€è¦å…³é—­ç”µè„‘ã€‚è¿™å°±å¥½æ¯” <strong>HTTP çŸ­è¿æ¥</strong>ã€‚è€Œæ›´å¸¸è§„åœ°åšæ³•æ˜¯ï¼Œä¿æŒç”µè„‘çš„å§‹ç»ˆå¼€å¯ï¼Œè¿™æ ·åˆ©äºéšæ—¶ä½¿ç”¨ï¼Œè¿™å°±å¥½æ¯” <strong>HTTP é•¿è¿æ¥</strong>ã€‚</p><p><img src="https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/%E9%80%8F%E8%A7%86HTTP%E5%8D%8F%E8%AE%AE/assets/57b3d80234a1f1b8c538a376aa01d3b4.png" alt=""></p><h3 id="Connectionå­—æ®µ">Connectionå­—æ®µ</h3><p>å½“HTTPè¯·æ±‚é‡‡å–é•¿è¿æ¥æ—¶ï¼Œåœ¨å“åº”æŠ¥æ–‡çš„ â€œConnectionâ€ å­—æ®µä¼šæ ‡è®°ä¸º <strong>keep-alive</strong>ï¼Œæ­¤æ—¶æœåŠ¡å™¨ä¸ä¼šåœ¨çŸ­æ—¶é—´å†…æ–­å¼€è¿æ¥ï¼Œä½†æ˜¯ä¸ºäº†é™ä½æœåŠ¡å™¨çš„æ— æ•ˆå ç”¨ï¼ŒWeb-Server å¾€å¾€ä¼šåœ¨ä¸€æ®µæ—¶é—´å†…è‹¥æ²¡æœ‰ä»»ä½•æ•°æ®æ”¶å‘ï¼Œä¾¿ä¼šä¸»åŠ¨æ–­å¼€è¿æ¥ï¼Œæ–­å¼€åä¼šæ”¶åˆ° â€œConnection: closeâ€ çš„å­—æ®µã€‚</p><h3 id="é˜Ÿé¦–é˜»å¡">é˜Ÿé¦–é˜»å¡</h3><p>å› ä¸º HTTPåè®® é‡‡å– â€œä¸€é—®ä¸€ç­”â€ çš„æ¨¡å¼ï¼Œå³å…¸å‹çš„ <strong>FIFO</strong> ç»“æ„ï¼Œå½“é˜Ÿé¦–çš„è¯·æ±‚å› ä¸ºå¤„ç†å¤ªæ…¢è€Œè€½è¯¯æ—¶é—´ï¼Œé‚£ä¹ˆé˜Ÿåˆ—åé¢çš„æ‰€æœ‰è¯·æ±‚ä¹Ÿä¼šç›¸åº”åœ°è¢«é˜»å¡ï¼Œè¿™å°±æ˜¯ <a href="https://en.wikipedia.org/wiki/Head-of-line_blocking"><strong>Head-of-line blocking</strong></a>ã€‚</p><p>ç±»æ¯”ç†è§£ä¸ºï¼šé£Ÿå ‚æ’é˜Ÿæ‰“é¥­ï¼Œæ¯æ¬¡åˆ·å¡æ˜¯ä¸€æ¬¡ Requestï¼Œæ¯æ¬¡é¢†åˆ°é¥­æ˜¯ä¸€æ¬¡ Responseï¼Œæ¯å¤„ç†å®Œä¸€æ¬¡æˆå¯¹çš„ Request-Responseï¼Œé˜Ÿä¼æ‰èƒ½å¾€å‰æ¨è¿›ä¸€æ­¥ã€‚åªè¦å‰é¢æ‰“é¥­çš„æ…¢äº†ï¼Œåé¢æ‰€æœ‰äººéƒ½ä¼šå—å½±å“ã€‚</p><p>è§£å†³æ–¹æ¡ˆæ˜¯ï¼šå¹¶å‘è¿æ¥ï¼Œå³å¢åŠ æ‰“é¥­çš„çª—å£ã€‚è¿™é‡Œä¸è¯¦ç»†ä»‹ç»ã€‚</p><h2 id="Cookie">Cookie</h2><p>å‰é¢è¯´è¿‡ <strong>HTTPè¿æ¥ æ˜¯æ— çŠ¶æ€çš„ï¼Œå³æ²¡æœ‰ä»»ä½•è®°å¿†</strong>ã€‚å³ä½¿æŸä¸ªè¯·æ±‚ä¼šè®©æœåŠ¡å™¨å‡ºç°500çš„é”™è¯¯ï¼Œä¸‹æ¬¡è¯·æ±‚æ—¶æœåŠ¡å™¨ä¾ç„¶ä¼š â€œçƒ­æƒ…æ‹›å¾…â€ã€‚è¿™è¿«åˆ‡å¾—éœ€è¦ä¸€ç§ç¼“å­˜çš„æœºåˆ¶ï¼ŒCookieåº”è¿è€Œç”Ÿã€‚</p><blockquote><p>Cookie æ˜¯æœåŠ¡å™¨å§”æ‰˜æµè§ˆå™¨å­˜å‚¨çš„ä¸€äº›æ•°æ®ï¼Œè®©æœåŠ¡å™¨æœ‰äº†â€œè®°å¿†èƒ½åŠ›â€</p></blockquote><h3 id="CookieåŸç†">CookieåŸç†</h3><p>ResponseæŠ¥æ–‡ä¸­ï¼Œ<strong>åˆ©ç”¨ <code>Set-Cookie</code>å­—æ®µå‘é€å¤šä¸ª â€œkey=valueâ€ å½¢å¼çš„ cookieå€¼</strong>ï¼Œè¿™äº›ä¼šç”±æµè§ˆå™¨è´Ÿè´£è®°å½•ä¸‹æ¥ã€‚å½“æµè§ˆå™¨ä¸‹æ¬¡è®¿é—®åŒæ ·çš„åœ°å€æ—¶ï¼ŒRequestæŠ¥æ–‡ä¼šè‡ªåŠ¨åˆ©ç”¨ <code>Cookie</code>å­—æ®µå°†æœ¬åœ°ç¼“å­˜çš„ cookie å‘é€ç»™æœåŠ¡å™¨ï¼Œè¿™æ ·æœåŠ¡å™¨å°±çŸ¥é“è‡ªå·±çš„èº«ä»½äº†ã€‚</p><p>å› ä¸º Cookie æ˜¯ä¸æµè§ˆå™¨ç»‘å®šçš„ï¼Œå¦‚æœä½ æ¢ä¸ªæµè§ˆå™¨æˆ–è€…æ¢å°ç”µè„‘ï¼Œå°±ä¼šä¸¢å¤±ä¹‹å‰çš„ Cookieè®°å½•ï¼Œæ­¤æ—¶æœåŠ¡å™¨ä¹Ÿä¼šé‡èµ°ä¸€éæ–°çš„ <code>Set-Cookie</code> æµç¨‹ã€‚</p><h3 id="Cookieç”Ÿå‘½å‘¨æœŸ">Cookieç”Ÿå‘½å‘¨æœŸ</h3><p>Cookieæ‹¥æœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸï¼Œå®ƒé€šè¿‡ <code>Expires</code> æˆ– <code>Max-Age</code> ä¸¤ä¸ªå­—æ®µå®ç°ã€‚å½“è¶…è¿‡æ ‡è®°çš„æœ‰æ•ˆæœŸåï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨åœ¨æœ¬åœ°åˆ é™¤è®°å½•ï¼Œä¸ä¼šå†é€šè¿‡HTTPè¯·æ±‚å‘é€ç»™æœåŠ¡å™¨ã€‚</p><ul><li><code>Expires</code>ï¼šè®°å½•â€œè¿‡æœŸæ—¶é—´â€ï¼Œå¦‚ <code>Fri, 07-Jun-23 20:00:00 GMT</code></li><li><code>Max-Age</code>ï¼šè®°å½•â€œä¿è´¨æœŸâ€ï¼Œå•ç§’æ˜¯ç§’ã€‚å°†æµè§ˆå™¨æ”¶åˆ°ç›¸åº”çš„æ—¶é—´åŠ ä¸Š <code>Max-Age</code>ï¼Œå³å¾—åˆ° <code>Expires</code></li></ul><h3 id="Cookieä½œç”¨åŸŸ">Cookieä½œç”¨åŸŸ</h3><p>æµè§ˆå™¨ä¼šå­˜å‚¨å¤§é‡çš„Cookiesï¼Œå› æ­¤éœ€è¦æ ‡è®°å…¶ä½œç”¨åŸŸï¼Œå³å‘é€ç»™å“ªä¸ªæœåŠ¡å™¨æˆ–è€…URLï¼Œå¸¸ç”¨å­—æ®µæ˜¯ï¼šï¼ˆä¸æ¸…æ¥šçš„æ¨èé˜…è¯» <a href="/posts/http-1/#URL">HTTPåè®®ä¹‹URL</a>ï¼‰</p><ul><li><code>Domain</code>ï¼šåŸŸå</li><li><code>Path</code>ï¼šè·¯å¾„</li></ul><h3 id="Cookieåº”ç”¨ï¼šèº«ä»½è¯†åˆ«â­">Cookieåº”ç”¨ï¼šèº«ä»½è¯†åˆ«â­</h3><p>ç™»å½•taobaoç­‰ç”µå•†ç½‘ç«™æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨ä¿å­˜ä½ çš„ç™»å½•è´¦æˆ·ï¼ˆæˆ–å¯†ç ï¼‰ï¼Œå°±ä¾¿æ˜¯åˆ©ç”¨cookieså®ç°çš„ã€‚å®ƒåŒæ—¶è¿˜ä¼šè®°å½•ä½ çš„æµè§ˆè®°å½•å’Œè´­ç‰©è½¦ã€‚</p><p>å¤§æ¦‚æ ¼å¼ä¸ºï¼š<code>name=xxxxx....</code></p><h3 id="Cookieåº”ç”¨ï¼šå¹¿å‘Šè¿½è¸ª">Cookieåº”ç”¨ï¼šå¹¿å‘Šè¿½è¸ª</h3><p>å½“ä½ æµè§ˆå„ç§ç½‘ç«™æ—¶ï¼Œå®ƒä»¬ä¼šæ ¹æ®ä½ çš„è®¿é—®å–œå¥½ä½œè¡Œä¸ºåˆ†æï¼Œç„¶åå®šå‘æ¨èä¸€äº›å›¾ç‰‡å¹¿å‘Šç»™ä½ ï¼Œè¿™å°±æ˜¯åˆ©ç”¨cookiesçš„åŸç†ã€‚<br>è¿™éƒ¨åˆ†æˆä¸º â€œç¬¬ä¸‰æ–¹Cookieâ€ï¼Œå±äºæœé›†ç”¨æˆ·éšç§çš„è¡Œä¸ºï¼Œæµè§ˆå™¨ç»å¸¸ä¼šå¼¹å‡ºç¡®è®¤æ¡†ä»¥è¯·æ±‚æƒé™ã€‚</p><h2 id="HTTPä»£ç†">HTTPä»£ç†</h2><p>ä¼ ç»Ÿçš„HTTPè¯·æ±‚æ˜¯ <code>Client-Server</code>ï¼Œç°åœ¨å¸¸å¸¸æœ‰â€œç¬¬ä¸‰è€…æ’è¶³â€ï¼Œå³åœ¨ä¸­é—´ä¼šå¼•å…¥ä¸€ä¸ª <strong>ä»£ç†æœåŠ¡å™¨ï¼ˆProxy Serverï¼‰</strong>ï¼Œå®ƒçš„è§’è‰²æ˜¯åŒé¢çš„ï¼š</p><ul><li>é¢å¯¹ä¸Šæ¸¸ï¼šå……å½“å®¢æˆ·ç«¯ï¼Œå‘é€è¯·æ±‚</li><li>é¢å¯¹ä¸‹æ¸¸ï¼šå……å½“æœåŠ¡ç«¯ï¼Œå“åº”è¯·æ±‚</li></ul><div class="admonition note"><p class="admonition-title">ç±»æ¯”ï¼šæ¶ˆè´¹è€…ï¼ˆæµè§ˆå™¨ï¼‰â€”â€” ä¾¿åˆ©åº—ï¼ˆä»£ç†ï¼‰â€”â€” æºæœåŠ¡å™¨ï¼ˆæ‰¹å‘å¸‚åœºï¼‰</p></div><div class="admonition note"><p class="admonition-title">å®šç†ï¼šè®¡ç®—æœºé¢†åŸŸçš„ä»»ä½•é—®é¢˜ï¼Œéƒ½å¯ä»¥é€šè¿‡å¼•å…¥ä¸€ä¸ªä¸­é—´å±‚æ¥è§£å†³</p></div><p><img src="/images/proxy-server.png" alt=""></p><h3 id="ä»£ç†å­—æ®µ">ä»£ç†å­—æ®µ</h3><p><strong>ä»£ç†æœåŠ¡å™¨ é€šè¿‡å­—æ®µ <code>Via</code> æ ‡æ˜ä»£ç†çš„èº«ä»½</strong>ï¼Œåœ¨HTTPè¯·æ±‚çš„é“¾è·¯ä¸­ï¼Œæ¯å½“æŠ¥æ–‡ç»è¿‡ä¸€ä¸ªä»£ç†èŠ‚ç‚¹ï¼Œä»£ç†æœåŠ¡å™¨å°±ä¼šå°†è‡ªèº«çš„ä¿¡æ¯è¿½åŠ åˆ° <code>Via</code>å­—æ®µçš„æœ«å°¾ã€‚<br>å¦é€šè¿‡å¦‚ä¸‹å­—æ®µæ ‡æ˜å…¶ä»–ä¿¡æ¯ï¼š</p><ul><li><code>X-Forwarded-For</code>ï¼šè¿½åŠ ä»£ç†çš„åŸŸå</li><li><code>X-Real-IP</code>ï¼šå®¢æˆ·ç«¯çœŸå®IP</li></ul><p><img src="/images/proxy-process.png" alt=""></p><h3 id="ä»£ç†åè®®">ä»£ç†åè®®</h3><p>é’ˆå¯¹ä»£ç†çš„HTTPè¯·æ±‚ï¼Œ<a href="https://www.haproxy.org/">HAProxy</a> å…¬å¸æ¨å‡ºäº†ä¸“é—¨çš„ä»£ç†è¯·æ±‚åè®®ï¼ŒThe Proxy Protocolã€‚<br>å…¶åŸºæœ¬æ ¼å¼ä¸ºï¼šå¼€å¤´å¿…é¡»æ˜¯â€œPROXYâ€äº”ä¸ªå¤§å†™å­—æ¯ï¼Œç„¶åæ˜¯â€œTCP4â€æˆ–è€…â€œTCP6â€ï¼Œè¡¨ç¤ºå®¢æˆ·ç«¯çš„ IP åœ°å€ç±»å‹ï¼Œå†åé¢æ˜¯è¯·æ±‚æ–¹åœ°å€ã€åº”ç­”æ–¹åœ°å€ã€è¯·æ±‚æ–¹ç«¯å£å·ã€åº”ç­”æ–¹ç«¯å£å·ï¼Œæœ€åç”¨ä¸€ä¸ªå›è½¦æ¢è¡Œï¼ˆ\r\nï¼‰ç»“æŸã€‚</p><pre><code>PROXY TCP4 1.15.115.4 110.42.228.178 32200 80\r\n</code></pre><h3 id="è´Ÿè½½å‡è¡¡">è´Ÿè½½å‡è¡¡</h3><p>å½“ä¸€ä¸ªåŒºåŸŸæ‰€æœ‰çš„æ¶ˆè´¹è€…ï¼Œéƒ½èœ‚æ‹¥è€Œè‡³ä¸€ä¸ªæ‰¹å‘å¸‚åœºè´­ç‰©ï¼Œå°±ä¼šé€ æˆå µå¡æ’åœºå¯¹çš„ç°è±¡ã€‚<br>å› æ­¤ â€œè´Ÿè½½å‡è¡¡â€ çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œåœ¨æ¯ä¸ªå±…æ°‘é›†ä¸­åœ°åœ°åŒºè®¾ç½®ä¸€ä¸ªå°å•†è¶…ï¼Œæˆ–è€…ç»é”€å•†ï¼Œè€Œè‡ªå·±åªè´Ÿè´£è´§ç‰©çš„æ‰¹å‘å’Œè°ƒé…ã€‚æ¶ˆè´¹è€… æ‹©è¿‘æ‹©é—² é€‰æ‹©å°å•†è¶…å»è´­ç‰©å³å¯ã€‚</p><p><strong>é€šè¿‡ä¸­é—´çš„ä»£ç†æœåŠ¡å™¨ï¼Œå°†è¯·æ±‚å‡åŒ€åˆç†åœ°åˆ†æ•£åˆ°å¤šå°æºæœåŠ¡å™¨</strong>ï¼Œèƒ½å¤Ÿæœ‰æ•ˆæé«˜ç³»ç»Ÿçš„å“åº”é€Ÿåº¦å’Œåˆ©ç”¨ç‡ï¼Œè¿™å°±æ˜¯ è´Ÿè½½å‡è¡¡ çš„åŸºæœ¬åŸç†ã€‚</p><p>è€Œå¦‚ä½•æŒ‘é€‰è½¬å‘çš„æœåŠ¡å™¨ï¼Œæœ‰å¦‚ä¸‹çš„æ€è·¯ï¼š</p><ul><li>å“ˆå¸Œï¼šå¦‚å°¾æ•°å•å·çš„å»Aæœï¼Œå°¾æ•°åŒå·çš„å»Bæœ</li><li>è½®è¯¢ï¼šå¯¹äºæ–°è¯·æ±‚ï¼Œåˆ†é…ä¸€ä¸ªæœ€ç©ºé—²çš„Serverå»å¤„ç†</li></ul><h2 id="Cache">Cache</h2><div class="admonition note"><p class="admonition-title">ä¸¤å¥è¯è®²æ¸…æ¥šCache</p><ul><li>æµè§ˆå™¨Cacheï¼šæ¶ˆè´¹è€…å®¶é‡Œå›¤ï¼ˆä¸Šæ¬¡ä¹°çš„ï¼‰è´§</li><li>æœåŠ¡å™¨Cacheï¼šå°å•†è¶…å›¤ï¼ˆä¸Šæ¬¡å–çš„ï¼‰è´§</li></ul></div><h3 id="Cacheï¼šæµè§ˆå™¨">Cacheï¼šæµè§ˆå™¨</h3><p>å½“æµè§ˆå™¨é¢‘ç¹æ¯ç§’è¯·æ±‚åŒæ ·çš„æ•°æ®æ—¶ï¼Œå¦‚æœæœåŠ¡å™¨ä¸åŒå…¶çƒ¦çš„ä¾æ¬¡å‘é€ï¼Œä¼šé€ æˆå¾ˆå¤§çš„æ€§èƒ½å’Œæµé‡æµªè´¹ã€‚å› æ­¤éœ€è¦å®¢æˆ·ç«¯ï¼ˆå³æµè§ˆå™¨ï¼‰çš„ç¼“å­˜ã€‚</p><p><strong>ä¸€ä¸ªå¸¦Cacheçš„HTTPè¯·æ±‚æµç¨‹æ˜¯ï¼š</strong></p><ul><li><p>æµè§ˆå™¨æ£€æŸ¥cacheï¼Œè‹¥æœ‰åˆ™ç›´æ¥è¯»å–ï¼Œè‹¥æ— åˆ™å‘é€æ–°çš„HTTPè¯·æ±‚ï¼›</p></li><li><p>æœåŠ¡å™¨å“åº”è¯·æ±‚ï¼Œå¹¶è¿”å›èµ„æºï¼ŒåŒæ—¶æ ‡è®°èµ„æºçš„æœ‰é™æœŸï¼›</p></li><li><p>æµè§ˆå™¨æ¥å—è¯·æ±‚ï¼Œå¹¶ç¼“å­˜èµ„æºï¼›</p></li></ul><p>è€Œ<strong>æ ‡è®°èµ„æºçš„æœ‰æ•ˆæœŸå­—æ®µæ˜¯ <code>max-age</code></strong>ï¼Œå³cacheçš„ç”Ÿå­˜æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œè¿‡æœŸåˆ™è¢«æµè§ˆå™¨è‡ªåŠ¨é”€æ¯ã€‚<br>å…¶ä»–å¸¸è§å­—æ®µæœ‰ï¼š</p><ul><li><code>no_store</code>ï¼šä¸å…è®¸ç¼“å­˜ï¼Œå¦‚ä¸€äº›é«˜é¢‘çš„ç§’æ€å­—æ®µ</li><li><code>no_cache</code>ï¼šä½¿ç”¨ç¼“å­˜å‰ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰æœ€æ–°ç‰ˆæœ¬</li><li><code>muster-revalidate</code>ï¼šä¸è¿‡æœŸåˆ™ç›´æ¥ä½¿ç”¨ç¼“å­˜</li></ul><h3 id="Cacheï¼šæœåŠ¡å™¨">Cacheï¼šæœåŠ¡å™¨</h3><p><font color="#FF1E10"><strong>Todo</strong></font>ï¼Œä¸HTTPåè®®å…³ç³»ä¸å¤§ï¼Œå¯ä»¥äº†è§£ Redisã€Varnish ç­‰ç¼“å­˜æŠ€æœ¯ã€‚</p><h2 id="Chromeè°ƒè¯•">Chromeè°ƒè¯•</h2><p>Chromeæµè§ˆå™¨æä¾›äº†ä¸°å¯Œè€Œå¼ºå¤§çš„è°ƒè¯•åŠŸèƒ½ï¼ŒæŒ‰ä¸‹ <code>F12</code> æˆ–è€…å³é”®ç‚¹å‡»â€œæ£€æŸ¥â€ ä»¥è¿›å…¥è°ƒè¯•é¡µé¢ã€‚</p><img src="/images/chrome-http-debug.png" height="400">]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;admonition note&quot;&gt;&lt;p class=&quot;admonition-title&quot;&gt;å¯¼è¯»
&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/%E9%80%</summary>
      
    
    
    
    <category term="Network" scheme="http://luhao.wiki/categories/Network/"/>
    
    <category term="Network" scheme="http://luhao.wiki/categories/Network/Network/"/>
    
    
  </entry>
  
  <entry>
    <title>Computer Networking</title>
    <link href="http://luhao.wiki/posts/network/"/>
    <id>http://luhao.wiki/posts/network/</id>
    <published>2023-06-22T12:18:00.000Z</published>
    <updated>2023-06-26T17:48:59.056Z</updated>
    
    <content type="html"><![CDATA[<p>è®¡ç®—æœºç½‘ç»œå¤§çº²ï¼ŒHTTP/TCP/UDPâ€¦<span id="more"></span></p><div class="markmap-container" style="height:425px">  <svg data="{&quot;t&quot;:&quot;root&quot;,&quot;d&quot;:0,&quot;v&quot;:&quot;&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[0,1]},&quot;v&quot;:&quot;Network Model&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[1,2]},&quot;v&quot;:&quot;TCP/IP&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[2,3]},&quot;v&quot;:&quot;OSI&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[3,4]},&quot;v&quot;:&quot;Protocol&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[4,5]},&quot;v&quot;:&quot;HTTP&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:3,&quot;p&quot;:{&quot;lines&quot;:[5,6]},&quot;v&quot;:&quot;<a href=\&quot;/posts/http-1/\&quot;>HTTPåè®®å…¥é—¨</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:3,&quot;p&quot;:{&quot;lines&quot;:[6,7]},&quot;v&quot;:&quot;<a href=\&quot;/posts/http-2/\&quot;>HTTPåè®®è¿›é˜¶</a>&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[7,8]},&quot;v&quot;:&quot;TCP&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[8,9]},&quot;v&quot;:&quot;UDP&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[9,10]},&quot;v&quot;:&quot;KCP&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[10,11]},&quot;v&quot;:&quot;Web Server&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[11,12]},&quot;v&quot;:&quot;Apache&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[12,13]},&quot;v&quot;:&quot;Nginx&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[13,14]},&quot;v&quot;:&quot;Performance&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[14,15]},&quot;v&quot;:&quot;RPSï¼šæ¯ç§’å¤„ç†æ•°&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[15,16]},&quot;v&quot;:&quot;TPRï¼šå¹³å‡å“åº”æ—¶é—´&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[16,17]},&quot;v&quot;:&quot;Concurrencyï¼šå¹¶å‘é‡&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[17,18]},&quot;v&quot;:&quot;Tools&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[18,19]},&quot;v&quot;:&quot;Telnet&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[19,20]},&quot;v&quot;:&quot;<a href=\&quot;#/posts/2G7VBZ2/#curl\&quot;>curl</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[20,21]},&quot;v&quot;:&quot;wireshark&quot;}]}],&quot;p&quot;:{}}"></svg></div>]]></content>
    
    
    <summary type="html">&lt;p&gt;è®¡ç®—æœºç½‘ç»œå¤§çº²ï¼ŒHTTP/TCP/UDPâ€¦&lt;/p&gt;</summary>
    
    
    
    <category term="Network" scheme="http://luhao.wiki/categories/Network/"/>
    
    <category term="Network" scheme="http://luhao.wiki/categories/Network/Network/"/>
    
    
  </entry>
  
  <entry>
    <title>ã€ç½‘ç»œã€‘HTTPåè®®å…¥é—¨</title>
    <link href="http://luhao.wiki/posts/http/1/"/>
    <id>http://luhao.wiki/posts/http/1/</id>
    <published>2023-06-21T16:15:09.000Z</published>
    <updated>2023-07-01T17:08:46.323Z</updated>
    
    <content type="html"><![CDATA[<div class="admonition note"><p class="admonition-title">å¯¼è¯»</p><ul><li><a href="https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/%E9%80%8F%E8%A7%86HTTP%E5%8D%8F%E8%AE%AE">ä¸“æ ï¼šé€è§†HTTPåè®®</a> å¢™è£‚æ¨è â­</li></ul></div><div class="markmap-container" style="height:480px">  <svg data="{&quot;t&quot;:&quot;root&quot;,&quot;d&quot;:0,&quot;v&quot;:&quot;&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[0,1]},&quot;v&quot;:&quot;HTTP&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[1,2]},&quot;v&quot;:&quot;<a href=\&quot;#Hypertext\&quot;>Hypertext</a>ï¼ˆhtmlï¼‰&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:3,&quot;p&quot;:{&quot;lines&quot;:[2,3]},&quot;v&quot;:&quot;text&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:3,&quot;p&quot;:{&quot;lines&quot;:[3,4]},&quot;v&quot;:&quot;media&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:3,&quot;p&quot;:{&quot;lines&quot;:[4,5]},&quot;v&quot;:&quot;hyperlink&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[5,6]},&quot;v&quot;:&quot;<a href=\&quot;#Transfer\&quot;>Transfer</a>&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:3,&quot;p&quot;:{&quot;lines&quot;:[6,7]},&quot;v&quot;:&quot;client&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:4,&quot;p&quot;:{&quot;lines&quot;:[7,8]},&quot;v&quot;:&quot;Chrome, Edge&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:4,&quot;p&quot;:{&quot;lines&quot;:[8,9]},&quot;v&quot;:&quot;Telnet&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:3,&quot;p&quot;:{&quot;lines&quot;:[9,10]},&quot;v&quot;:&quot;server&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:4,&quot;p&quot;:{&quot;lines&quot;:[10,11]},&quot;v&quot;:&quot;<a href=\&quot;https://nginx.org/\&quot;>Nginx</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:4,&quot;p&quot;:{&quot;lines&quot;:[11,12]},&quot;v&quot;:&quot;<a href=\&quot;https://httpd.apache.org/\&quot;>Apache</a>&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:3,&quot;p&quot;:{&quot;lines&quot;:[12,13]},&quot;v&quot;:&quot;CDNï¼ˆå†…å®¹åˆ†å‘ï¼‰&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:4,&quot;p&quot;:{&quot;lines&quot;:[13,14]},&quot;v&quot;:&quot;<a href=\&quot;https://zh.wikipedia.org/wiki/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1\&quot;>è´Ÿè½½å‡è¡¡</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:4,&quot;p&quot;:{&quot;lines&quot;:[14,15]},&quot;v&quot;:&quot;åŠ é€Ÿè®¿é—®&quot;}]}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[15,16]},&quot;v&quot;:&quot;<a href=\&quot;#Protocol\&quot;>Protocol</a>&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[16,17]},&quot;v&quot;:&quot;<a href=\&quot;#TCP-IP\&quot;>TCP/IP</a>&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[17,18]},&quot;v&quot;:&quot;<a href=\&quot;#IP\&quot;>IP</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[18,19]},&quot;v&quot;:&quot;<a href=\&quot;#TCP\&quot;>TCP</a>&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[19,20]},&quot;v&quot;:&quot;<a href=\&quot;#DNS\&quot;>DNS</a>&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[20,21]},&quot;v&quot;:&quot;<a href=\&quot;#åŸŸåè§£æ\&quot;>åŸŸåè§£æ</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[21,22]},&quot;v&quot;:&quot;<a href=\&quot;#DNSç¼“å­˜\&quot;>DNSç¼“å­˜</a>&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[22,23]},&quot;v&quot;:&quot;<a href=\&quot;#URL\&quot;>URL</a>ï¼ˆç½‘å€ï¼‰&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[23,24]},&quot;v&quot;:&quot;<a href=\&quot;#URL\&quot;>ç¤ºä¾‹â­</a>&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[24,25]},&quot;v&quot;:&quot;<a href=\&quot;#HTTPæŠ“åŒ…\&quot;>HTTPæŠ“åŒ…</a>&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[25,26]},&quot;v&quot;:&quot;wireshark&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[26,27]},&quot;v&quot;:&quot;<a href=\&quot;#HTTPæŠ¥æ–‡\&quot;>HTTPæŠ¥æ–‡â­</a>&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[27,28]},&quot;v&quot;:&quot;start-line&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[28,29]},&quot;v&quot;:&quot;headers&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[29,30]},&quot;v&quot;:&quot;body&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[30,31]},&quot;v&quot;:&quot;<a href=\&quot;#HTTPæ–¹æ³•\&quot;>HTTPæ–¹æ³•â­</a>&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[31,32]},&quot;v&quot;:&quot;GET, HEAD&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[32,33]},&quot;v&quot;:&quot;POST&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[33,34]},&quot;v&quot;:&quot;<a href=\&quot;#HTTPçŠ¶æ€ç \&quot;>HTTPçŠ¶æ€ç </a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[34,35]},&quot;v&quot;:&quot;<a href=\&quot;#HTTPç‰¹ç‚¹\&quot;>HTTPç‰¹ç‚¹</a>&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[35,36]},&quot;v&quot;:&quot;.&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:3,&quot;p&quot;:{&quot;lines&quot;:[36,37]},&quot;v&quot;:&quot;.&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:4,&quot;p&quot;:{&quot;lines&quot;:[37,38]},&quot;v&quot;:&quot;å¯é ä¼ è¾“&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:4,&quot;p&quot;:{&quot;lines&quot;:[38,39]},&quot;v&quot;:&quot;æ˜æ–‡ä¼ è¾“&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:4,&quot;p&quot;:{&quot;lines&quot;:[39,40]},&quot;v&quot;:&quot;æ— çŠ¶æ€&quot;}]}]}]}],&quot;p&quot;:{}}"></svg></div><h2 id="HTTPåè®®">HTTPåè®®</h2><p>HTTP åè®®æ˜¯ <a href="https://en.wikipedia.org/wiki/HTTP"><em><strong>HyperText Transfer Protocol</strong></em></a> çš„ç¼©å†™ï¼Œå®ƒæ˜¯ä¸€ç§ç”¨äºè¶…åª’ä½“ä¿¡æ¯ä¼ è¾“çš„åº”ç”¨å±‚åè®®ï¼Œæ˜¯äº’è”ç½‘é€šä¿¡çš„åŸºç¡€ã€‚</p><p>å¦‚ä½•é€šä¿—åœ°ç†è§£ HTTPåè®® å‘¢ï¼Ÿ</p><div class="admonition todo"><p class="admonition-title">å¦‚ä½•ç†è§£æ–°æ¦‚å¿µ?</p><ol><li>ä»»ä½•æŠ€æœ¯æ€æƒ³ï¼Œåœ¨ç°å®ç”Ÿæ´»ä¸­éƒ½èƒ½æ‰¾åˆ°æ˜ å°„</li><li>å·§ç”¨ â€œç±»æ¯”â€ çš„æ‰‹æ®µ</li></ol></div><h3 id="Hypertext">Hypertext</h3><p>åœ¨äº’è”ç½‘æ—©æœŸï¼Œä¼ è¾“çš„ä¿¡æ¯åªæœ‰ç®€å•çš„å­—ç¬¦æ–‡å­—ï¼Œå³ <code>Text</code>ã€‚éšç€ä¿¡æ¯çˆ†ç‚¸å¼åœ°å¢é•¿ï¼Œç½‘ç»œéœ€è¦ä¼ è¾“çš„ä¿¡æ¯è¢«æ‰©å±•ä¸º å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰ç­‰ï¼Œè¿™äº›å°±æ˜¯è¶…æ–‡æœ¬ã€‚<br>è¶…æ–‡æœ¬çš„æ ¸å¿ƒæ˜¯ <a href="https://en.wikipedia.org/wiki/Hyperlink">è¶…é“¾æ¥ Hyperlink</a>ï¼Œé€šè¿‡äº’ç›¸å¼•ç”¨è€Œå½¢æˆå¤æ‚çš„ç½‘çŠ¶ä¿¡æ¯ç»“æ„ã€‚</p><h3 id="Transfer">Transfer</h3><p>HTTP æ˜¯ä¸€ç§ <code>Request-Response</code>åè®®ï¼Œå³å°†ä¿¡æ¯åœ¨ Aã€B ä¸¤ä¸ªç‚¹ä¹‹é—´åŒå‘ä¼ è¾“ï¼Œå› æ­¤æœ‰ä¸¤ç±»å‚ä¸æ–¹ï¼š</p><ul><li><code>client</code><br>httpè¯·æ±‚çš„å‘èµ·æ–¹ï¼Œé€šå¸¸æŒ‡æµè§ˆå™¨ï¼ˆå¦‚Chromeã€Edgeï¼‰</li><li><code>server</code><br>httpè¯·æ±‚çš„æ¥æ”¶æ–¹ï¼Œåˆç§°ä¸º <code>Web Server</code>ï¼Œå¦‚ <a href="https://nginx.org/">Nginx</a>ã€<a href="https://httpd.apache.org/">Apache</a> éƒ½æ˜¯å¸¸è§çš„æœåŠ¡å™¨æ¡†æ¶</li><li><code>CDN</code><br>clientå’Œserverä¹‹é—´é€šå¸¸ä¸ä¼šç›´è¿ï¼Œè€Œæ˜¯ç»è¿‡ <code>CDN</code>(<a href="https://en.wikipedia.org/wiki/Content_delivery_network">Content Delivery Network</a>) è¿™ä¸ªä¸­é—´å•†ã€‚å®ƒèƒ½å¤Ÿå®ç°å®‰å…¨é˜²æŠ¤ã€è´Ÿè½½å‡è¡¡ç­‰å¸¸è§åŠŸèƒ½ã€‚</li></ul><h3 id="Protocol">Protocol</h3><p>HTTP æ˜¯ä¼—å¤šç½‘ç»œåè®®ä¸­çš„ä¸€ä¸ªï¼Œå…ˆç†è§£ä»€ä¹ˆæ˜¯åè®®?<br>ä»¥æ¯•ä¸šç”Ÿç­¾ç½²çš„â€œä¸‰æ–¹åè®®â€ä¸ºä¾‹ï¼Œå‚ä¸å¯¹è±¡æ˜¯å¤šå…ƒçš„ï¼ˆè‡ªå·±ã€å­¦æ ¡ã€ä¼ä¸šï¼‰ï¼ŒåŒæ—¶åè®®è¿˜ä¼šè§„å®šå„æ–¹éœ€å±¥è¡Œçš„ä¹‰åŠ¡ï¼Œä»¥åŠè¯¥åšä»€ä¹ˆå’Œä¸è¯¥åšä»€ä¹ˆã€‚å› æ­¤åè®®çš„æ ¸å¿ƒè¦ç´ æ˜¯ï¼š</p><ul><li><p>å¤šæ–¹å‚ä¸<br>clientã€serverã€ä¸­è½¬è€…â€¦</p></li><li><p>é€šä¿¡è§„èŒƒ<br>å¦‚è§„å®š <code>Get</code>ã€<code>Post</code> çš„è¯·æ±‚æŠ¥æ–‡æ ¼å¼ï¼Œå¦‚è¯·æ±‚çš„é”™è¯¯å¤„ç†ç­‰ç­‰</p></li></ul><p>åœ¨ HTTP çš„å‘å±•å†ç¨‹ä¸­ï¼Œä¹Ÿç»å†è¿‡å¾ˆå¤šå¤§ç‰ˆæœ¬çš„è¿­ä»£ï¼Œå¦‚ <code>HTTP/0.9</code>ã€<code>HTTP/1.0</code>ã€<code>HTTP/2</code>ã€<code>HTTP/3</code>ç­‰ç­‰ã€‚</p><h2 id="TCP-IP">TCP/IP</h2><p><a href="https://en.wikipedia.org/wiki/Internet_protocol_suite">TCP/IPåè®®</a> æ˜¯æ•´ä¸ªäº’è”ç½‘çš„æ ‡å‡†é€šä¿¡åè®®ï¼Œå®ƒå®é™…ä¸Šæ˜¯ä¸€ç³»åˆ—åè®®çš„ç»Ÿç§°ï¼Œå…¶ä¸­æœ€æ ¸å¿ƒçš„æ˜¯ TCP å’Œ IPï¼Œè¿™é‡Œç¯‡å¹…æœ‰é™åªä½œç®€å•ä»‹ç»ã€‚</p><h3 id="IP">IP</h3><p><strong>IPåè®®ï¼ˆ<a href="https://en.wikipedia.org/wiki/Internet_Protocol">Internet Protocol</a>ï¼‰ä¸»è¦è§£å†³å¯»å€å’Œè·¯ç”±é—®é¢˜</strong>ï¼Œå®ƒæå‡º <strong>IPåœ°å€</strong> çš„æ¦‚å¿µæ¥å®šä½äº’è”ç½‘ä¸Šçš„æ¯ä¸€å°è®¡ç®—æœºã€‚å› æ­¤å¯ä»¥å°†å…¶ç±»æ¯”ä¸ºç”µè¯å·ç ï¼Œè€Œæ•´ä¸ªè¿è¥å•†çš„æ‹¨å·ç³»ç»Ÿå°±æ˜¯ä¸€ä¸ª IPåè®®ã€‚</p><p>IPåè®®åˆåˆ†ä¸º IPv4 å’Œ IPv6ï¼Œå¤§éƒ¨åˆ†ä»åœ¨ä½¿ç”¨å‰è€…ï¼Œå³IPåœ°å€æ˜¯4ä¸ªç”¨å†’å·åˆ†å‰²çš„æ•°å­—ï¼Œä¾‹å¦‚ <code>1.15.115.4</code>ã€‚ä¹‹æ‰€ä»¥å‡ºç° IPv6ï¼Œæ˜¯å› ä¸ºv4åˆ†é…çš„åœ°å€å·²ç»æ‰è¥Ÿè§è‚˜ï¼Œä¸å¤Ÿæ•´ä¸ªäº’è”ç½‘çš„ä½¿ç”¨ã€‚</p><h3 id="TCP">TCP</h3><p><strong>TCPåè®®ï¼ˆ<a href="https://en.wikipedia.org/wiki/Transmission_Control_Protocol">Transmission Control Protocol</a>ï¼‰æ˜¯ä¸€ç§ ä¼ è¾“æ§åˆ¶åè®®</strong>ï¼Œå®ƒåŸºäº IPåè®® ä¹‹ä¸Šï¼Œæä¾›å¯é çš„ã€å­—èŠ‚æµå½¢å¼çš„é€šä¿¡ï¼Œä¹Ÿæ˜¯HTTPåè®®å¾—ä»¥å®ç°çš„åŸºç¡€ã€‚</p><p>ä¹‹æ‰€ä»¥äº†è§£TCP/IPåè®®ï¼Œæ˜¯å› ä¸ºHTTPè¿è¡Œåœ¨å‰è€…ä¸Šï¼Œå› æ­¤åˆç§°ä¸º <code>HTTP over TCP/IP</code>ã€‚</p><h2 id="DNS">DNS</h2><p>åœ¨TCP/IPåè®®ä¸­ï¼Œé€šå¸¸ä½¿ç”¨çº¯æ•°å­—çš„ IPåœ°å€ æ¥æ ‡è®°è®¡ç®—æœºï¼Œè¿™éå¸¸ä¸åˆ©äºç”¨äºçš„ä½¿ç”¨å’Œè®°å¿†ã€‚<br>å› æ­¤ <strong>DNSï¼ˆ<a href="https://en.wikipedia.org/wiki/Domain_Name_System">Domain Name System</a>ï¼‰åŸŸåç³»ç»Ÿ</strong> åº”è¿è€Œç”Ÿï¼Œå®ƒä½¿ç”¨å…·æœ‰å®é™…å«ä¹‰çš„åç§°æ¥æ›¿ä»£IPåœ°å€ï¼ˆå³è‹±æ–‡+æ•°å­—çš„ç»„åˆï¼Œä¹Ÿå¯ä»¥æ˜¯æ±‰å­—ï¼‰ï¼Œä¾‹å¦‚ï¼š<code>95.211.80.227</code>æ˜¯IPåœ°å€ï¼Œ<code>nginx.org</code>æ˜¯å…¶åŸŸåï¼Œä¸¤è€…æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªwebæœåŠ¡å™¨ã€‚</p><h3 id="åŸŸåè§£æ">åŸŸåè§£æ</h3><p>ä»¥ <code>www.apple.com</code> è¿™ä¸ªåŸŸåä¸ºä¾‹ï¼Œå½“ç”¨æˆ·å°è¯•è®¿é—®è¯¥åŸŸåæ—¶ï¼Œä¼šç»è¿‡è‡³å°‘3æ¬¡çš„DNSåŸŸåè§£ææœåŠ¡å™¨ï¼š</p><ul><li><em>Root DNS Server</em>ï¼šç®¡ç† <code>com</code>, <code>cn</code>, <code>net</code>ç­‰é¡¶çº§åŸŸåçš„IPåœ°å€ã€‚</li><li><em>Top-level DNS Server</em>ï¼šç®¡ç† <code>apple.com</code> çš„IPåœ°å€ã€‚</li><li><em>Authoritative DNS Server</em>ï¼šç®¡ç† <code>www.apple.com</code>çš„IPåœ°å€ã€‚</li></ul><h3 id="DNSç¼“å­˜">DNSç¼“å­˜</h3><p>ç›®å‰å…¨ä¸–ç•Œæœ‰ 13ç»„ <code>Root-DNS-Server</code> æä¾›é¡¶çº§åŸŸåçš„è§£ææœåŠ¡ï¼Œä½†å› ä¸ºå…¨ä¸–ç•Œçš„ç½‘æ°‘éƒ½åœ¨è¯·æ±‚ï¼Œä¼šé€ æˆç³»ç»Ÿçš„æ‹¥æŒ¤å¹¶é™ä½è®¿é—®é€Ÿåº¦ï¼Œä¼˜åŒ–æ‰‹æ®µä¹‹ä¸€å°±æ˜¯åˆ©ç”¨ <em>DNSç¼“å­˜</em>ã€‚</p><p>å½“ä½ å·²ç»è®¿é—®è¿‡ <code>www.apple.com</code>ï¼Œæ“ä½œç³»ç»Ÿå°±ä¼šåœ¨æŸä¸ªæ–‡ä»¶ï¼ˆå¦‚ä¸‹â†“ï¼‰<strong>ç¼“å­˜è§£æåçš„IPåœ°å€</strong>ï¼Œè¿™æ ·ä¸‹æ¬¡è®¿é—®æ—¶ï¼Œå°±ä¸å†éœ€è¦ç»è¿‡ DNFè§£ææœåŠ¡å™¨äº†ã€‚</p><ul><li>linux: <code>/etc/hosts</code></li><li>windows: <code>C:\WINDOWS\system32\drivers\etc\hosts</code></li></ul><h2 id="URL">URL</h2><p>é€šè¿‡ TCP/IPåè®® åŠ ä¸Š DNS çš„ç»„åˆï¼Œæˆ‘ä»¬å®ç°äº†è®¿é—®äº’è”ç½‘ä¸­ä»»æ„ä¸€å°æœºå™¨ï¼Œä½†æ˜¯æ¯å°æœºå™¨ä¸Šçš„èµ„æºä»ç„¶æœ‰å¾ˆå¤šï¼Œå¦‚ä½•å¯¹ä»–ä»¬åŠ ä»¥åŒºåˆ†å‘¢ï¼Ÿ</p><p><strong>URLï¼ˆ<a href="https://en.wikipedia.org/wiki/URL">Uniform Resource Locator</a>ï¼‰å«ä¹‰æ˜¯ ç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼Œå³ä¿—ç§°çš„ç½‘å€</strong>ï¼Œå¦‚ä¸‹æ˜¯å…¶ç»„æˆæ ¼å¼ï¼š</p><p><img src="/images/URI.svg" alt=""></p><ul><li><code>scheme</code>ï¼šæŒ‡å®šhttpã€httpsã€ftpç­‰åè®®<ul><li><code>file</code>ï¼šæœ¬åœ°æ–‡ä»¶</li><li><code>ftp</code>ï¼šæ–‡ä»¶ä¼ è¾“</li><li><code>ssh</code>ï¼šåŠ å¯†ç™»å½•</li></ul></li><li><code>://</code>ï¼šçº¦å®šä¿—æˆçš„åˆ†éš”ç¬¦</li><li><code>user:passwd@</code>ï¼šæ˜æ–‡èº«ä»½ä¿¡æ¯ï¼Œå·²è¢«å¼ƒç”¨</li><li><code>host:port</code>ï¼šçœç•¥ç«¯å£ä¼šç”¨é»˜è®¤å€¼ï¼Œå¦‚ HTTP 80ï¼ŒHTTPS 443</li><li><code>path</code>ï¼šèµ„æºçš„åœ¨ä¸»æœºçš„è·¯å¾„ï¼Œä¹Ÿå¯èƒ½æ˜¯æœåŠ¡è·¯å¾„</li><li><code>?query</code>ï¼šæŸ¥è¯¢å‚æ•°</li><li><code>#fragment</code>ï¼šä»…æµè§ˆå™¨ä½¿ç”¨ï¼Œç”¨äºé”šç‚¹è·³è½¬</li></ul><h2 id="HTTPæŠ“åŒ…">HTTPæŠ“åŒ…</h2><p>â€œçº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…â€ï¼Œæˆ‘ä»¬é€šè¿‡åœ¨windowsä¸‹å¿«é€Ÿæ­å»ºä¸€ä¸ªæœ€å°åŒ–çš„HTTPæ¨¡æ‹Ÿç¯å¢ƒï¼Œå€ŸåŠ©æŠ“åŒ…å·¥å…· wireshark æ¥å¯¹ HTTP çš„ç»†èŠ‚ä¸€æ¢ç©¶ç«Ÿã€‚</p><blockquote><ul><li><a href="https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/%E9%80%8F%E8%A7%86HTTP%E5%8D%8F%E8%AE%AE/07%20%20%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%EF%BC%8C%E6%90%AD%E5%BB%BAHTTP%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83.md">æ­å»ºhttpæœ¬åœ°å®éªŒç¯å¢ƒ</a></li><li><a href="https://zhuanlan.zhihu.com/p/82498482">çŸ¥ä¹: WiresharkæŠ“åŒ…æŒ‡å—</a></li></ul></blockquote><p>åœ¨å¯åŠ¨æœ¬åœ°webæœåŠ¡å™¨åï¼Œå°è¯•åœ¨æµè§ˆå™¨è¾“å…¥ <code>127.0.0.1</code> è®¿é—®è¯¥serverï¼Œç„¶åæŒ‰ä¸‹å›è½¦ï¼ŒwiresharkæŠ“åŒ…ï¼ˆé™åˆ¶<code>http/tcp port 80</code>ï¼‰æŠ“åŒ…çš„ç»“æœå¦‚ä¸‹ï¼š</p><ul><li>å‰ä¸‰ä¸ªåŒ…ï¼šTCPåè®®çš„ â€œä¸‰æ¬¡æ¡æ‰‹â€</li><li>ä¸­é—´å››ä¸ªåŒ…ï¼šHTTPåè®®å‘é€äº†ä¸€ä¸ª <code>GET /HTTP/1.1</code> çš„è¯·æ±‚æŠ¥æ–‡ï¼ŒServerå›å¤OK</li><li>åå››ä¸ªåŒ…ï¼šHTTPåè®®å‘é€äº†è¯·æ±‚ <code>/favicon.io</code> çš„è¯·æ±‚æŠ¥æ–‡ï¼ŒServerå›å¤404</li></ul><p>é€šè¿‡httpæŠ“åŒ…ï¼ŒåŸºæœ¬æ¸…æ¥šäº†httpåè®®çš„å·¥ä½œæµç¨‹ï¼Œ<strong>æ ¸å¿ƒæ˜¯ â€œRequst-Responseâ€ï¼Œå³ â€œä¸€é—®ä¸€ç­”â€çš„æ¨¡å¼</strong>ã€‚</p><p><img src="/images/wireshark-http.png" alt=""></p><h2 id="HTTPæŠ¥æ–‡">HTTPæŠ¥æ–‡</h2><p>é€šè¿‡wiresharkä¹Ÿå¯ä»¥æ¸…æ¥šçœ‹åˆ°httpè¯·æ±‚å‘é€çš„æŠ¥æ–‡å†…å®¹ï¼Œå…¶å…¨éƒ¨ç”± ASCIIæ–‡æœ¬ ç»„æˆï¼Œéå¸¸å®¹æ˜“è‚‰çœ¼é˜…è¯»ã€‚</p><p>HTTPåè®®çš„ requetæŠ¥æ–‡ å’Œ responseæŠ¥æ–‡ çš„ç»„æˆæœºæ„åŸºæœ¬ç›¸åŒï¼Œç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼Œæ¯ä¸ªéƒ¨åˆ†ç”±ä¸€ä¸ªç©ºè¡Œ â€œCRLFï¼ˆ0x0D0Aï¼‰â€ éš”å¼€:</p><ul><li>è¯·æ±‚æŠ¥æ–‡</li></ul><div class="markmap-container" style="height:220px">  <svg data="{&quot;t&quot;:&quot;root&quot;,&quot;d&quot;:0,&quot;v&quot;:&quot;&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[0,1]},&quot;v&quot;:&quot;Request-line&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[1,2]},&quot;v&quot;:&quot;Method&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[2,3]},&quot;v&quot;:&quot;URI&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[3,4]},&quot;v&quot;:&quot;http-version&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[4,5]},&quot;v&quot;:&quot;Request-header&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[5,6]},&quot;v&quot;:&quot;Key-Value&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[6,7]},&quot;v&quot;:&quot;eg. Host: 127.0.0.1&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[7,8]},&quot;v&quot;:&quot;eg. Connection: keep-alive&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[8,9]},&quot;v&quot;:&quot;eg. User-Agent: xxxxxx&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[9,10]},&quot;v&quot;:&quot;Request-bodyï¼ˆç©ºï¼‰&quot;}],&quot;p&quot;:{}}"></svg></div><ul><li>å›å¤æŠ¥æ–‡</li></ul><div class="markmap-container" style="height:180px">  <svg data="{&quot;t&quot;:&quot;root&quot;,&quot;d&quot;:0,&quot;v&quot;:&quot;&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[0,1]},&quot;v&quot;:&quot;Response-line&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[1,2]},&quot;v&quot;:&quot;http-version&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[2,3]},&quot;v&quot;:&quot;Status-code&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:3,&quot;p&quot;:{&quot;lines&quot;:[3,4]},&quot;v&quot;:&quot;200ï¼šæˆåŠŸ&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:3,&quot;p&quot;:{&quot;lines&quot;:[4,5]},&quot;v&quot;:&quot;404ï¼šæŸ¥æ‰¾å¤±è´¥&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[5,6]},&quot;v&quot;:&quot;Reasonï¼ˆæè¿°åŸå› ï¼‰&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[6,7]},&quot;v&quot;:&quot;Response-headerï¼ˆåŒä¸Šï¼‰&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[7,8]},&quot;v&quot;:&quot;Response-body&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[8,9]},&quot;v&quot;:&quot;eg. name=luhao&amp;amp;password=1234&quot;}]}],&quot;p&quot;:{}}"></svg></div><ul><li>æŠ¥æ–‡ç¤ºä¾‹<br><img src="/images/http-request.png" alt=""></li></ul><h2 id="HTTPçŠ¶æ€ç ">HTTPçŠ¶æ€ç </h2><p>æ—¢ç„¶ HTTPåè®® é‡‡ç”¨ â€œä¸€é—®ä¸€ç­”â€ çš„æ¨¡å¼ï¼Œé‚£ä¹ˆå“åº”æŠ¥æ–‡å†…åº”è¯¥åŒ…å«è¯·æ±‚çš„ç»“æœä¿¡æ¯ï¼Œå³çŠ¶æ€ç ï¼ˆStatus Codeï¼‰ã€‚<br>ç›®å‰ RFCæ ‡å‡† è§„å®šçŠ¶æ€ç æ˜¯ä¸‰ä½æ•°ï¼Œå³å–å€¼èŒƒå›´æ˜¯ 000 åˆ° 999ï¼Œå…¶ä»è®¾è®¡ä¹‹åˆä¹Ÿæœ‰å…·ä½“çš„å«ä¹‰åŒºåˆ†ï¼š</p><ul><li>1xxï¼šæç¤ºä¿¡æ¯</li><li>2xxï¼šæˆåŠŸ<ul><li>200 OK</li></ul></li><li>3xxï¼šé‡å®šå‘</li><li>4xxï¼šå®¢æˆ·ç«¯è¯·æ±‚æŠ¥æ–‡é”™è¯¯<ul><li>400 Bad Request</li><li>403 Forbidden</li><li>404 Not Found</li><li>408 Request Timeout</li></ul></li><li>5xxï¼šæœåŠ¡ç«¯å†…éƒ¨é”™è¯¯<ul><li>500 Internal Server Error</li><li>502 Bad Gateway</li></ul></li></ul><h2 id="HTTPç‰¹ç‚¹">HTTPç‰¹ç‚¹</h2><p>ä½œä¸ºæœ¬ç¯‡çš„æ”¶å°¾æ€»ç»“ï¼ŒHTTPåè®®å¯ä»¥æ¦‚æ‹¬ä¸ºä¸‰å¤§ç‰¹ç‚¹ï¼š</p><ul><li><p>å¯é ä¼ è¾“<br>æ³¨æ„ï¼Œâ€œå¯é â€åªæ˜¯ç¡®ä¿ Requestæ–¹ çš„å¿…å®šä¼ è¾“ï¼Œç”±äºä¸€äº›ç½‘ç»œåŸå› æœªå¿…èƒ½ç¡®ä¿ Responseæ–¹ çš„æˆåŠŸæ¥æ”¶ã€‚</p></li><li><p>æ˜æ–‡ä¼ è¾“<br>HTTPæŠ¥æ–‡çš„æ‰€æœ‰ä¿¡æ¯éƒ½å›æš´éœ²åœ¨ â€œå…‰å¤©åŒ–æ—¥ä¹‹ä¸‹â€ï¼ŒHTTPSåè®®å®ç°äº†åŠ å¯†ç‰ˆæœ¬çš„HTTPä¼ è¾“ã€‚</p></li><li><p>æ— çŠ¶æ€<br>åŒºåˆ†äº TCPåè®® çš„çŠ¶æ€ï¼ŒHTTPSåè®® æ˜¯æ²¡æœ‰çŠ¶æ€çš„ï¼Œå³ â€œæ²¡æœ‰è®°å¿†èƒ½åŠ›â€ã€‚</p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;admonition note&quot;&gt;&lt;p class=&quot;admonition-title&quot;&gt;å¯¼è¯»
&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/%E9%80%</summary>
      
    
    
    
    <category term="Network" scheme="http://luhao.wiki/categories/Network/"/>
    
    <category term="Network" scheme="http://luhao.wiki/categories/Network/Network/"/>
    
    
    <category term="linux" scheme="http://luhao.wiki/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>ã€GAMES101ã€‘Shading</title>
    <link href="http://luhao.wiki/posts/shading/"/>
    <id>http://luhao.wiki/posts/shading/</id>
    <published>2023-06-13T15:42:19.000Z</published>
    <updated>2023-07-01T17:10:20.591Z</updated>
    
    <content type="html"><![CDATA[<p>Lambertianã€Blinn-phongã€shading-tech<span id="more"></span></p><div class="admonition note"><p class="admonition-title">å¯¼è¯»</p><ul><li><a href="https://sites.cs.ucsb.edu/~lingqi/teaching/games101.html">GAMES101 Shading</a></li><li><a href="https://www.cs.ucr.edu/~shinar/courses/cs130-spring-2012/schedule.html">CS130 Shading</a></li><li><a href="https://www.cs.toronto.edu/~jacobson/phong-demo/">WebGL demo</a></li></ul></div><div class="markmap-container" style="height:300px">  <svg data="{&quot;t&quot;:&quot;root&quot;,&quot;d&quot;:0,&quot;v&quot;:&quot;&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[0,1]},&quot;v&quot;:&quot;Factors&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[1,2],&quot;f&quot;:true},&quot;v&quot;:&quot;å…‰æº&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:3,&quot;p&quot;:{&quot;lines&quot;:[2,3],&quot;f&quot;:true},&quot;v&quot;:&quot;å¹³è¡Œå…‰&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:3,&quot;p&quot;:{&quot;lines&quot;:[3,4],&quot;f&quot;:true},&quot;v&quot;:&quot;ç‚¹å…‰&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:3,&quot;p&quot;:{&quot;lines&quot;:[4,5],&quot;f&quot;:true},&quot;v&quot;:&quot;èšå…‰ç¯&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[5,6],&quot;f&quot;:true},&quot;v&quot;:&quot;ç›¸å¯¹ä½ç½®&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:3,&quot;p&quot;:{&quot;lines&quot;:[6,7],&quot;f&quot;:true},&quot;v&quot;:&quot;è·ç¦»è¡°å‡&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:3,&quot;p&quot;:{&quot;lines&quot;:[7,8],&quot;f&quot;:true},&quot;v&quot;:&quot;è§’åº¦ï¼ˆLambertâ€™s cosine lawï¼‰&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[8,9],&quot;f&quot;:true},&quot;v&quot;:&quot;æè´¨&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:3,&quot;p&quot;:{&quot;lines&quot;:[9,10],&quot;f&quot;:true},&quot;v&quot;:&quot;Ambient&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:3,&quot;p&quot;:{&quot;lines&quot;:[10,11],&quot;f&quot;:true},&quot;v&quot;:&quot;Diffuse&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:3,&quot;p&quot;:{&quot;lines&quot;:[11,12],&quot;f&quot;:true},&quot;v&quot;:&quot;Specular&quot;}]}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[12,13]},&quot;v&quot;:&quot;Shading-Reflectionâ­&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[13,14],&quot;f&quot;:true},&quot;v&quot;:&quot;<a href=\&quot;#font-color-750000-Lambertian-Reflection-â­-font\&quot;>Lambertian</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[14,15],&quot;f&quot;:true},&quot;v&quot;:&quot;<a href=\&quot;#font-color-750000-Blinn-Phong-Reflection-â­-font\&quot;>Blinn-Phong</a>&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[15,16]},&quot;v&quot;:&quot;Shading-Tech&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[16,17],&quot;f&quot;:true},&quot;v&quot;:&quot;<a href=\&quot;#1-Flat-Shading\&quot;>Flat</a>ï¼ˆpolyï¼‰&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[17,18],&quot;f&quot;:true},&quot;v&quot;:&quot;<a href=\&quot;#2-Gouraud-Shading\&quot;>Gouraund</a>ï¼ˆvertexï¼‰&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[18,19],&quot;f&quot;:true},&quot;v&quot;:&quot;<a href=\&quot;#3-Phong-Shading\&quot;>Phong</a>ï¼ˆpixelï¼‰&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[19,20]},&quot;v&quot;:&quot;Shading-Normal&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[20,21],&quot;f&quot;:true},&quot;v&quot;:&quot;<a href=\&quot;#1-é¡¶ç‚¹æ³•çº¿\&quot;>Vertex-normal</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[21,22],&quot;f&quot;:true},&quot;v&quot;:&quot;<a href=\&quot;#2-åƒç´ æ³•çº¿\&quot;>Pixel-normal</a>&quot;}]}],&quot;p&quot;:{}}"></svg></div><h2 id="Shading">Shading</h2><p><a href="https://en.wikipedia.org/wiki/Shading">Wikipedia: Shading</a><br>ç»´åŸºç™¾ç§‘å¯¹äº shading çš„å®šä¹‰éå¸¸æ¸…æ¥šï¼Œå³å¯¹3ç»´åœºæ™¯ä¸­æ¨¡å‹ <strong>ç€è‰²</strong> çš„è¿‡ç¨‹ï¼Œä¸”ç€è‰²çš„æ•ˆæœå–å†³äºå¦‚ä¸‹å‡ ä¸ªå› ç´ ï¼š</p><h3 id="1-å…‰æº">1.å…‰æº</h3><p>æ¨èé˜…è¯»ï¼š<a href="https://learnopengl.com/Lighting/Multiple-lights">LearnOpenGL</a>ï¼Œ<a href="https://www.cs.ucr.edu/~shinar/courses/cs130-spring-2012/content/Lecture12.pdf">CS130-Lecture12</a></p><ul><li><p>Ambient lighting<br>ç¯å¢ƒå…‰ç…§ï¼Œå³ä½¿åœ¨æœ€é»‘æš—çš„æƒ…å†µä¸‹ï¼Œå­˜åœ¨ä¸€äº›å¾®å¼±çš„å…‰äº®ä½¿å¾—ç‰©ä½“å‘ˆç°å‡ºä¸€äº›é¢œè‰²ã€‚</p></li><li><p>Directional lighting<br>å¹³è¡Œå…‰ï¼Œä¹Ÿç§°ä½œå¤©å…‰ï¼Œåœ¨å›ºå®šçš„å…‰æºæ–¹å‘ä¸Šæ— ä»»ä½•è¡°å‡ã€‚</p></li><li><p>Point lighing<br>ç‚¹å…‰ï¼Œå‘å››å‘¨ç…§å°„ï¼Œéšè·ç¦»è¡°å‡ã€‚</p></li><li><p>Spotlighting<br>èšå…‰ç¯ï¼Œå‘ˆä¸€ä¸ªé”¥å½¢èŒƒå›´ç…§å°„ï¼Œéšè·ç¦»è¡°å‡ã€‚</p></li></ul><h3 id="2-ç›¸å¯¹ä½ç½®">2.ç›¸å¯¹ä½ç½®</h3><ul><li><p>è·ç¦»å…³ç³»<br>å…‰ç…§å¼ºåº¦ä¸€èˆ¬éš <strong>è·ç¦»çš„å¹³æ–¹</strong> è¡°å‡ï¼Œ$ ~ I / r^{2}$</p></li><li><p>è§’åº¦å…³ç³»<br>æ ¹æ® <a href="https://en.wikipedia.org/wiki/Lambert%27s_cosine_law">Lambertâ€™s cosine law</a>ï¼Œ$\vec {n} * \vec {l}$ ï¼ˆç»“åˆåé¢çš„ Lambertian Reflection ç†è§£ï¼‰</p></li></ul><h3 id="3-æè´¨">3.æè´¨</h3><ul><li><p>Roughness<br>ç²—ç³™åº¦è¶Šé«˜ï¼Œé•œé¢åå°„èƒ½åŠ›è¶Šå¼ºï¼Œå…¸å‹ä»£è¡¨å¦‚é•œå­ã€‚</p></li><li><p>Metallic<br>é‡‘å±åº¦è¶Šé«˜ï¼Œæ¼«åå°„è¶Šå¼±ã€‚</p></li><li><p>Translucent<br>å…·æœ‰é€å…‰å±æ€§ï¼Œå¦‚å…¸å‹çš„ <a href="https://en.wikipedia.org/wiki/Subsurface_scattering">SSS</a>ã€‚</p></li></ul><h2 id="Local-Shading">Local Shading</h2><p>ç°å®ä¸­çš„å…‰ç…§ï¼Œéœ€è¦è€ƒè™‘å„ç§ç›´æ¥å…‰ã€é—´æ¥å…‰çš„åå°„ã€å¸æ”¶æ•ˆæœï¼Œæƒ³è¦åœ¨å›¾å½¢å¼•æ“ä¸­æ¨¡æ‹Ÿå®ƒä»¬éå¸¸ä¸ç°å®ã€‚å› æ­¤ä¸€äº›å¤§ä½¬æå‡ºå±€éƒ¨çš„ç€è‰²ç®—æ³•ï¼Œä»¥æ¨¡æ‹Ÿ <strong>ä¸€ä¸ªç‹¬ç«‹ç‚¹çš„shadingè®¡ç®—</strong>ï¼Œè¿™é‡Œç»Ÿç§°ä¸º local-shadingã€‚<br>æˆ‘ä»¬éœ€è¦äº†è§£ <code>Lambertian Reflection</code> å’Œ <code>Blinn-Phong Reflection</code>ã€‚</p><h3 id="font-color-750000-Lambertian-Reflection-â­-font"><font color="#750000">Lambertian Reflection â­</font></h3><p><strong>Lambertianæ¨¡å‹</strong> ä¸€èˆ¬ç”¨æ¥æ¨¡æ‹Ÿ diffuseå…‰ï¼Œæ ¸å¿ƒå½±å“åˆ†åˆ«æ˜¯ï¼šè·ç¦»ã€è§’åº¦ã€‚<br>è·ç¦»åŸºæœ¬çš„è¡°å‡å…³ç³»ï¼Œå‰é¢è®²è¿‡äº†ã€‚è§’åº¦æ ¹æ® <a href="https://en.wikipedia.org/wiki/Lambert%27s_cosine_law">Lambertâ€™s cosine law</a> è®¡ç®—å¾—ä¸€ä¸ªå…‰ç…§å¼ºåº¦çš„ç³»æ•°ï¼Œå…¶ä¸­ $max(0, n \cdot l)$ è¡¨ç¤ºä»»ä½•å¤§äº90åº¦çš„å¤¹è§’ï¼Œå…‰ç…§å¼ºåº¦éƒ½ä¸º0ã€‚</p><p><img src="/images/lambert-shading.png" alt=""></p><hr><h3 id="font-color-750000-Blinn-Phong-Reflection-â­-font"><font color="#750000">Blinn-Phong Reflection â­</font></h3><p><strong>Blinn-Phongæ¨¡å‹</strong> åœ¨å‰è€…çš„åŸºç¡€ä¸Šå¼•å…¥äº† <strong>Ambient ç¯å¢ƒå…‰</strong> å’Œ <strong>Specularé«˜å…‰</strong>ï¼Œå®ƒæ˜¯ä¸€ä¸ªå«<code>Blinn</code>çš„æ•™æˆæ‹“å±•äº†<code>Phong</code>çš„å…‰ç…§æ¨¡å‹ï¼Œå…¶è®¡ç®—æ–¹å¼åˆ†åˆ«ä¸ºï¼š</p><ul><li><strong>Specular</strong></li></ul><blockquote><p>$L_{s} = K_{s}(I/r^{2}) max(0, n \cdot h)^{p}$<br>å¼•å…¥ä¸€ä¸ª <strong>åŠç¨‹å‘é‡ $h (=\frac{v+l}{|v+l|})$</strong>ï¼Œå®é™…å«ä¹‰ä¸ºå…¥å°„è§’å’Œè§‚å¯Ÿè§’çš„äºŒåˆ†ä¹‹ä¸€å¤¹è§’ã€‚æ­¤æ—¶è¡¡é‡ $h$ å’Œ $n$ çš„æ¥è¿‘ç¨‹åº¦ï¼Œå³ç‚¹ä¹˜ $n \cdot h$ï¼ˆ<code>Phong</code>æ¨¡å‹é€‰å–çš„æ˜¯ $cos(\alpha)$ï¼Œ$\alpha$æ˜¯å¤¹è§’ï¼‰ï¼Œ $n, h$ è¶Šæ¥è¿‘ åˆ™ç‚¹ä¹˜å€¼è¶Šå¤§ï¼Œåˆ™é«˜å…‰è¶Šå¼ºçƒˆã€‚<br><br>å…¶ä¸­çš„ p è¡¡é‡ <strong>é«˜å…‰éšå¤¹è§’çš„è¡°å‡é€Ÿåº¦</strong>ï¼Œpå€¼è¶Šå¤§ï¼Œåˆ™å‘ˆç°é«˜å…‰çš„èŒƒå›´è¶Šå°ï¼ˆå¦‚ä¸‹å›¾ï¼‰ã€‚</p><ul><li>p = 5 â€¦ 10ï¼šå¡‘æ–™</li><li>p = 100 â€¦ 200ï¼šé‡‘å±<br><img src="/images/blinn-phong-demo-all.png" alt=""></li></ul></blockquote><ul><li><strong>Diffuse</strong></li></ul><blockquote><p>åŒ Lambertianæ¨¡å‹</p></blockquote><ul><li><strong>Ambient</strong></li></ul><blockquote><p>$L_{a} = k_{a}I_{a}$<br>ç¯å¢ƒå…‰å‡è®¾ä»»ä½•ç‚¹æ¥è‡ªç¯å¢ƒçš„ <strong>å…‰ç…§å¼ºåº¦æ˜¯ä¸€è‡´çš„</strong>ï¼Œå³ $I_{a}$ï¼Œå®ƒä¸å®é™…å…‰ç…§æ–¹å‘æ— å…³ã€‚<br>ç¬”è€…ç²—æš´åœ°ç†è§£ä¸ºè‡ªå‘å…‰ã€å›ºæœ‰è‰²ã€‚</p></blockquote><p><img src="/images/blinn-phong.png" alt=""><br><br></p><h2 id="Shading-Tech">Shading Tech</h2><p>æ¨èé˜…è¯»ï¼š<a href="https://en.wikipedia.org/wiki/Shading">Wikipedia</a>ï¼Œ<a href="https://www.cs.ucr.edu/~shinar/courses/cs130-spring-2012/content/Lecture14.pdf">CS130-Lecture14</a></p><p>å‰é¢è®¨è®ºå…‰ç…§æ¨¡å‹çš„è®¡ç®—ï¼Œä½†æ˜¯å¿½ç•¥äº†ä¸€ä¸ªé‡ç‚¹ï¼š<strong>ä»¥ä»€ä¹ˆå¯¹è±¡ï¼ˆæˆ–ç²’åº¦ï¼‰è¿›è¡ŒShading?</strong><br>åŸºäºå‰é¢çš„çŸ¥è¯†å¾—åˆ°ï¼Œä»»ä½• mesh éƒ½æ˜¯ç”±é¡¶ç‚¹å’Œä¸‰è§’å½¢ï¼ˆæˆ–Polyï¼‰ç»„æˆï¼Œå› æ­¤è‡ªç„¶æƒ³åˆ°å¦‚ä¸‹å‡ ç§æ–¹æ¡ˆï¼š</p><ul><li>Triï¼ˆPolyï¼‰ï¼šåŸºäºä¸‰è§’é¢çš„ Flat Shading</li><li>Vertexï¼šåŸºäºé¡¶ç‚¹çš„ Gouraud Shading</li><li>Pixelï¼šåŸºäºåƒç´ çš„ Phong Shading</li></ul><p><img src="/images/shading-tech.png" alt=""></p><h3 id="1-Flat-Shading">1. Flat Shading</h3><p>å¯¹<strong>æ¯ä¸ªä¸‰è§’å½¢ï¼ˆæˆ–Polyï¼‰</strong> è®¡ç®—å‡ºä¸€ä¸ªæ³•çº¿ï¼Œå¯ä»¥é€šè¿‡å‰ä¹˜å¾—åˆ°ï¼Œå¹¶åŸºäºæ³•çº¿ä½œå…‰ç…§è®¡ç®—ã€‚æ­¤æ—¶ä¸‰è§’å½¢å†…çš„Shadingç»“æœæ˜¯ä¸€æ ·çš„ã€‚å¯ä»¥ç†è§£ä¸º <code>Low-Poly</code> çš„æ¸²æŸ“é£æ ¼ã€‚</p><h3 id="2-Gouraud-Shading">2. Gouraud Shading</h3><p>å¯¹<strong>æ¯ä¸ªé¡¶ç‚¹</strong>ä½œè®¡ç®—ï¼ˆå‡è®¾é¡¶ç‚¹æ²¡æœ‰è‡ªå·±æ³•çº¿ï¼Œå¯ä»¥æ ¹æ®å‘¨å›´å‡ ä¸ªä¸‰è§’é¢çš„æ³•çº¿æ±‚å‡å€¼ï¼‰ã€‚å¯ä»¥ç†è§£ä¸º <code>Vertex-Shader</code>ã€‚</p><p><img src="/images/gouraud-shading.png" alt=""></p><h3 id="3-Phong-Shading">3. Phong Shading</h3><p>å¯¹<strong>æ¯ä¸ªåƒç´ </strong>æ’å€¼å‡ºå•ç‹¬çš„æ³•çº¿ï¼ŒåŸºäºæ­¤ä½œå…‰ç…§è®¡ç®—ã€‚å› ä¸ºæ˜¯å…¨åƒç´ çš„ï¼Œæ‰€ä»¥æ€§èƒ½å¼€é”€é«˜ã€‚å¯ä»¥ç†è§£ä¸º <code>Pixel-Shader</code></p><h3 id="ä¸‰ç§æ–¹æ¡ˆå¯¹æ¯”">ä¸‰ç§æ–¹æ¡ˆå¯¹æ¯”</h3><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">Flat</th><th style="text-align:center">Gouraud</th><th style="text-align:center">Phong</th></tr></thead><tbody><tr><td style="text-align:center">å…‰ç…§ç²’åº¦</td><td style="text-align:center">poly</td><td style="text-align:center">Vertex</td><td style="text-align:center">pixel</td></tr><tr><td style="text-align:center">è¡¨ç°</td><td style="text-align:center">åŠ£</td><td style="text-align:center">ä¸­</td><td style="text-align:center">ä¼˜</td></tr><tr><td style="text-align:center">æ€§èƒ½éœ€æ±‚</td><td style="text-align:center">ä½</td><td style="text-align:center">ä¸­</td><td style="text-align:center">é«˜</td></tr><tr><td style="text-align:center">éœ€è¦é¡¶ç‚¹æ³•çº¿</td><td style="text-align:center">Ã—</td><td style="text-align:center">âˆš</td><td style="text-align:center">âˆš</td></tr></tbody></table><h2 id="Normal">Normal</h2><p>Shadingçš„ç€è‰²è®¡ç®—éå¸¸ä¾èµ– <strong>æ³•çº¿</strong>ï¼Œä¸‹é¢ä»‹ç»ä¸¤ç§å¸¸è§çš„æ³•çº¿è®¡ç®—æ–¹å¼ï¼š</p><h3 id="1-é¡¶ç‚¹æ³•çº¿">1. é¡¶ç‚¹æ³•çº¿</h3><ul><li><p>æ¨¡å‹è‡ªå¸¦ï¼Œä¾‹å¦‚ <code>obj</code> æ ¼å¼å¯ä»¥æŒ‡å®šé€é¡¶ç‚¹çš„æ³•çº¿</p></li><li><p>è®¡ç®—é¡¶ç‚¹å‘¨å›´ <code>Poly</code> çš„æ³•çº¿å‡å€¼</p></li></ul><p><img src="/images/vertex-normal.png" alt=""></p><h3 id="2-åƒç´ æ³•çº¿">2. åƒç´ æ³•çº¿</h3><ul><li>é€šè¿‡ä¸¤ä¸ªé¡¶ç‚¹çš„æ³•çº¿æ’å€¼ï¼Œè®°å¾—å½’ä¸€åŒ–ï¼</li></ul><p><img src="/images/pixel-vertex.png" alt=""></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;Lambertianã€Blinn-phongã€shading-tech&lt;/p&gt;</summary>
    
    
    
    <category term="Graphics" scheme="http://luhao.wiki/categories/Graphics/"/>
    
    <category term="Graphics" scheme="http://luhao.wiki/categories/Graphics/Graphics/"/>
    
    
    <category term="OpenGL" scheme="http://luhao.wiki/tags/OpenGL/"/>
    
  </entry>
  
  <entry>
    <title>ã€CSAPPã€‘Virtual Memory</title>
    <link href="http://luhao.wiki/posts/virtual-memory/"/>
    <id>http://luhao.wiki/posts/virtual-memory/</id>
    <published>2023-06-13T12:33:56.000Z</published>
    <updated>2023-07-04T18:18:36.861Z</updated>
    
    <content type="html"><![CDATA[<p>è™šæ‹Ÿå†…å­˜ã€cacheã€å†…å­˜åˆ†é…ã€å†…å­˜æ³„æ¼â€¦<span id="more"></span></p><div class="admonition note"><p class="admonition-title">å¯¼è¯»</p><ul><li><a href="http://1.15.115.4/CSAPP-3rd.pdf">CSAPP ç¬¬9ç« ï¼šVirtual Memory</a>ï¼ˆå·²è¯»å®Œï¼Œé€šä¿— &amp; å—ç›ŠåŒªæµ…ï¼‰</li><li><a href="/posts/3RBTN4W/">æ±‡ç¼–ï¼ˆä¸€ï¼‰ï¼šè®¡ç®—æœºæ¶æ„å…¥é—¨</a>ï¼ˆç«™å†…æ–‡ç« ï¼Œç¡¬ä»¶åŸºç¡€çŸ¥è¯†ï¼‰</li><li><a href="https://fengmuzi2003.gitbook.io/csapp3e/dixzhang-xu-ni-nei-cun">CSAPPé‡ç‚¹è§£è¯»ï¼šè™šæ‹Ÿå†…å­˜</a></li><li><a href="https://people.freebsd.org/~lstewart/articles/cpumemory.pdf">What Every Programmer Should Know About Memory</a>ï¼ˆ114é¡µpdfï¼‰</li><li><a href="https://en.cppreference.com/w/c/memory">cppreference: Dynamic memory management</a></li><li><a href="https://www.usna.edu/Users/cs/roche/courses/s19ic221/lab05.html">IC221 Lab 05: Memory Leaks</a></li></ul></div><div class="markmap-container" style="height:450px">  <svg data="{&quot;t&quot;:&quot;root&quot;,&quot;d&quot;:0,&quot;v&quot;:&quot;&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[0,1]},&quot;v&quot;:&quot;Whatï¼ŒWhy&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[1,2]},&quot;v&quot;:&quot;physics-memory åŠå¼Šç«¯&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[2,3]},&quot;v&quot;:&quot;virtual-memory&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[3,4]},&quot;v&quot;:&quot;virtual page&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[4,5]},&quot;v&quot;:&quot;<a href=\&quot;#PTE\&quot;>é¡µè¡¨ PTE</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[5,6]},&quot;v&quot;:&quot;Cache&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:3,&quot;p&quot;:{&quot;lines&quot;:[6,7]},&quot;v&quot;:&quot;<a href=\&quot;#page-hits-âœ”\&quot;>é¡µå‘½ä¸­</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:3,&quot;p&quot;:{&quot;lines&quot;:[7,8]},&quot;v&quot;:&quot;<a href=\&quot;#page-faults-âŒ\&quot;>ç¼ºé¡µ</a>&quot;}]}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[8,9]},&quot;v&quot;:&quot;<a href=\&quot;#locality\&quot;>Locality</a>&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[9,10]},&quot;v&quot;:&quot;æ—¶é—´å±€éƒ¨æ€§&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[10,11]},&quot;v&quot;:&quot;ç©ºé—´å±€éƒ¨æ€§&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[11,12]},&quot;v&quot;:&quot;<a href=\&quot;#memory-allocator\&quot;>memory allocator</a>&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[12,13]},&quot;v&quot;:&quot;<a href=\&quot;#è¡¡é‡æ ‡å‡†\&quot;>è¡¡é‡æ ‡å‡†</a>&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:3,&quot;p&quot;:{&quot;lines&quot;:[13,14]},&quot;v&quot;:&quot;1. åˆ†é…&amp;amp;é‡Šæ”¾é€Ÿç‡&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:3,&quot;p&quot;:{&quot;lines&quot;:[14,15]},&quot;v&quot;:&quot;2. å†…å­˜åˆ©ç”¨ç‡&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[15,16]},&quot;v&quot;:&quot;Explicit allocator&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:3,&quot;p&quot;:{&quot;lines&quot;:[16,17]},&quot;v&quot;:&quot;<a href=\&quot;#u-class-black-mallco-free-u\&quot;>malloc &amp;amp; free</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:3,&quot;p&quot;:{&quot;lines&quot;:[17,18]},&quot;v&quot;:&quot;new &amp;amp; delete&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[18,19]},&quot;v&quot;:&quot;Implicit allocator&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:3,&quot;p&quot;:{&quot;lines&quot;:[19,20]},&quot;v&quot;:&quot;<a href=\&quot;#åƒåœ¾å›æ”¶\&quot;>åƒåœ¾å›æ”¶</a>&quot;}]}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[20,21]},&quot;v&quot;:&quot;<a href=\&quot;#memory-leaks\&quot;>memory leaks</a>&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[21,22]},&quot;v&quot;:&quot;<a href=\&quot;#Valgrind\&quot;>Valgrind</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[22,23]},&quot;v&quot;:&quot;<a href=\&quot;#ASan\&quot;>ASan</a>&quot;}]},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[23,24]},&quot;v&quot;:&quot;<a href=\&quot;#memory-bugs\&quot;>memory bugs</a>&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[24,25]},&quot;v&quot;:&quot;<a href=\&quot;#å¼•ç”¨åæŒ‡é’ˆâŒ\&quot;>å¼•ç”¨åæŒ‡é’ˆ</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[25,26]},&quot;v&quot;:&quot;<a href=\&quot;#æœªåˆå§‹åŒ–çš„å †å†…å­˜âŒ\&quot;>æœªåˆå§‹åŒ–çš„å †å†…å­˜</a>&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[26,27]},&quot;v&quot;:&quot;<a href=\&quot;#ç¼“å†²åŒºæº¢å‡ºâŒ\&quot;>ç¼“å†²åŒºæº¢å‡º</a>&quot;}]}],&quot;p&quot;:{}}"></svg></div><h2 id="virtual-memory">virtual memory</h2><p>ç‰©ç†å†…å­˜æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ1. å†…å­˜ç©ºé—´ä¸å¤Ÿï¼Œ2. äº§ç”Ÿå†…å­˜ç¢ç‰‡ï¼Œ3. æ²¡æœ‰å†…å­˜ä¿æŠ¤ã€‚ä»è¿™ä¸ªè§’åº¦çœ‹ï¼Œ<strong>è™šæ‹Ÿå†…å­˜æ˜¯ä¸€ä¸ªä¸­é—´å±‚ï¼Œæœ¬è´¨æ˜¯åˆ°ç‰©ç†å†…å­˜çš„ä¸€å±‚æ˜ å°„å…³ç³»</strong>ã€‚<br>å¹¶éæ‰€æœ‰ç³»ç»Ÿéƒ½ä¼šä½¿ç”¨è™šæ‹Ÿå†…å­˜ï¼Œä¸€äº›å¤è€orç®€å•çš„ç³»ç»Ÿå°±ä¼šç›´æ¥ä½¿ç”¨ç‰©ç†å†…å­˜ã€‚</p><p>ç‰©ç†åœ°å€å’Œè™šæ‹Ÿåœ°å€çš„å¯¹æ¯”å¦‚ä¸‹ï¼š</p><ul><li><p><strong>Physical-Address</strong>ï¼šç‰©ç†åœ°å€ï¼Œä»0å¼€å§‹æ¯ä¸ªbyteé€’å¢1<br>ç‰©ç†åœ°å€å¯ä»¥ç›´è§‚ååº”å†…å­˜å¤§å°ï¼Œä¸”æ˜¯è¿ç»­çš„ï¼Œä¾‹å¦‚ <code>0x0000 ~ 0xFFFF</code> è¡¨ç¤º <code>64KB</code> çš„å†…å­˜ã€‚</p></li><li><p><strong>Virtual-Address</strong>ï¼šè™šæ‹Ÿåœ°å€ï¼Œæ˜¯ä¸€ç§åˆ°ç‰©ç†åœ°å€çš„æ˜ å°„ï¼ˆ<a href="https://en.wikipedia.org/wiki/Memory_management_unit">MMU</a>ï¼‰<br>ä½¿ç”¨è™šæ‹Ÿåœ°å€ï¼Œå¯ä»¥èŠ‚çœåœ°å€æ€»çº¿çš„ä½æ•°ï¼Œä¸”åˆ©äºcacheå®ç°ã€‚</p></li></ul><p><img src="/images/virtual-memory.png" alt=""></p><h2 id="cache">cache</h2><p><strong>å­˜å‚¨å™¨</strong> æ˜¯è®¡ç®—æœºç”¨æ¥å­˜å‚¨æ•°æ®çš„å™¨ä»¶ï¼Œå³é€šå¸¸æ‰€è¯´çš„ç£ç›˜ã€‚å…¶æ ¹æ®è¯»å†™ç‰¹æ€§åˆå¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼š</p><ul><li><p><strong>ROMï¼ˆRead-Only-Memoryï¼‰</strong><br>åªè¯»ï¼Œä¸€èˆ¬æ˜¯æ˜¾å¡ã€ç½‘å¡ä¸Šçš„é»˜è®¤ç³»ç»Ÿï¼Œå¦‚<code>BIOS</code></p></li><li><p><strong>RAMï¼ˆRandom-Access-Memoryï¼‰</strong><br>å¯è¯»å¯å†™ï¼Œæ˜¾å¡ä¸Šçš„RAMåˆæˆä¸ºæ˜¾å­˜</p></li></ul><p>ä¸ºäº†æé«˜CPUè¯»å†™æ•°æ®çš„é€Ÿåº¦ï¼Œç°ä»£è®¡ç®—æœºåœ¨ CPUå’ŒRAMä¹‹é—´åˆå¢åŠ äº† <strong>é€Ÿåº¦æ›´å¿«ã€å†…å­˜æ›´å°ã€é€ ä»·æ›´é«˜çš„</strong> <em><strong>L1, L2, L3 Cache</strong></em>ï¼Œè¿™éƒ¨åˆ†ç§°ä¸º SRAMï¼ˆStaticï¼‰ã€‚<br>ä½œä¸ºå¯¹æ¯”ï¼ŒDRAMï¼ˆDynamicï¼‰ ä¸€èˆ¬ç”¨ä½œè™šæ‹Ÿå†…å­˜çš„cacheã€‚<font color="#FF1E10"><strong>ï¼ˆ???ï¼‰</strong></font></p><p>è‡³äºä¸ºä»€ä¹ˆ SRAM é€Ÿåº¦è¦æ¯” DRAM å¿«å¾ˆå¤šï¼Ÿè¿™éœ€è¦ä»ç¡¬ä»¶åˆ¶é€ ä¸Šç†è§£ï¼Œå‚è€ƒé˜…è¯»ï¼š<a href="https://rf.eefocus.com/article/id-336795">å­˜å‚¨æŠ€æœ¯SRAMè¯¦è§£</a></p><h2 id="page">page</h2><p>è®¡ç®—æœºå†…å­˜ä¼šè¢«åˆ’åˆ†ä¸ºå›ºå®šå¤§å°çš„ <strong>é¡µï¼ˆpageï¼‰</strong>ï¼Œåˆ’åˆ†é¡µæ˜¯ä¸ºäº†å®ç°ç¼“å­˜çš„åŠŸèƒ½ã€‚</p><p>å¯¹äºè™šæ‹Ÿå†…å­˜è€Œè¨€ï¼Œä»»ä½•ä¸€ä¸ª <strong>è™šæ‹Ÿé¡µï¼ˆvirtual page, VPï¼‰</strong> ä¸­çš„å†…å­˜åªèƒ½å¤„äºå¦‚ä¸‹ä¸‰ç§çŠ¶æ€ï¼š</p><ul><li>unallocatedï¼šæœªåˆ†é…å†…å­˜ï¼ˆå³ä¸åœ¨ç‰©ç†å†…å­˜ä¸­ï¼‰</li><li>cachedï¼šå·²ç¼“å­˜ï¼ˆä½†åœ¨ç‰©ç†å†…å­˜ä¸­ï¼‰</li><li>uncachedï¼šæœªç¼“å­˜ï¼ˆä½†åœ¨ç‰©ç†å†…å­˜ä¸­ï¼‰</li></ul><h3 id="PTE">PTE</h3><p>ä¸ºäº†æè¿° è™šæ‹Ÿé¡µ å’Œ DRAM ä¹‹é—´çš„ç¼“å­˜å…³ç³»ï¼Œæ“ä½œç³»ç»Ÿå¼•å…¥ <strong>é¡µè¡¨ PTEï¼ˆPage Table Entryï¼‰</strong> çš„æ¦‚å¿µã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå®ƒæœ‰ä¸€ä¸ªæœ‰æ•ˆä½å’Œä¸€ä¸ªnä½åœ°å€ ç»„æˆï¼š</p><ul><li><strong>æœ‰æ•ˆä½</strong>ï¼šå¯¹åº”çš„è™šæ‹Ÿé¡µæ˜¯å¦ cached</li><li><strong>åœ°å€ä½</strong>ï¼šè‹¥cachedï¼Œåˆ™å¯¹åº” DRAM çš„ç‰©ç†åœ°å€</li><li>å…¶ä»–è®¸å¯ä½ï¼šå¦‚å¯è¯»ã€å¯å†™ã€å¯åœ¨å†…æ ¸è¿è¡Œç­‰</li></ul><p>é…åˆä¸‹å›¾ç†è§£ï¼Œä¸€æ®µè™šæ‹Ÿå†…å­˜è¢«åˆ†ä¸º 8ä¸ªè™šæ‹Ÿé¡µï¼Œå¯¹åº”ç€å·¦ä¾§çš„ 8ä¸ªPTEï¼Œå…¶ä¸­çš„è™šæ‹Ÿé¡µ1ã€2ã€4ã€7å·²ç»åœ¨ç‰©ç†å†…å­˜ä¸­è¢«ç¼“å­˜ï¼ŒåŒæ—¶åœ¨PTEä¸­å­˜å‚¨äº†å¯¹åº”åœ°å€ã€‚</p><p><img src="/images/virtual-page.png" alt=""></p><div class="admonition note"><p class="admonition-title">è™šæ‹Ÿå†…å­˜è®¿é—®é¡µçš„ä¸¤ç§æƒ…å½¢</p><ul><li>å·²ç¼“å­˜ï¼Œå³ page hits</li><li>æœªç¼“å­˜ï¼Œå³ page faults</li></ul></div><h3 id="page-hits-âœ”">page hits âœ”</h3><p>é¡µå‘½ä¸­ï¼Œå³è™šæ‹Ÿé¡µå·²ç»åœ¨DRAMä¸­è¢«ç¼“å­˜ï¼Œè¯»å–æ—¶åªéœ€æ ¹æ® PTE æ‰¾åˆ°å¯¹åº”çš„ç‰©ç†åœ°å€ã€‚</p><h3 id="page-faults-âŒ">page faults âŒ</h3><p>é¡µç¼ºå¤±ï¼Œå³è™šæ‹Ÿé¡µ <code>cache miss</code>ï¼Œè¿™æ˜¯å®ƒåœ¨ PTE ä¸­çš„æœ‰æ•ˆä½æ˜¯0ï¼Œå³ä»£è¡¨å…¶åœ¨ DRAM ä¸­æœªç¼“å­˜ã€‚<br>æ­¤æ—¶å†…æ ¸ä¼šé€‰æ‹©ä¸€ä¸ªå·²ç»è¢«ç¼“å­˜çš„ â€œæ— è¾œå„¿â€ å»æ›¿æ¢æˆè¯¥é¡µï¼Œè¿™ä¸ªæ— è¾œå„¿åˆç§°ä¸º <strong>ç‰ºç‰²é¡µï¼ˆvictim pageï¼‰</strong>ï¼ŒåŒæ—¶è¿›è¡Œå¦‚ä¸‹ä¸¤ä¸ªæ“ä½œï¼š</p><ol><li>ï¼ˆç‰©ç†å†…å­˜ä¸­ï¼‰ç”¨ æŸ¥æ‰¾é¡µ æ›¿æ¢ ç‰ºç‰²é¡µ</li><li>ï¼ˆé¡µè¡¨PTEä¸­ï¼‰äº¤æ¢ æŸ¥æ‰¾é¡µå’Œç‰ºç‰²é¡µ çš„ cacheæœ‰æ•ˆä½</li></ol><p>æ³¨æ„è¿™é‡Œçš„ <a href="https://forum.huawei.com/enterprise/en/thread/667215004455288832?page=1">æ›¿æ¢ç­–ç•¥</a> å¾ˆé‡è¦ï¼Œä¸»è¦æœ‰å¦‚ä¸‹ä¸¤ç§ï¼ˆå®é™…åº”ç”¨ä¼šæ›´å¤æ‚ï¼‰ï¼š</p><ul><li>write-throughï¼šç›´å†™ï¼Œå‘ç”Ÿæ”¹å˜æ—¶æ›´æ–°cacheå’Œå†…å­˜</li><li>write-backï¼šå›å†™ï¼Œå‘ç”Ÿæ”¹å˜æ—¶åªæ›´æ–°cache</li></ul><p>DRAM ä¸ºäº†æ€§èƒ½è€ƒè™‘ï¼Œé‡‡å–çš„æ˜¯ <code>write-back</code> æ–¹æ¡ˆã€‚</p><h2 id="locality">locality</h2><p>è™šæ‹Ÿå†…å­˜ã€åˆ†é¡µä¹‹æ‰€ä»¥èƒ½è¾¾åˆ°éå¸¸å¥½çš„cacheä¼˜åŒ–ï¼Œæ˜¯å› ä¸ºç¨‹åºçš„å±€éƒ¨æ€§åŸç† <a href="https://en.wikipedia.org/wiki/Locality_of_reference">Locality of reference</a></p><ul><li><p><strong>æ—¶é—´å±€éƒ¨æ€§</strong>ï¼šä¸€ä¸ªåˆšåˆšè¢«è®¿é—®çš„å†…å­˜åœ°å€ï¼Œåœ¨æœªæ¥æœ‰æ›´å¤§æ¦‚ç‡è¢«å†æ¬¡è®¿é—®</p></li><li><p><strong>ç©ºé—´å±€éƒ¨æ€§</strong>ï¼šè¢«è®¿é—®çš„å†…å­˜åœ°å€ï¼Œå…¶å‘¨å›´çš„å†…å­˜æ›´å®¹æ˜“è¢«è®¿é—®</p></li></ul><h2 id="memory-allocator">memory allocator</h2><p>å®é™…å¼€å‘ä¸­ï¼Œå½“éœ€è¦ç”³è¯·ä¸€æ®µå†…å­˜æ—¶ï¼Œå…¶å¤§å°å¾€å¾€ä¸æ˜¯å›ºå®šçš„ï¼ˆä¸runtimeæœ‰å…³ï¼‰ï¼Œæ­¤æ—¶æœ‰å¦‚ä¸‹ä¸¤ç§å†…å­˜åˆ†é…åˆ°æ–¹å¼ï¼š</p><ul><li><code>int arr[10000];</code> é™æ€å®šä¹‰å <code>hard-code</code>ï¼Œæµªè´¹è¾ƒå¤šå†…å­˜</li><li><code>int* arr;</code> <strong>éœ€è¦æ—¶åŠ¨æ€åˆ†é…å†…å­˜â­ï¼Œæœ¬ç« é‡ç‚¹ä»‹ç»</strong></li></ul><p>C++ æä¾›ä¸€ç§åœ¨ <strong>å †(heap)</strong> ä¸ŠåŠ¨æ€åˆ†é…å†…å­˜çš„æ–¹æ³•ï¼Œä¸€ä¸ª <code>runtime</code> ç¨‹åºçš„å†…å­˜åˆ’åˆ†å¦‚ä¸‹ï¼š<br><img src="/images/section.png" alt=""></p><p>C++ çš„åŠ¨æ€å†…å­˜åˆ†é…å™¨æœ‰ä¸¤ç§ç±»å‹ï¼ŒåŒºåˆ«åœ¨äº<strong>å¦‚ä½•é‡Šæ”¾å†…å­˜</strong>ï¼š</p><ul><li><p><font color="#ef6d3b"><strong>Explicit allocator</strong></font><br>æ˜¾ç¤ºåˆ†é…å™¨ï¼Œè¦æ±‚ç¨‹åºè‡ªå·±å»é‡Šæ”¾æ‰ç”³è¯·çš„å†…å­˜ï¼ŒC-Styleçš„æ–¹æ³•æ˜¯ <code>malloc/free</code>ï¼ŒCpp-Styleçš„æ–¹æ³•æ˜¯ <code>new/delete</code>ï¼›<br>å½“ç¨‹åºæ²¡æœ‰æ­£ç¡®æˆ–åŠæ—¶åœ°é‡Šæ”¾å†…å­˜ï¼Œå°±ä¼šé€ æˆ <em><strong>Memory Leaks</strong></em>ã€‚</p></li><li><p><font color="#ef6d3b"><strong>Implicit allocator</strong></font><br>éšå¼åˆ†é…å™¨ï¼Œå®ƒä¼šè‡ªåŠ¨æ£€æµ‹æœªè¢«é‡Šæ”¾çš„å†…å­˜å—ï¼Œå¹¶ä¸»åŠ¨å»é‡Šæ”¾æ‰ï¼Œå®ƒæœ‰ä¸€ä¸ªé€šä¿—çš„åç§°å« <strong>Garbage Collectorï¼ˆåƒåœ¾å›æ”¶ï¼‰</strong>ï¼›<br>è¯¸å¦‚ Javaã€Python ç­‰æ‹¥æœ‰è‡ªå·±çš„åƒåœ¾å›æ”¶ï¼ˆè¿™éƒ¨åˆ†ä¸ä½œè®¨è®ºï¼‰ã€‚</p></li></ul><h3 id="u-class-black-mallco-free-u"><u class="black">mallco &amp; free</u></h3><ul><li>é˜…è¯»æ–‡æ¡£ï¼š<a href="https://en.cppreference.com/w/c/memory">cppreference: Dynamic memory management</a></li><li>ä½¿ç”¨çš„æ—¶å€™å¤šæŸ¥é˜…æ–‡æ¡£ï¼Œæ³¨æ„ <code>malloc</code> ä½¿ç”¨æ—¶è¦åˆ¤æ–­ <code>NULL</code> é¿å…å†…å­˜åˆ†é…å¤±è´¥</li></ul><pre><code class="language-c++">#include &lt;unistd.h&gt;void *malloc(size_t size);void *calloc( size_t num, size_t size );void *realloc( void *ptr, size_t new_size );</code></pre><ul><li>åˆ†é…è¿‡ç¨‹ï¼šâ†“</li><li>éœ€è¦è€ƒè™‘å­—èŠ‚å¯¹é½ï¼Œæ³¨æ„è¢«é‡Šæ”¾åçš„å†…å­˜ä¹Ÿå¯èƒ½é‡å¤åˆ©ç”¨ï¼Œè¿™ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆé‡æŒ‡é’ˆçš„ <code>undefined behavior</code></li></ul><p><img src="/images/malloc-demo.png" alt=""></p><h3 id="è¡¡é‡æ ‡å‡†">è¡¡é‡æ ‡å‡†</h3><p>åŠ¨æ€å†…å­˜åˆ†é…å™¨çš„å®ç°æœ‰å¾ˆå¤šç§ï¼ˆ<code>malloc</code>æ˜¯éå¸¸æ™®éçš„ä¸€ç§ï¼‰ï¼Œä¸€ä¸ªä¼˜ç§€çš„åˆ†é…å™¨åº”è¯¥å…¼é¡¾å¦‚ä¸‹ä¸¤ç§æ€§è´¨ï¼š</p><ul><li><p><strong>åˆ†é…&amp;é‡Šæ”¾çš„é€Ÿç‡</strong><br>å³æ¯ç§’å¯ä»¥è¿›è¡Œå¤šå°‘æ¬¡çš„å†…å­˜åˆ†é… å’Œ é‡Šæ”¾æ“ä½œï¼Œåˆç§°ä¸ºååç‡ã€‚</p></li><li><p><strong>å†…å­˜åˆ©ç”¨ç‡</strong><br>å³å†…å­˜çš„å®é™…åˆ©ç”¨ç‡ï¼Œå—ç‰µåˆ¶ä¸å†…å­˜ä¸­çš„å°ç¢ç‰‡ã€‚</p></li></ul><h2 id="åƒåœ¾å›æ”¶">åƒåœ¾å›æ”¶</h2><p>åƒåœ¾å›æ”¶ï¼ˆGarbage Collectionï¼‰æ˜¯ç°ä»£é«˜çº§è¯­è¨€çš„å¸¸è§ç‰¹æ€§ï¼Œå®ƒæœ€æ—©å¯è¿½æº¯äº 1960s Lispè¯­è¨€ï¼Œå¦‚ä»Šä¹Ÿå·²ç»å‘å±•ä¸º Javaã€Python ç­‰è¯­è¨€çš„é‡è¦éƒ¨åˆ†ã€‚</p><h3 id="What-is-Garbage">What is Garbage?</h3><p>æ­£æ‰€è°“çŸ¥å·±çŸ¥å½¼æ–¹èƒ½ç™¾æˆ˜ç™¾èƒœï¼Œæ¬²æ¶ˆç­â€œåƒåœ¾â€ï¼Œå…ˆææ¸…æ¥šâ€œåƒåœ¾â€çš„å®šä¹‰ã€‚<br>é˜…è¯»ä¸‹æ®µä»£ç ï¼Œå…¶ä¸­çš„æŒ‡é’ˆ<code>p</code>åœ¨å‡½æ•°<code>garbage</code>å†…éƒ¨æ²¡æœ‰è¢«é‡Šæ”¾æ‰ï¼Œå› æ­¤å‡½æ•°è°ƒç”¨è¿”å›åï¼Œè¿™å°±æ˜¯ä¸€æ®µå†…å­˜åƒåœ¾ï¼Œä¹Ÿç§°ä¸º<strong>å†…å­˜æ³„æ¼</strong>ã€‚</p><blockquote><p>å› æ­¤åƒåœ¾å›æ”¶ï¼Œå°±æ˜¯è‡ªåŠ¨é‡Šæ”¾ æ³„æ¼çš„å†…å­˜</p></blockquote><pre><code class="language-c++">void garbage(){    int *p = (int *)Malloc(15213);    return; /* Array p is garbage at this point */}</code></pre><ul><li>å®é™…çš„åƒåœ¾åšæ³•æ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œç®€è¦æä¸€ä¸‹å…¶å®ç°åŸç†ã€‚</li></ul><p>åƒåœ¾å›æ”¶å™¨ ä¼šç»´æŠ¤ä¸€ä¸ªå†…å­˜å—çš„æœ‰å‘å›¾ï¼Œå…¶ä¸­ <code>Reachable</code>èŠ‚ç‚¹å°±æ˜¯æœ‰æŒ‡é’ˆæŒ‡å‘çš„ï¼Œå¯ä»¥è¢«æ‰‹åŠ¨é‡Šæ”¾ï¼›è€Œ <code>Unreachable</code>èŠ‚ç‚¹å°±æ˜¯æ— å†…å­˜æ³„æ¼çš„èŠ‚ç‚¹ï¼Œåƒåœ¾å›æ”¶å°±æ˜¯å»é‡Šæ”¾å®ƒä»¬ã€‚</p><p><img src="/images/memory-garbage.png" alt=""></p><h2 id="memory-leaks">memory leaks</h2><p>å…³äºå†…å­˜æ³„æ¼çš„å®šä¹‰ï¼Œ<a href="#What-is-Garbage">ä¸Šé¢æœ‰æåˆ°</a>ã€‚è¿™é‡Œé‡ç‚¹ä»‹ç»ä¸¤ç§æ£€æµ‹å†…å­˜æ³„æ¼çš„å·¥å…·ã€‚æ¨èé˜…è¯»è¿™ç¯‡ææ–™: <a href="https://www.usna.edu/Users/cs/roche/courses/s19ic221/lab05.html">IC221 Lab 05: Memory Leaks</a></p><h3 id="Valgrind">Valgrind</h3><ul><li><code>valgrind ./a.out</code>ï¼šè·Ÿè¸ªå†…å­˜æ³„æ¼</li><li><code>valgrind --leak-check=full ./a.out</code>ï¼šæŸ¥çœ‹æ›´è¯¦ç»†çš„å†…å­˜æ³„æ¼ä¿¡æ¯</li><li><code>LEAK SUMMARY</code>ï¼šè¯¥æ ‡ç­¾ï¼Œå°±æ˜¯æ½œåœ¨çš„æ³„æ¼éƒ¨åˆ†</li></ul><pre><code class="language-c++">==2392771== HEAP SUMMARY:==2392771==     in use at exit: 0 bytes in 0 blocks==2392771==   total heap usage: 0 allocs, 0 frees, 0 bytes allocated</code></pre><h3 id="ASan">ASan</h3><p><a href="https://github.com/google/sanitizers/wiki/AddressSanitizer"><strong>AddressSanitizer</strong></a> å·²é›†æˆåˆ° gccã€clang ç­‰ç¼–è¯‘å™¨ï¼Œæ·»åŠ  <code>-fsanitize=address</code> çš„ç¼–è¯‘é€‰é¡¹ å¹¶è¿è¡Œå³å¯ã€‚</p><ul><li><code>g++ -fsanitize=address -g main.cp</code></li></ul><pre><code class="language-c++">===================================================================2392472==ERROR: LeakSanitizer: detected memory leaksDirect leak of 5 byte(s) in 1 object(s) allocated from:</code></pre><h2 id="memory-bugs">memory bugs</h2><p>å†…å­˜bug ç›¸å¯¹äºå…¶ä»–ç±»å‹çš„bugï¼Œå¾€å¾€æ›´éš¾ä»¥å®šä¹‰å’Œæ’æŸ¥ã€‚è¿™ç¯‡æ–‡ç«  <a href="/posts/2F2QH5R/#Bug%E4%BA%A7%E7%94%9F%E5%8E%9F%E7%90%86">è°ƒè¯•ç†è®ºä¸å®è·µ</a> æŒ‡å‡ºï¼š<strong>ç¨‹åºä»£ç é”™ï¼ˆBugï¼‰åˆ° å¯è§‚æµ‹é”™ï¼ˆFailureï¼‰ä¹‹é—´çš„è·¨åº¦è·ç¦»ï¼Œå†³å®šä¸€ä¸ªbugæ’æŸ¥çš„éš¾æ˜“ç¨‹åº¦</strong>ï¼Œè€Œå†…å­˜bugçš„è·¨åº¦å°¤é•¿ã€‚</p><blockquote><p>æ¢è¨€ä¹‹ï¼Œä¸è®ºæ˜¯æ—¶é—´è¿˜æ˜¯ç©ºé—´ä¸Šï¼Œå†…å­˜çš„é”™è¯¯ å¾€å¾€è·ç¦»é”™è¯¯æºæœ‰è¾ƒé•¿ä¸€æ®µè·ç¦»ã€‚</p></blockquote><h3 id="å¼•ç”¨åæŒ‡é’ˆâŒ">å¼•ç”¨åæŒ‡é’ˆâŒ</h3><p>é”™è¯¯è¡¨ç°æ˜¯ <code>segmentation fault</code>ï¼Œé”™è¯¯åŸå› æœ‰ï¼š</p><ul><li>è®¿é—®éæ³•å†…å­˜åœ°å€ï¼Œå¦‚è¯»å– <code>0x0000001</code> åœ°å€çš„å€¼ï¼›</li><li>å¯¹ â€œåªè¯»å†…å­˜â€ è¿›è¡Œå†™æ“ä½œï¼Œå¦‚ <code>scanf("%d", val)</code></li></ul><div class="admonition warning"><p class="admonition-title">WARNING</p><ul><li><code>scanf("%d", val)</code> ä¼šå°† <code>val</code> çš„å€¼è§£é‡Šä¸ºä¸€ä¸ªåœ°å€</li><li>å¦‚æœè¯¥åœ°å€åªè¯»ï¼Œä¼šå‡ºç° <code>segmentation fault</code></li><li>å¦‚æœè¯¥åœ°å€å¯å†™ï¼Œç¨‹åºä¼šè¦†ç›–è¿™æ®µå†…å­˜ï¼Œé€ æˆæ— æ³•é¢„æµ‹çš„åæœ...</li></ul></div><h3 id="æœªåˆå§‹åŒ–çš„å †å†…å­˜âŒ">æœªåˆå§‹åŒ–çš„å †å†…å­˜âŒ</h3><p>å¯¹äº <code>.bss</code> çš„é™æ€å†…å­˜ï¼ŒåŠ è½½å™¨ä¼šå°†å…¶åˆå§‹åŒ–ä¸º0ï¼Œä½†æ˜¯å †å†…å­˜çš„å€¼æ˜¯æ— æ³•é¢„æµ‹çš„ã€‚</p><p>å¦‚ä¸‹ <code>y</code> æ•°ç»„çš„å€¼ä¸ä¸€å®šéƒ½ä¸º0ï¼Œè¯·æ‰‹åŠ¨ä¸ºå…¶èµ‹å€¼ã€‚<br><code>int *y = (int *)malloc(5 * sizeof(int))</code></p><h3 id="ç¼“å†²åŒºæº¢å‡º-âŒ">ç¼“å†²åŒºæº¢å‡º âŒ</h3><p>è¿™ç±»bugä½¿ç”¨ä¸­æ–‡æœ‰ç‚¹åˆ«æ‰­ï¼Œå®é™…æ˜¯ <code>Stack (Buffer) Overflows</code>ï¼Œå³å†™å†…å­˜æ—¶è¶…å‡ºåŸæœ¬çš„å¤§å°é™åˆ¶ã€‚å¦‚ä¸‹å½“è¾“å…¥è¶…è¿‡ 64 bits å°±ä¼šå‡ºç° <code>segmentation fault</code>ï¼š</p><pre><code class="language-c++">char buf[64];scanf("%s", &amp;buf);</code></pre>]]></content>
    
    
    <summary type="html">&lt;p&gt;è™šæ‹Ÿå†…å­˜ã€cacheã€å†…å­˜åˆ†é…ã€å†…å­˜æ³„æ¼â€¦&lt;/p&gt;</summary>
    
    
    
    <category term="Linux" scheme="http://luhao.wiki/categories/Linux/"/>
    
    <category term="Linux" scheme="http://luhao.wiki/categories/Linux/Linux/"/>
    
    
    <category term="C++" scheme="http://luhao.wiki/tags/C/"/>
    
    <category term="Python" scheme="http://luhao.wiki/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>ã€CSAPPã€‘CMU 15-213</title>
    <link href="http://luhao.wiki/posts/csapp/"/>
    <id>http://luhao.wiki/posts/csapp/</id>
    <published>2023-06-11T18:00:54.000Z</published>
    <updated>2023-06-27T17:30:11.703Z</updated>
    
    <content type="html"><![CDATA[<p>CSç½‘è¯¾ä¸­çš„ â€œåœ£ç»â€<span id="more"></span></p><style type="text/css">blockquote{    line-height: 30px;    padding: 4px 16px;}</style><blockquote><ul><li><a href="https://www.cs.cmu.edu/~213/">è¯¾ç¨‹ä¸»é¡µ</a> | <a href="https://www.bilibili.com/video/BV1iW411d7hd/">Bç«™è§†é¢‘ï¼ˆä¸­å­—ï¼‰</a> | <a href="https://www.cs.cmu.edu/~213/lectures/">è¯¾ç¨‹ppt</a></li><li><a href="http://1.15.115.4/CSAPP-3rd.pdf">CSAPP pdf è‹±æ–‡ç‰ˆ</a></li><li><a href="https://github.com/Maecenas/ICS-15213-CSAPP3e-CMU">Labs Github</a></li><li><a href="https://fengmuzi2003.gitbook.io/csapp3e/">CSAPPé‡ç‚¹è§£è¯»</a></li><li><a href="https://wdxtub.com/work/">è¯»è–„/è¯»åš CSAPP</a></li></ul></blockquote><h2 id="CSAPP">CSAPP</h2><p>CSAPP æ˜¯ ã€ŠComputer Systems: A Programmerâ€™s Perspectiveã€‹ è¿™æœ¬ä¹¦çš„ç¼©å†™ï¼Œå®ƒä½œä¸ºCMUå¤§å­¦çš„ICSè¯¾æ•™æï¼Œè¢«èª‰ä¸ºè®¡ç®—æœºç³»åˆ—è¯¾ç¨‹çš„åœ£ç»ï¼Œå…¶å†…å®¹æ¶‰åŠï¼šè®¡ç®—æœºç»„æˆåŸç†ã€æ“ä½œç³»ç»Ÿã€ç¼–è¯‘ä¼˜åŒ–ã€ç½‘ç»œå’Œå¹¶å‘ç­‰ã€‚</p><p>â€œä¸‡ä¸ˆé«˜æ¥¼å¹³åœ°èµ·ï¼Œå‹¿ä»¥æµ®æ²™ç­‘é«˜å°â€ï¼Œå­¦ä¹ è®¡ç®—æœºçš„åº•å±‚åŸç†ï¼Œæ˜¯åœ¨ä¿®ç‚¼å†…åŠŸã€åœ¨å¤¯å®åŸºç¡€ï¼Œè¿™æ¯”ä¿®ä¸€ä¸ªbugæˆ–è€…è¯»å‡ æ®µä»£ç æ›´åŠ å®åœ¨ã€‚</p><h3 id="ç«™å†…æ–‡ç« ">ç«™å†…æ–‡ç« </h3><ul><li><a href="/posts/24H1CZ3/">2. Information Storage</a></li><li><a href="/posts/1X3A6C1/">9. Virtual Memory</a></li></ul><h2 id="å…³äº-labs">å…³äº labs</h2><p>é¦–å…ˆ <code>CSAPP</code> çš„æ•´ä¸ªå­¦ä¹ è¿‡ç¨‹ï¼šä»¥ <code>labs</code> ä¸ºä¸»ï¼Œè§†é¢‘å’Œppt ä¸ºè¾…ã€‚åœ¨githubä¸Šæ‰¾åˆ°ä¸€ä»½ç–‘ä¼¼å®˜æ–¹ä¸€è‡´çš„repoï¼Œè‡ªå·±forkäº†ä¸€ä»½ç”¨äºå¼€å‘ï¼š<a href="https://github.com/593413198/ICS-15213-CSAPP3e-CMU">ğŸ”¥<em><strong>Github Repo</strong></em></a></p><p>æ•´ä¸ª labs çš„è®¾è®¡éå¸¸ç²¾å·§ï¼Œè¿˜å›Šæ‹¬äº†æµ‹è¯•ã€è¯„åˆ†çš„ç”¨ä¾‹ï¼Œåè€…æ˜¯ç”¨ python2 è„šæœ¬ç¼–å†™ã€‚ä»¥ lab-0 ä¸ºä¾‹ç¨å¾®ä»‹ç»å…¶æ•´ä½“çš„æ¶æ„è®¾è®¡ï¼š</p><ul><li><code>RAEDME</code>ï¼šå®éªŒè¯´æ˜</li><li><code>Makefile</code>ï¼šé€šè¿‡ <code>make</code> å®Œæˆå®éªŒçš„ç¼–è¯‘ã€è¿è¡Œä¸æµ‹è¯•</li><li><code>*.c, *.h</code>ï¼šlabæºç  â­</li><li><code>qtest</code>ï¼šè„šæœ¬é©±åŠ¨çš„æµ‹è¯•æ¡†æ¶ï¼Œå€¼å¾—ä¸€è¯» â­</li></ul><p>å…¶ä¸­ <code>console.c</code> å®ç°äº†ä¸€ä¸ªç²¾å·§çš„å¯äº¤äº’å‘½ä»¤è¡Œï¼Œå¹¶é›†æˆä¸€äº›ç”¨äº lab çš„æŒ‡ä»¤ã€‚<code>qtest</code> é›†æˆäº†å‰è€…å’Œä¸€äº›æµ‹è¯•ç”¨ä¾‹ï¼Œå®ƒå°†è¯„åˆ¤ä½ çš„ä»£ç æ˜¯å¦é€šè¿‡å¤šå°‘caseã€ä»¥åŠè·å¾—å¤šå°‘å¾—åˆ†ã€‚</p><p><strong>é€šè¿‡å®éªŒï¼Œè¯»æ‡‚å®éªŒæ¡†æ¶ä»£ç ï¼Œè¿™ä¸¤ä»¶äº‹éƒ½å¾ˆé‡è¦ï¼</strong></p><h2 id="Lab0-c-programing">Lab0 - c programing</h2>]]></content>
    
    
    <summary type="html">&lt;p&gt;CSç½‘è¯¾ä¸­çš„ â€œåœ£ç»â€&lt;/p&gt;</summary>
    
    
    
    <category term="Linux" scheme="http://luhao.wiki/categories/Linux/"/>
    
    <category term="Linux" scheme="http://luhao.wiki/categories/Linux/Linux/"/>
    
    
    <category term="Python" scheme="http://luhao.wiki/tags/Python/"/>
    
    <category term="linux" scheme="http://luhao.wiki/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>ã€cppã€‘Constructors</title>
    <link href="http://luhao.wiki/posts/17P7469/"/>
    <id>http://luhao.wiki/posts/17P7469/</id>
    <published>2023-06-10T18:42:16.000Z</published>
    <updated>2023-07-04T17:03:58.353Z</updated>
    
    <content type="html"><![CDATA[<div class="admonition note"><p class="admonition-title">æè¦</p><ul><li><a href="https://hackingcpp.com/cpp/lang/destructors.html">hackingcpp: destructors</a></li><li>é¢å‘ä¸€äº›åŸºç¡€ä½¿ç”¨ï¼Œå› æ­¤æ‰€æ¶‰æ¯”è¾ƒæµ…</li></ul></div><h2 id="åŸºç¡€">åŸºç¡€</h2><p><code>cpp</code> æœ‰ 3 ç§ç‰¹æ®Šçš„æˆå‘˜å‡½æ•°ï¼Œæœ¬æ–‡æ‰€æœ‰çš„å†…å®¹éƒ½å›´ç»•å®ƒä»¬å±•å¼€ï¼š</p><table><thead><tr><th style="text-align:left"></th><th style="text-align:center">what</th><th style="text-align:center">when</th></tr></thead><tbody><tr><td style="text-align:left"><code>T::T()</code></td><td style="text-align:center">é»˜è®¤<u class="green">æ„é€ </u>å‡½æ•°</td><td style="text-align:center"><code>T</code>åˆ›å»ºæ—¶</td></tr><tr><td style="text-align:left"><code>T::~T()</code></td><td style="text-align:center">é»˜è®¤<u class="green">ææ„</u>å‡½æ•°</td><td style="text-align:center"><code>T</code>é”€æ¯æ—¶</td></tr><tr><td style="text-align:left"><code>T::T(paramâ€¦)</code></td><td style="text-align:center">ç‰¹æ®Š<u class="green">æ„é€ </u>å‡½æ•°</td><td style="text-align:center"><code>T</code>å¸¦å‚æ•°åˆ›å»ºæ—¶</td></tr></tbody></table><p>å³ä½¿ç”¨æˆ·ä¸å»å£°æ˜ æ„é€  å’Œ ææ„ å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¹Ÿä¼š<strong>è‡ªè¡Œåˆ›å»ºè€…ä¸¤è€…</strong>ã€‚</p><p>æ„é€ å‡½æ•°çš„è°ƒç”¨æ—¶æœºå¾ˆå®¹æ˜“ç†è§£ï¼Œä½†<strong>ææ„å‡½æ•°çš„è°ƒç”¨æ—¶æœº</strong>å¾ˆç‰¹æ®Šã€‚</p><ul><li><p>æ˜¾å¼åœ°é”€æ¯å¯¹è±¡</p></li><li><p>éšå¼åœ°è¢«é”€æ¯ï¼Œå¦‚å±€éƒ¨å˜é‡çš„ä½œç”¨åŸŸç»“æŸ</p></li></ul><pre><code class="language-c++">if (...) {    T x;  // constructor}  // destructor</code></pre><h2 id="Constructor">Constructor</h2><p>æ„é€ å‡½æ•°æ ¹æ®æ„é€ çš„ç±»å‹ï¼Œåˆåˆ†ä¸ºå¦‚ä¸‹å‡ ç±»ï¼š</p><pre><code class="language-c++">class Test{public:    Test(int a);  // æ„é€ å‡½æ•°    Test(const Test&amp;);  // æ‹·è´æ„é€ å‡½æ•°    Test&amp; operator=(const Test&amp;);  // æ‹·è´èµ‹å€¼operator    Test();   // æ„é€ å‡½æ•°    ~Test();  // ææ„å‡½æ•°}</code></pre><p>è€ƒè™‘å¦‚ä¸‹ä¸¤ä¸ªåˆå§‹åŒ–çš„ç”¨æ³•ï¼Œæ‰èƒ½çœ‹å‡ºè°ƒç”¨æ„é€ å‡½æ•°çš„åŒºåˆ«ï¼š</p><ul><li><code>Test t1(88);</code>ï¼šæ™®é€šæ„é€ å‡½æ•°</li><li><code>Test t1 = t2;</code>ï¼šæ‹·è´æ„é€ å‡½æ•°</li><li><code>Test t1; t1 = t2;</code>ï¼šæ‹·è´èµ‹å€¼operator</li></ul><div class="admonition warning"><p class="admonition-title">C++11 delete</p><ul><li>ç”³æ˜ä¸º <code>Test(const Test&amp;) = delete;</code> å¯ä»¥ç¦æ­¢ç”¨æˆ·ä½¿ç”¨æ‹·è´æ„é€ å‡½æ•°</li><li>æ­¤æ—¶å¦‚æœè°ƒç”¨ï¼Œä¼šæœ‰ç¼–è¯‘æŠ¥é”™ï¼š<u class="error"><code>error: use of deleted function â€˜Test::Test(const Test&amp;)â€™</code></u></li></ul></div><h2 id="Destructor">Destructor</h2><p>ææ„å‡½æ•°çš„è°ƒç”¨é¡ºåºæ˜¯ç¼–è¯‘å™¨ä¸¥æ ¼é™åˆ¶çš„ï¼Œå³<strong>ææ„é¡ºåºä¸å£°æ˜é¡ºåºç›¸å</strong>ã€‚</p><p>å¯¹äºå¦‚ä¸‹çš„ç»“æ„ä½“ <code>Test</code>ï¼Œå½“å¯¹è±¡å‘ç”Ÿé”€æ¯æ—¶ï¼Œæ‰§è¡Œææ„çš„é¡ºåºä¾æ¬¡æ˜¯ï¼š</p><ul><li><code>Test -&gt; t3 -&gt; t2 -&gt; t1</code></li></ul><pre><code class="language-c++">class Test {    T1 t1;    T2 t2;    T3 t3;public:    Test();    ~Test();}</code></pre><h2 id="RAII">RAII</h2><blockquote><p><em>Resource Acquisition Is Initialization</em></p></blockquote><p>è¿™æ¡ <a href="https://stackoverflow.com/questions/2321511/what-is-meant-by-resource-acquisition-is-initialization-raii">stackoverflow</a> è®¤ä¸º<code>RAII</code>åº”è¯¥ç§°ä½œ<code>Scope-Bound Resouce Managerment</code>ï¼Œè¿™æ ·æ›´å®¹æ˜“ç†è§£ï¼Œç¬”è€…æ·±è¡¨èµåŒï¼Œå› æ­¤ä¸‹é¢ä¹Ÿå›´ç»•è¿™ä¸ªç†è§£å±•å¼€ã€‚</p><p><strong>Resource</strong></p><p>é¦–å…ˆç†è§£ä»€ä¹ˆæ˜¯ <code>Resource</code>? å¯ä»¥ç†è§£ä¸ºä»»ä½•éœ€è¦è¢«åˆç†æ§åˆ¶çš„c++å¯¹è±¡</p><ul><li><em>file handles</em></li><li><em>thread</em></li><li><em>lock</em></li><li>â€¦</li></ul><p>å¯¹äºä»»ä½•ä¸€ä¸ªresouceï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¼šç»å† <u class="black"><strong>åˆ›å»º -&gt; ä½¿ç”¨ -&gt; é”€æ¯</strong></u> ä¸‰ä¸ªé˜¶æ®µã€‚è€Œé”€æ¯å¾€å¾€æœ€å®¹æ˜“è¢«å¿½è§†ï¼Œè¿™ä¼šå¼•èµ·å†…å­˜æ³„æ¼ç­‰é—®é¢˜ã€‚</p><p><strong>Scope-Bound</strong></p><p><code>Scope</code>æ˜¯æŒ‡ä¸€ä¸ªresourceçš„ä½œç”¨åŸŸï¼Œå½“å…¶ç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼Œåº”è¯¥è‡ªåŠ¨è°ƒç”¨å…¶ææ„å‡½æ•°ä»¥ä½¿å…¶é”€æ¯ã€‚</p><div class="admonition note"><p class="admonition-title">æ€»ç»“</p><ul><li><code>RAII</code> æ˜¯ä¸€ç§é˜²æ­¢å†…å­˜æ³„æ¼è€Œè¿›è¡Œè‡ªåŠ¨ææ„çš„cppç‰¹æ€§</li></ul></div><h3 id="RAIIåº”ç”¨">RAIIåº”ç”¨</h3><p>ä¸€äº› C Library æ€»æ˜¯ä¼šæˆå¯¹å‡ºç°ä¸€äº›åŠŸèƒ½æ€§çš„å‡½æ•°ï¼Œä¾‹å¦‚ï¼š</p><ul><li><code>gpulib_init</code>, <code>gpulib_finalize</code></li></ul><p>å¦‚æœåªè°ƒç”¨äº†initå‡½æ•°ï¼Œè€Œå¿˜è®°è°ƒç”¨è´Ÿè´£ææ„çš„åè€…ï¼Œå°±ä¼šå‡ºç°å†…å­˜æ³„æ¼ã€èµ„æºhung-upç­‰bugã€‚<br>å› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨cppå±‚é€šè¿‡ RAII çš„ç†å¿µå°†å®ƒä»¬å°è£…ä¸€å±‚ï¼š</p><pre><code class="language-c++">#include &lt;gpulib.h&gt;class GPUContext {  int gpuid_;public:  explicit  GPUContext (int gpuid = 0): gpuid_{gpuid} {    gpulib_init(gpuid_);  }  ~GPUContext () {    gpulib_finalize(gpuid_);  }}</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;admonition note&quot;&gt;&lt;p class=&quot;admonition-title&quot;&gt;æè¦
&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://hackingcpp.com/cpp/lang/destructors.html&quot;&gt;hackingc</summary>
      
    
    
    
    <category term="C++" scheme="http://luhao.wiki/categories/C/"/>
    
    <category term="C++" scheme="http://luhao.wiki/categories/C/C/"/>
    
    
    <category term="C++" scheme="http://luhao.wiki/tags/C/"/>
    
  </entry>
  
</feed>
